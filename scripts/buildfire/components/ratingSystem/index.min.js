if(typeof buildfire=="undefined")throw"please add buildfire.js first to use buildfire components";if(typeof buildfire.components=="undefined")buildfire.components={};class Rating{constructor(e={}){if(!e.data)e.data={};this.id=e.id||undefined;this.isActive=typeof e.data.isActive==="boolean"?e.data.isActive:true;this.createdOn=e.data.createdOn||new Date;this.createdBy=e.data.createdBy||undefined;this.lastUpdatedOn=e.data.lastUpdatedOn||undefined;this.lastUpdatedBy=e.data.lastUpdatedBy||undefined;this.deletedOn=e.data.deletedOn||undefined;this.deletedBy=e.data.deletedBy||undefined;this.user=e.data.user||{_id:"",displayName:"",imageUrl:""};this.ratingId=e.data.ratingId||undefined;this.rating=e.data.rating||undefined;this.comment=e.data.comment||"";this.images=e.data.images||[]}toJSON(){return{id:this.id,isActive:this.isActive,createdOn:this.createdOn,createdBy:this.createdBy,lastUpdatedOn:this.lastUpdatedOn,lastUpdatedBy:this.lastUpdatedBy,deletedOn:this.deletedOn,deletedBy:this.deletedBy,user:this.user,ratingId:this.ratingId,rating:this.rating,comment:this.comment,images:this.images,_buildfire:{index:{number1:this.isActive?1:0,date1:this.createdOn,array1:[this.rating,this.user._id],string1:this.ratingId}}}}}class Ratings{static get TAG(){return"rating"}static search(e,n){buildfire.appData.search(e,Ratings.TAG,(e,t)=>{if(e)return n(e);return n(null,t.map(e=>new Rating(e)))})}static findRatingByUser(e,t,n){Ratings.search({filter:{"_buildfire.index.array1":t,"_buildfire.index.string1":e}},(e,t)=>{if(e)return n(e);return n(null,t[0])})}static add(n,i){if(!(n instanceof Rating))return i(new Error("Only Rating instance can be used"));if(!n.user||!n.user._id)return i(new Error("User must be logged in"));if(!n.rating)return;Ratings.search({filter:{"_buildfire.index.array1":n.user._id,"_buildfire.index.string1":n.ratingId}},(e,t)=>{if(e)return i(e);if(t&&t.length)return i(new Error("User already rated item"));if(!t||t.length===0){n.createdOn=new Date;buildfire.appData.insert(n.toJSON(),Ratings.TAG,false,(e,n)=>{if(e)return i(e);n=new Rating(n);Summaries.addRating(n,(e,t)=>{return i(null,{rating:n,summary:t})})})}})}static set(t,e,i){if(!(e instanceof Rating))return i(new Error("Only Rating instance can be used"));e.lastUpdatedOn=new Date;buildfire.appData.update(e.id,e.toJSON(),Ratings.TAG,(e,n)=>{if(e)return i(e);n=new Rating(n);Summaries.updateRating(t,n,(e,t)=>{return i(null,{rating:n,summary:t})})})}static del(n,i){if(!(n instanceof Rating))return i(new Error("Only Rating instance can be used"));buildfire.appData.delete(n.id,Ratings.TAG,(e,t)=>{if(e)return i(e);Summaries.deleteRating(n,(e,t)=>{buildfire.messaging.sendMessageToControl({type:"ratings"});return i(null,{rating:n,summary:t})})})}static softDel(n,i){if(!(n instanceof Rating))return i(new Error("Only Rating instance can be used"));let a=n.isActive;n.isActive=false;buildfire.appData.update(n.id,n.toJSON(),Ratings.TAG,(e,t)=>{if(e)return i(e);if(!a)return i(null,n);Summaries.deleteRating(n,(e,t)=>{buildfire.messaging.sendMessageToControl({type:"ratings"});return i(null,n)})})}}class Summary{constructor(e={}){if(!e.data)e.data={};this.id=e.id||undefined;this.ratingId=e.data.ratingId||null;this.count=e.data.count||0;this.total=e.data.total||0}toJSON(){return{id:this.id,ratingId:this.ratingId,count:this.count,total:this.total,_buildfire:{index:{string1:this.ratingId}}}}}class Summaries{static get TAG(){return"fivestarsummary"}static search(e,n){buildfire.appData.search(e,Summaries.TAG,(e,t)=>{if(e)return n(e);return n(null,t.map(e=>new Summary(e)))})}static addRating(i,a){const e={filter:{"_buildfire.index.string1":i.ratingId}};buildfire.appData.search(e,Summaries.TAG,(e,t)=>{if(e)return a(e);let n=t[0];if(!n){n=new Summary({data:{ratingId:i.ratingId,count:1,total:i.rating}});buildfire.appData.insert(n.toJSON(),Summaries.TAG,false,(e,t)=>{if(e)return a(e);return a(null,new Summary(t))})}else{n=new Summary(n);n.count++;n.total+=i.rating;buildfire.appData.update(n.id,n.toJSON(),Summaries.TAG,(e,t)=>{if(e)return a(e);return a(null,new Summary(t))})}})}static updateRating(i,a,r){const e={filter:{"_buildfire.index.string1":a.ratingId}};buildfire.appData.search(e,Summaries.TAG,(e,t)=>{if(e)return r(e);let n=new Summary(t[0]);n.total+=a.rating;n.total-=i.rating;buildfire.appData.update(n.id,n.toJSON(),Summaries.TAG,(e,t)=>{if(e)return r(e);return r(null,new Summary(t))})})}static deleteRating(i,a){const e={filter:{"_buildfire.index.string1":i.ratingId}};buildfire.appData.search(e,Summaries.TAG,(e,t)=>{if(e)return a(e);let n=new Summary(t[0]);n.total-=i.rating;n.count--;buildfire.appData.update(n.id,n.toJSON(),Summaries.TAG,(e,t)=>{if(e)return a(e);return a(null,new Summary(t))})})}}const FULL_STAR="&#9733;";const ADMIN_TAG="bf_ratings_admin";const defaultOptions={hideAverage:true,showRatingsOnClick:true,translations:{ratings:"Ratings",addRating:"Add Rating",updateRating:"Update Rating",leaveAReview:"Leave a review",writeAComment:"Write a comment",writeHere:"Write here...",basedOn:"Based on",review:"Review",reviews:"Reviews",viewAll:"View All",overallRating:"Overall rating",emptyStateText:"No reivews yet. Be the first to leave a review!",cancel:"Cancel"}};function getNotRatedUI(t){for(let e=0;e<5;e++){let e=document.createElement("span");e.innerHTML=FULL_STAR;e.style.opacity="0.3";t.appendChild(e)}}function injectRatings(a=defaultOptions,r){let l=a.elements;if(typeof l==="undefined")l=document.querySelectorAll("[data-rating-id]");for(let n=0;n<l.length;n++){let e=l[n];if(e.innerHTML.includes("trigger_error"))continue;let t=l[n].cloneNode(true);if(e.parentNode)e.parentNode.replaceChild(t,e)}l=document.querySelectorAll("[data-rating-id]");let n=a.ratingIds;if(typeof n==="undefined")n=Array.from(l).map((e,t)=>{let n=e.dataset.ratingId;if(n.includes("tinymce")&&!e.innerHTML.includes("★ ★ ★ ★ ★")){return undefined}return n});if(a.pluginLevel===true){let t=buildfire.getContext().instanceId;n=n.map(e=>`${e}-${t}`)}const e={filter:{"_buildfire.index.string1":{$in:n}}};Summaries.search(e,(e,i)=>{if(e)return console.error(e);n.forEach((t,e)=>{if(!t)return;let n=i.find(e=>e.ratingId===t);a.notRated=!n;a.summary=n;a.onBackButtonClick=buildfire.navigation.onBackButtonClick;a.callback=r;injectAverageRating(l[e],t,a)})})}function injectAverageRating(i,a,r){if(!i)return console.error("Container not found in DOM");let e=i.cloneNode(true);const t={filter:{"_buildfire.index.string1":a}};let l=i.innerHTML.split("★ ★ ★ ★ ★").length==2;const s=()=>{delete r.summary;i.innerHTML=e.innerHTML;injectAverageRating(i,a,r)};if(r&&r.summary){let e=r.summary.total/r.summary.count;createStarsUI(i,e,r,a,s,l)}else{Summaries.search(t,(e,t)=>{if(e)return console.error(e);if(!t||!t[0]||t[0].count===0){t=[{total:0,count:1}]}r.summary=t[0];let n=t[0].total/t[0].count;createStarsUI(i,n,r,a,s,l)})}}function applyStyling(){let a=document.getElementById("style-ratings");if(a)a.parentElement.removeChild(a);a=document.createElement("style");buildfire.appearance.getAppTheme((e,t)=>{const{backgroundColor:n,primaryTheme:i}=t.colors;a.innerHTML=`
            .backgroundColorTheme {
                background-color: ${n} !important;
            }

            .primaryTheme {
                color: ${i} !important;
            }

            .submit-rating-button {
                color: ${i};
            }
        `;document.head.appendChild(a)})}function loadIcons(){console.log("LOADING ICONS");let n="";if(buildfire.getContext().type=="control"){n="../../../../styles/siteIcons.css"}else{n="../../../styles/siteIcons.css"}function e(){let t=document.getElementsByTagName("link");for(let e=0;e<t.length;e++){if(t[e].href==n)return true}return false}if(!e()){let e=document.createElement("link");e.href=n;e.rel="stylesheet";document.head.appendChild(e)}}function openAddRatingScreen(C,T=defaultOptions,S=()=>{}){buildfire.auth.getCurrentUser((e,R)=>{if(e||!R){return buildfire.auth.login({allowCancel:true,showMenu:true},(e,t)=>{if(!e&&t)return openAddRatingScreen(C,T)})}Ratings.findRatingByUser(C,R._id,(e,n)=>{let t=buildfire.navigation.onBackButtonClick;buildfire.navigation.onBackButtonClick=()=>{closeAddRatingScreen();buildfire.navigation.onBackButtonClick=t};if(n&&!n.isActive){let e=document.createElement("div");e.className="add-rating-screen";e.style.padding="10px";e.innerText="Your rating has been removed for violating community guildelines";return document.body.appendChild(e)}let i;if(!n){n=new Rating({data:{createdBy:R._id,user:{_id:R._id,displayName:R.displayName,imageUrl:R.imageUrl},ratingId:C}})}else{i=new Rating({data:n})}let a=document.createElement("div");a.className="add-rating-screen";a.addEventListener("click",e=>{if(e.target.className=="add-rating-screen"){buildfire.navigation.onBackButtonClick()}});let r=document.createElement("div");r.className="add-rating-screen-content backgroundColorTheme";let l=document.createElement("div");l.className="add-rating-header";let s=document.createElement("div");s.className="add-rating-title";s.innerText=n.id?T&&T.translations&&T.translations.updateRating||defaultOptions.translations.updateRating:T&&T.translations&&T.translations.addRating||defaultOptions.translations.addRating;l.appendChild(s);let d=document.createElement("div");d.className="add-rating-subtitle";d.innerText=T&&T.translations&&T.translations.leaveAReview||defaultOptions.translations.leaveAReview;let o=()=>{for(let e=0;e<5;e++){const t=document.getElementById("stars"+e);t.style.opacity=e<n.rating?"1":"0.3"}};let c=document.createElement("div");c.className="rating-stars";for(let t=0;t<5;t++){let e=document.createElement("div");e.id="stars"+t;e.addEventListener("click",function(){let e=document.querySelector(".submit-rating-button");if(e&&e.disabled){e.disabled=false;e.classList.remove("disabled")}n.rating=t+1;o()});e.innerHTML=FULL_STAR;e.className="primaryTheme";c.appendChild(e)}const u=e=>{e.preventDefault();buildfire.input.showTextDialog({placeholder:T&&T.translations&&T.translations.writeAComment||defaultOptions.translations.writeAComment,saveText:"Save",defaultValue:p.value,attachments:{images:{enable:true,multiple:true}},defaultAttachments:{images:n.images}},(e,t)=>{if(e||t.cancelled)return;n.comment=t.results[0].textValue;n.images=t.results[0].images;m();b()})};let m=()=>{p.value=n.comment||""};let g=document.createElement("div");g.className="text-area-container";let f=document.createElement("label");f.className="text-area-label";f.innerHTML=T&&T.translations&&T.translations.writeAComment||defaultOptions.translations.writeAComment;g.appendChild(f);let p=document.createElement("textarea");p.className="text-area-input";p.disabled=true;p.placeholder=T&&T.translations&&T.translations.writeHere||defaultOptions.translations.writeHere;g.appendChild(p);g.addEventListener("click",u);let h=document.createElement("images");h.className="review-images-container";const y=e=>{n.images.splice(e,1);b()};const b=()=>{h.innerHTML="";n.images.forEach((e,t)=>{let n=document.createElement("div");n.className="review-image-container";let i=document.createElement("div");i.className="review-image-delete";i.innerHTML="&#10006;";i.style.background="red";i.style.color="white";i.addEventListener("click",()=>{y(t)});let a=document.createElement("img");a.className="review-image";a.src=buildfire.imageLib.resizeImage(e,{size:"s",aspect:"1:1"});n.appendChild(a);n.appendChild(i);h.appendChild(n)})};let v=document.createElement("div");v.className="submit-rating-button";if(!n.rating){v.disabled=true;v.classList.add("disabled")}v.innerText=n.id?T&&T.translations&&T.translations.updateRating||defaultOptions.translations.updateRating:T&&T.translations&&T.translations.addRating||defaultOptions.translations.addRating;v.addEventListener("click",()=>{if(v.disabled)return;if(n.id){Ratings.set(i,n,(e,t)=>{buildfire.navigation.onBackButtonClick();buildfire.messaging.sendMessageToControl({type:"ratings"});S(e,t);if(T.callback)T.callback(e,t);buildfire.components.ratingSystem.onRating(t)})}else{Ratings.add(n,(e,t)=>{buildfire.navigation.onBackButtonClick();closeAddRatingScreen();buildfire.messaging.sendMessageToControl({type:"ratings"});S(e,t);if(T.callback)T.callback(e,t);buildfire.components.ratingSystem.onRating(t)})}});r.appendChild(l);r.appendChild(d);r.appendChild(c);r.appendChild(g);r.appendChild(h);r.appendChild(v);a.appendChild(r);document.body.appendChild(a);b();o();m()})})}function closeAddRatingScreen(){let e=document.querySelector(".add-rating-screen");if(!e)return;let t=document.querySelector(".add-rating-button");if(t)t.disabled=false;let n=document.querySelector(".edit-rating-button");if(n)n.disabled=false;document.body.removeChild(e)}function createRatingUI(n,e,t){let i=document.createElement("div");i.className="ratings-screen-rating";i.id=n.id;i.dataset.rating=JSON.stringify(n);let a=document.createElement("div");a.className="rating-header";i.appendChild(a);let r=document.createElement("img");r.className="rating-user-image";r.src=n.user&&n.user.imageUrl?n.user.imageUrl:"https://pluginserver.buildfire.com/styles/media/avatar-placeholder.png";r.src=buildfire.imageLib.resizeImage(r.src,{size:"s",aspect:"1:1"});a.appendChild(r);let l=document.createElement("div");l.className="rating-name-and-stars";a.appendChild(l);let s=document.createElement("div");s.className="rating-user-display-name primaryTheme";s.innerText=n.user&&n.user.displayName?n.user.displayName:"Unknown User";if(e&&buildfire.getContext().type!=="control"){s.appendChild(e)}l.appendChild(s);let d=document.createElement("div");d.className="rating-user-stars";l.appendChild(d);let o=document.createElement("span");o.className="stars-span";createStarsUI(o,Number(n.rating),{hideAverage:true});let c=document.createElement("span");c.className="rating-time-ago";c.innerHTML=formatTime(new Date(n.createdOn));d.appendChild(o);d.appendChild(c);let u=document.createElement("div");u.className="rating-review";i.appendChild(u);let m=document.createElement("div");m.className="rating-review-text";m.innerText=n.comment.length>120?n.comment.slice(0,120)+"...":n.comment;if(n.comment.length>120){let e=document.createElement("a");e.innerText="see more";e.addEventListener("click",()=>{m.innerText=n.comment});m.append(e)}u.appendChild(m);let g=document.createElement("div");g.className="rating-review-images";u.appendChild(g);for(let t=0;t<n.images.length;t++){const f=n.images[t];let e=document.createElement("img");e.className="rating-review-image";e.src=buildfire.imageLib.resizeImage(f,{size:"m",aspect:"1:1"});e.addEventListener("click",()=>{const e={images:n.images,index:t};buildfire.imagePreviewer.show(e,()=>{})});g.appendChild(e)}return i}function openRatingsScreen(m,g,f){buildfire.auth.getCurrentUser((e,t)=>{if(e||!t){return buildfire.auth.login({allowCancel:true,showMenu:true},(e,t)=>{if(!e&&t)return openRatingsScreen(m,g,f)})}let a=document.createElement("div");a.id="ratingsScreenContainer";a.className="ratings-screen backgroundColorTheme";buildfire.spinner.show();loadIcons();buildfire.navigation.onBackButtonClick=()=>{if(g.callback)g.callback(undefined,null);closeRatingsScreen();buildfire.navigation.onBackButtonClick=g.onBackButtonClick};if(buildfire.getContext().type=="control"){let e=document.createElement("span");e.className="icon icon-chevron-left";e.id="closeButton";e.addEventListener("click",()=>{if(g.callback)g.callback(undefined,null);closeRatingsScreen()});a.appendChild(e)}let r=document.createElement("div");r.className="ovarall-rating-container";if(buildfire.getContext().type!=="control"){r.classList.add("shadow")}else{r.classList.add("border")}const n=document.createElement("a");n.classList.add("text-primary","rating-cancel-btn");n.innerText=g&&g.translations&&g.translations.cancel||defaultOptions.translations.cancel;n.addEventListener("click",()=>{buildfire.navigation.goBack()});r.appendChild(n);let i=document.createElement("h5");i.innerText=g&&g.translations&&g.translations.overallRating||defaultOptions.translations.overallRating;i.style.fontWeight=400;i.style.fontSize="14px";r.appendChild(i);let l=document.createElement("h6");l.style.fontSize="12px";l.style.fontWeight="normal";r.appendChild(l);let s=document.createElement("div");s.className="overall-rating-stars";r.appendChild(s);a.appendChild(r);let d=document.createElement("div");a.appendChild(d);let o=document.createElement("div");o.className="empty-state-container";let c=document.createElement("h5");c.innerText=g&&g.translations&&g.translations.emptyStateText||defaultOptions.translations.emptyStateText;o.appendChild(c);Summaries.search({filter:{"_buildfire.index.string1":m}},(e,t)=>{if(e)return console.error(e);if(!t[0]){getNotRatedUI(s);return a.appendChild(o)}const{count:n,total:i}=t[0];createStarsUI(s,i/n,{hideAverage:true});l.innerText=`${g&&g.translations&&g.translations.basedOn||defaultOptions.translations.basedOn} ${n} ${g&&g.translations&&g.translations.reviews||defaultOptions.translations.reviews}`});checkIfUserIsAdmin((e,i)=>{Ratings.findRatingByUser(m,e._id,(e,t)=>{if(e)return console.error(e);if(!t){let e=document.createElement("div");e.className="add-rating-button primaryTheme";e.innerText=g&&g.translations&&(g&&g.translations&&g.translations.addRating)||defaultOptions.translations.addRating;e.addEventListener("click",()=>{if(e.disabled)return;e.disabled=true;openAddRatingScreen(m,g,()=>{u();f()})});if(buildfire.getContext().type!=="control"){r.appendChild(e)}}else{const n=document.createElement("div");n.className="edit-rating-button primaryTheme";n.innerText=g&&g.translations&&(g&&g.translations&&g.translations.updateRating)||defaultOptions.translations.updateRating;n.addEventListener("click",()=>{if(n.disabled)return;n.disabled=true;openAddRatingScreen(m,g,()=>{u();f()})});let e=createRatingUI(t,n,g);if(i){addControlsToRating(e)}d.appendChild(e)}});Ratings.search({filter:{"_buildfire.index.string1":m,"_buildfire.index.number1":1,"_buildfire.index.array1":{$ne:e._id}}},(e,t)=>{if(e)return console.error(e);t.forEach(e=>{let t=createRatingUI(e);if(i){addControlsToRating(t)}a.appendChild(t)});const n=document.getElementById("ratingsScreenContainer");if(n)document.body.removeChild(n);document.body.appendChild(a);buildfire.spinner.hide()})});const u=()=>{openRatingsScreen(m,g,f)}})}function checkIfUserIsAdmin(i){buildfire.auth.getCurrentUser((e,n)=>{if(e||!n){return buildfire.auth.login({allowCancel:true,showMenu:true},(e,t)=>{if(t)return checkIfUserIsAdmin(i)})}if(!n.tags)return i(n,false);Object.keys(n.tags).forEach(e=>{let t=n.tags[e].findIndex(e=>e.tagName==ADMIN_TAG);if(t!=-1)return i(n,true)});return i(n,false)})}function formatTime(e){return new Date(e).toLocaleDateString()}function closeRatingsScreen(){let e=document.querySelector(".ratings-screen");document.body.removeChild(e)}function createStarsUI(t,i,e,n,a,r){const{hideAverage:l,showRatingsOnClick:s}=e;let d,o;if(!r){t.innerHTML="";t.classList.add("flex-center")}else{d=t.innerHTML;if(d.includes("full-star"))return;d=d.split("★ ★ ★ ★ ★");if(t.children&&t.children[0]){o=t.children[0].style;if(o.color){let e=document.createElement("style");e.innerHTML=`
                    span.full-star {
                        color: ${o.color} !important;
                    }

                    span.full-star span {
                        color: ${o.color} !important;
                    }
                `;document.body.appendChild(e)}}t.innerHTML=""}for(let e=1;e<6;e++){let n=document.createElement("span");n.innerHTML=FULL_STAR;n.className="full-star";if(e>i&&e===Math.trunc(i)+1){n.innerHTML=`<span style="opacity: 0.3">${FULL_STAR}</span>`;let e=(i-Math.trunc(i))*100;n.style.position="relative";let t=document.createElement("span");t.innerHTML=FULL_STAR;t.className="half-star";t.style.backgroundImage=`linear-gradient(to right, currentColor ${e}%, transparent ${e}%)`;n.appendChild(t)}else if(e>i){n.style.opacity="0.3"}t.appendChild(n)}if(!l&&i>0){let e=document.createElement("span");e.className="average-rating";e.innerText=i.toFixed(1);t.appendChild(e)}if(s){t.style.cursor="pointer";t.addEventListener("click",()=>{openRatingsScreen(n,e,a)})}if(r){if(d){t.innerHTML=d[0]+t.innerHTML+d[1]}if(o){t.style=t.style.cssText+o.cssText;if(t.children&&t.children[0]){t.children[0].style=t.style.cssText+o.cssText}}}}function injectRatingComponent(e,i,t=defaultOptions){e.innerHTML="";let n=document.createElement("div");n.className="ratings";let a=document.createElement("div");a.className="reviews-container";let r=i;if(t.pluginLevel===true){let e=buildfire.getContext().instanceId;i=`${i}-${e}`}n.addEventListener("click",()=>{openRatingsScreen(i,t,s)});n.appendChild(a);const l=()=>{Summaries.search({filter:{"_buildfire.index.string1":i}},(e,t)=>{if(e)return console.err(e);if(!t||!t[0]||t[0].count===0){t=[{total:0,count:1}]}let n=t[0].total/t[0].count;createStarsUI(a,n,{hideAverage:true},i,s)})};l();e.appendChild(n);const s=()=>{injectRatingComponent(e,r,t)}}function addControlsToRating(t){let n=JSON.parse(t.dataset.rating);n=new Rating({data:n,id:n.id});if(!n.isActive){let e=document.createElement("div");e.innerText="This rating has been blocked";t.appendChild(e)}let e=document.createElement("div");let i=document.createElement("button");i.innerText="Delete";i.className="delete-button";i.addEventListener("click",()=>{buildfire.notifications.confirm({title:"Are you sure?",message:"Are you sure you want to remove this review?",confirmButton:{text:"Yes",key:"yes",type:"danger"},cancelButton:{text:"No",key:"no",type:"default"}},function(e,t){if(e&&e!==2||t&&t.selectedButton.key==="yes"){Ratings.del(n,(e,t)=>{let n=document.getElementById(t.rating.id);n.parentElement.removeChild(n)})}})});let a=document.createElement("button");a.innerText="Block";a.className="delete-button";a.addEventListener("click",()=>{buildfire.notifications.confirm({title:"Are you sure you want to block this review?",message:"User will not be able to submit another review for this item",confirmButton:{text:"Yes",key:"yes",type:"danger"},cancelButton:{text:"No",key:"no",type:"default"}},function(e,t){if(e&&e!==2||t&&t.selectedButton.key==="yes"){Ratings.softDel(n,(e,t)=>{})}})});e.appendChild(i);e.appendChild(a);t.appendChild(e)}function onRating(){}buildfire.components.ratingSystem={injectRatings:injectRatings,injectRatingComponent:injectRatingComponent,openAddRatingScreen:openAddRatingScreen,openRatingsScreen:openRatingsScreen,onRating:onRating};applyStyling();