{"version":3,"sources":["../sdk/scripts/buildfire/components/carouselLight/carouselLight.js"],"names":["buildfire","components","carousel","lory","document","write","style","getElementById","head","removeChild","createElement","id","innerHTML","appendChild","view","options","self","this","config","mergeSettings","_initDimensions","layout","selector","querySelector","items","length","_applyConfigurations","err","result","shouldInitializeLory","init","_handleStaticSlides","display","console","error","lastCarouselTimer","prototype","lastImage","callback","autoInterval","order","clearInterval","storagePlace","getFrameType","localStorage","getItem","res","images","sendIndex","item","index","Number","setItem","e","r","setInterval","_changeImage","bind","Math","floor","random","removeItem","_randomizeArray","_shuffle","imagesCopy","Array","from","push","first","last","j","x","i","carouselImages","carouselImage","indexOf","isHome","querySelectorAll","_changeStaticSlides","_renderStaticSlides","activeSlide","siblingSlide","nextSibling","nextSlide","children","src","classList","remove","add","forEach","slide","iconUrl","addEventListener","actionItems","execute","warn","_cropImage","attrName","settings","speed","loop","userSettings","_minHeight","validateLauncherCarousel","getContext","device","platform","toLowerCase","navigation","onAppLauncherActive","_applySlider","onAppLauncherInactive","_destroySlider","_renderHTMLItems","timerInterval","lorySlider","classNameSlideContainer","classNameFrame","ease","rewindSpeed","slideSpeed","slidesToScroll","infinite","enableMouseEvents","next","firstChild","sliderFrame","cname","slideContainer","_loadImages","itemsLength","pending","_appendItem","itemSlide","append","setup","loadItems","appendItems","width","window","innerWidth","height","ceil","aspect","innerHeight","cssWidth","cssHeight","imageLib","local","cropImage","size","image","backgroundImage","alt","title","className","setAttribute","overflow","transform"],"mappings":"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","file":"carouselLight.min.js","sourcesContent":["'use strict';\n\nif (typeof (buildfire) == 'undefined') throw ('please add buildfire.js first to use carousel components');\n\nif (typeof (buildfire.components) == 'undefined')\n\tbuildfire.components = {};\n\nif (typeof (buildfire.components.carousel) == 'undefined')\n\tbuildfire.components.carousel = {};\n\n(function () {\n\tif (typeof lory == 'undefined') {\n\t\tdocument.write('<script src=\"' + '../../../scripts/lory/lory.min.js\"></script>');\n\t}\n\n\t//Add Lory CSS\n\tvar style = document.getElementById('loryInjectedStyle');\n\tif (style) document.head.removeChild(style);\n\n\tstyle = document.createElement('style');\n\tstyle.id = 'loryInjectedStyle';\n\tstyle.innerHTML += ' .loryFrame {position: relative;font-size: 0; line-height: 0; overflow: hidden; white-space: nowrap;}';\n\tstyle.innerHTML += ' .loryFrame li { position: relative; display: inline-block; height: 100%;}';\n\tstyle.innerHTML += ' .lorySlides { display: inline-block;}';\n\tstyle.innerHTML += ' .loryPercentage .lorySlides { display: block; padding: 0px;}';\n\tstyle.innerHTML += ' .loryPercentage li { width: 100%;}';\n\tstyle.innerHTML += ' .blurred-background-image { filter: blur(30px); position: absolute; top: 0 }';\n\tstyle.innerHTML += ' .js_slide { text-align: center; position: relative; max-height: 380px; }';\n\tstyle.innerHTML += ' .js_slide img { max-height: 380px; width: auto !important; margin: 0 auto }';\n\tstyle.innerHTML += ' .js_slide.static_slide { display: none }';\n\tstyle.innerHTML += ' .js_slide.static_slide.active { display: block }';\n\n\tdocument.head.appendChild(style);\n})();\n// This is the class that will be used in the mobile\n//{selector:selector, items:items, layout:layout, speed:speed}\nbuildfire.components.carousel.view = function (options) {\n\tlet self = this;\n\tthis.config = this.mergeSettings(options);\n\tthis._initDimensions(self.config.layout);\n\tthis.selector = typeof this.config.selector === 'string' ? document.querySelector(this.config.selector) : this.config.selector;\n\tif (options.items && options.items.length > 0) {\n\t\tthis._applyConfigurations(options, (err, result) => {\n\t\t\tif (options.items.length > 1 && result.shouldInitializeLory) { // loryCarousel\n\t\t\t\tself.init();\n\t\t\t} else {\n\t\t\t\tself._handleStaticSlides(options.items);\n\t\t\t}\n\t\t});\n\t\tif (options.selector) {\n\t\t\toptions.selector.style.display = '';\n\t\t} else {\n\t\t\tconsole.error('Selector element should be provided');\n\t\t}\n\t\t\n\t} else {\n\t\tif (options.selector) {\n\t\t\toptions.selector.style.display = 'none';\n\t\t} else {\n\t\t\tconsole.error('Selector element should be provided');\n\t\t}\n\t}\n};\nbuildfire.components.carousel.view.lastCarouselTimer = null;\n// Carousel view methods\nbuildfire.components.carousel.view.prototype = {\n\tlastImage: null,\n    _applyConfigurations: function(options, callback) {\n\t\tlet self = this;\n\t\tlet { items, autoInterval, order, display } = options;\n\t\tif (buildfire.components.carousel.view.lastCarouselTimer) {\n\t\t\tclearInterval(buildfire.components.carousel.view.lastCarouselTimer);\n\t\t\tbuildfire.components.carousel.view.lastCarouselTimer = null;\n\t\t}\n\t\tlet isHome = buildfire.getFrameType() == 'LAUNCHER_PLUGIN';\n\t\tlet storagePlace = (isHome) ? \"carouselLastImageHome\" : \"carouselLastImage\";\n\t\tif (order == 0 && display == 1 && items.length > 1) {\n\t\t\tbuildfire.localStorage.getItem(storagePlace, function(err, res) {\n\t\t\t\tlet images = items;\n\t\t\t\tlet sendIndex = 0;\n\t\t\t\tlet item = null;\n\t\t\t\tif (res == null) {\n\t\t\t\t\titem = items[0];\n\t\t\t\t} else {\n\t\t\t\t\tlet index = Number(res);\n\t\t\t\t\tif (index == -1 || index == items.length - 1) item = items[0];\n\t\t\t\t\telse {item = items[index + 1]; sendIndex = index + 1;}\n\t\t\t\t}\n\t\t\t\tself.lastImage = item;\n\t\t\t\tbuildfire.localStorage.setItem(storagePlace, sendIndex, function(e, r) {\n\t\t\t\t\tif (autoInterval != 0) buildfire.components.carousel.view.lastCarouselTimer = setInterval(self._changeImage.bind(self), self.config.autoInterval, images, false);\n\t\t\t\t});\n\t\t\t\tcallback(null, {shouldInitializeLory: false});\n\t\t\t});\n\t\t} else if (order == 1 && display == 1 && items.length > 1) {\n\t\t\tif (autoInterval != 0) {\n\t\t\t\tbuildfire.components.carousel.view.lastCarouselTimer = setInterval(this._changeImage.bind(this), this.config.autoInterval, items, true);\n\t\t\t}\n\t\t\titem = items[Math.floor(Math.random() * items.length)];\n\t\t\tthis.lastImage = item;\n\t\t\tbuildfire.localStorage.removeItem(storagePlace);\n\t\t\tcallback(null, {shouldInitializeLory: false});\n\t\t} else if (order == 1 && display == 0 && items.length > 1) {\n\t\t\tthis._randomizeArray(items);\n\t\t\tbuildfire.localStorage.removeItem(storagePlace);\n\t\t\tcallback(null, {shouldInitializeLory: true});\n\t\t} else {\n\t\t\tcallback(null, {shouldInitializeLory: true});\n\t\t}\n\t},\n\t_randomizeArray: function (images) {\n        this._shuffle(images, null, null);\n        let imagesCopy = Array.from(images);\n        this._shuffle(imagesCopy, null, images[images.length -  1]);\n        images.push(...imagesCopy);\n        this._shuffle(imagesCopy, images[0], images[images.length - 1]);\n        images.push(...imagesCopy);\n    },\n\t_shuffle: function (images, first, last) {\n        let j, x, i;\n        for (i = images.length - 1; i > 0; i--) {\n            j = Math.floor(Math.random() * (i + 1));\n            x = images[i];\n            images[i] = images[j];\n            images[j] = x;\n        }\n        if (last == images[0] || first == images[images.length - 1]) return this._shuffle(images, first, last);\n        else return images;\n    },\n\t_changeImage: function (carouselImages, random) {\n        let self = this;\n\t\tlet carouselImage = null;\n        if (random) {\n                this._handleStaticSlides(carouselImages, true);\n        } else {\n            let index = carouselImages.indexOf(this.lastImage);\n            let sendIndex = 0;\n            if (index == -1 || index == carouselImages.length - 1) {\n\t\t\t\tcarouselImage = carouselImages[0];\n\t\t\t} else {\n\t\t\t\tcarouselImage = carouselImages[index + 1]; \n\t\t\t\tsendIndex = index + 1;\n\t\t\t}\n            this.lastImage = carouselImage;\n            let isHome = buildfire.getFrameType() == 'LAUNCHER_PLUGIN';\n            let storagePlace = (isHome) ? \"carouselLastImageHome\" : \"carouselLastImage\";\n            buildfire.localStorage.setItem(storagePlace, sendIndex, function(e, r) {\n                self._handleStaticSlides(carouselImages);\n            });\n        }\n    },\n\t_handleStaticSlides: function(carouselImages, random) {\n\t\tlet staticSlides = document.querySelectorAll('.static_slide');\n\t\tif (staticSlides.length) {\n\t\t\tthis._changeStaticSlides(carouselImages, random);\n\t\t} else {\n\t\t\tthis._renderStaticSlides(carouselImages);\n\t\t}\n\t},\n\t_changeStaticSlides: function (carouselImages, random) {\n\t\tlet activeSlide = document.querySelector('.js_slide.static_slide.active');\n\t\tlet siblingSlide = activeSlide.nextSibling;\n\t\tif (random) {\n\t\t\tlet nextSlide = document.querySelectorAll('.js_slide.static_slide')[Math.floor(Math.random() * carouselImages.length)];\n\t\t\tif (nextSlide.children[0].src == activeSlide.children[0].src) {\n\t\t\t\tthis._handleStaticSlides(carouselImages, true);\n\t\t\t} else {\n\t\t\t\tactiveSlide.classList.remove('active');\n\t\t\t\tnextSlide.classList.add('active');\n\t\t\t}\n\t\t} else {\n\t\t\tactiveSlide.classList.remove('active');\n\t\t\tif (siblingSlide) {\n\t\t\t\tsiblingSlide.classList.add('active');\n\t\t\t} else {\n\t\t\t\tdocument.querySelector('.js_slide.static_slide').classList.add('active');\n\t\t\t}\n\t\t}\n\t},\n\t_renderStaticSlides: function (carouselImages) {\n\t\tlet self = this;\n\t\tthis.selector.innerHTML = '';\n\t\tcarouselImages.forEach((carouselImage, index) => {\n\t\t\tlet slide = document.createElement('div');\n\t\t\tslide.classList.add('js_slide', 'static_slide');\n\t\t\tif (index == 0 && !self.lastImage) {\n\t\t\t\tslide.classList.add('active');\n\t\t\t} else if (self.lastImage && self.lastImage.iconUrl == carouselImage.iconUrl) {\n\t\t\t\tslide.classList.add('active');\n\t\t\t}\n\t\t\tslide.addEventListener('click', function () {\n\t\t\t\tbuildfire.actionItems.execute(item, function (err, result) {\n\t\t\t\t\tif (err) {\n\t\t\t\t\t\tconsole.warn('Error opening slider action: ', err);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\n\t\t\tlet options = {\n\t\t\t\titem: carouselImage,\n\t\t\t\tslide: slide\n\t\t\t}\n\t\t\tself._cropImage(options, (err, result) => {\n\t\t\t\tif (err)  console.error('Error occurred while cropping image: ', err);\n\t\t\t\tself.selector.appendChild(slide);\n\t\t\t});\n\t\t});\n\t\tlet activeSlide = document.querySelector('.js_slide.static_slide.active');\n\t\tif (!activeSlide) {\n\t\t\tdocument.querySelector('.js_slide.static_slide').classList.add('active');\n\t\t}\n\t},\n\tmergeSettings: function (options) {\n\t\tvar settings = {\n\t\t\tselector: '.js_percentage',\n\t\t\titems: [],\n\t\t\tlayout: null,\n\t\t\tspeed: 200,\n\t\t\tloop: true,\n\t\t\tautoInterval: 5 * 1000,\n\t\t\tdisplay: 0,\n\t\t\torder: 0\n\t\t};\n\t\tvar userSettings = options;\n\t\tfor (var attrName in userSettings) {\n\t\t\tsettings[attrName] = userSettings[attrName];\n\t\t}\n\t\treturn settings;\n\t},\n\tinit: function () {\n\t\tif (!this.selector) {\n\t\t\tthrow ('selector not found');\n\t\t\treturn;\n\t\t}\n\t\t// Add min-height to carousel to prevent it from pushing content down\n\t\tthis.selector.style['min-height'] = this._minHeight;\n\n\t\tvar self = this;\n\n\t\tfunction validateLauncherCarousel() {\n\t\t\tbuildfire.getContext(function (err, result) {\n\t\t\t\tif (result && result.device && result.device.platform && result.device.platform.toLowerCase() == 'ios' && buildfire.getFrameType() == 'LAUNCHER_PLUGIN') {\n\t\t\t\t\tbuildfire.navigation.onAppLauncherActive(function () {\n\t\t\t\t\t\tself._applySlider();\n\t\t\t\t\t}, true);\n\t\t\t\t\tbuildfire.navigation.onAppLauncherInactive(function () {\n\t\t\t\t\t\tself._destroySlider();\n\t\t\t\t\t}, true);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\tif (this.config.items && this.config.items.length > 0) {\n\t\t\tthis._renderHTMLItems(function () {\n\t\t\t\tself._applySlider();\n\t\t\t\tvalidateLauncherCarousel();\n\t\t\t});\n\t\t} else {\n\t\t\tself._applySlider();\n\t\t\tvalidateLauncherCarousel();\n\t\t}\n\t},\n\t_destroySlider: function () {\n\t\tif (this.timerInterval) {\n\t\t\tclearInterval(this.timerInterval);\n\t\t\tthis.timerInterval = null;\n\t\t}\n\t},\n\t_applySlider: function () {\n\t\tif (!this.lorySlider) {\n\t\t\tthis.lorySlider = lory(this.config.selector, {\n\t\t\t\tclassNameSlideContainer: this.config.classNameSlideContainer || 'js_slides',\n\t\t\t\tclassNameFrame: this.config.classNameFrame || 'js_frame',\n\t\t\t\tease: 'ease',\n\t\t\t\trewindSpeed: 600,//ms\n\t\t\t\tslideSpeed: this.config.speed,//ms\n\t\t\t\tslidesToScroll: this.config.slidesToScroll || 1,\n\t\t\t\tinfinite: this.config.infinite || 1,\n\t\t\t\tenableMouseEvents: true\n\t\t\t});\n\t\t}\n\n\t\tif (this.config.loop && this.config.items && this.config.items.length > 1) {\n\t\t\tvar self = this;\n\n\t\t\tif (this.timerInterval) {\n\t\t\t\tclearInterval(this.timerInterval);\n\t\t\t\tthis.timerInterval = null;\n\t\t\t}\n\n\t\t\tthis.timerInterval = setInterval(function () {\n\t\t\t\tself.lorySlider.next();\n\t\t\t}, this.config.autoInterval);\n\t\t}\n\t},\n\t_renderHTMLItems: function (callback) {\n\t\tvar self = this;\n\n\t\twhile (this.selector.firstChild) {\n\t\t\tthis.selector.removeChild(this.selector.firstChild);\n\t\t}\n\n\t\tthis.sliderFrame = document.createElement('div');\n\t\t['loryFrame', 'js_frame'].forEach(function (cname) {\n\t\t\tself.sliderFrame.classList.add(cname);\n\t\t});\n\n\t\tthis.slideContainer = document.createElement('ul');\n\t\t['lorySlides', 'js_slides'].forEach(function (cname) {\n\t\t\tself.slideContainer.classList.add(cname);\n\t\t});\n\n\t\tthis._loadImages(this.config.items, function () {\n\t\t\t['slider', 'js_percentage', 'loryPercentage'].forEach(function (cname) {\n\t\t\t\tself.selector.classList.add(cname);\n\t\t\t});\n\n\t\t\tself.sliderFrame.appendChild(self.slideContainer);\n\t\t\tself.selector.appendChild(self.sliderFrame);\n\n\t\t\tcallback();\n\t\t});\n\t},\n\t_loadImages: function (items, callback) {\n\t\tvar self = this;\n\n\t\tvar itemsLength = items.length;\n\t\tvar pending = itemsLength;\n\n\t\tif (itemsLength == 0) {\n\t\t\tcallback();\n\t\t}\n\n\t\tfor (var i = 0; i < itemsLength; i++) {\n\t\t\tthis._appendItem(items[i], function (itemSlide) {\n\t\t\t\tpending--;\n\t\t\t\tself.slideContainer.appendChild(itemSlide);\n\n\t\t\t\tif (pending == 0) {\n\t\t\t\t\tcallback();\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t},\n\t_appendItem: function (item, callback) {\n\t\tlet slide = document.createElement('li');\n\t\tslide.classList.add('js_slide');\n\n\t\tslide.addEventListener('click', function () {\n\t\t\tbuildfire.actionItems.execute(item, function (err, result) {\n\t\t\t\tif (err) {\n\t\t\t\t\tconsole.warn('Error opening slider action: ', err);\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\n\t\tlet options = { item, slide }\n\t\tthis._cropImage(options, (err, result) => {\n\t\t\tif (err)  console.error('Error occurred while cropping image: ', err);\n\t\t\tcallback(slide);\n\t\t});\n\t},\n\t// allows you to append a single item or an array of items\n\tappend: function (items) {\n\t\tif (!items)\n\t\t\treturn;\n\t\telse if (!(items instanceof Array) && typeof(items) == 'object')\n\t\t\titems = [items];\n\n\t\tif (items && items instanceof Array && items.length) {\n\t\t\tfor (var i = 0; i < items.length; i++) {\n\t\t\t\tthis.config.items.push(items[i]);\n\t\t\t}\n\t\t\tvar self = this;\n\t\t\tif (this.config.display == 0 && this.config.items.length > 1) {\n\t\t\t\tself.slideContainer.innerHTML = '';\n\t\t\t\tthis._loadImages(this.config.items, function () {\n\t\t\t\t\tself.lorySlider.setup();\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tthis._renderStaticSlides(this.config.items);\n\t\t\t}\n\t\t}\n\t},\n\tloadItems: function (items, appendItems) {\n\t\tif (appendItems) {\n\t\t\tthis.append(items);\n\t\t} else {\n\t\t\tlet self = this;\n\t\t\tthis.config.items = items;\n\t\t\tif (this.config.display == 0 && items.length > 1) {\n\t\t\t\tif (this.config.order == 1) {\n\t\t\t\t\tthis._randomizeArray(items);\n\t\t\t\t}\n\t\t\t\tthis.slideContainer.innerHTML = '';\n\t\t\t\tthis._loadImages(items, function () {\n\t\t\t\t\tself.lorySlider.setup();\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tif (buildfire.components.carousel.view.lastCarouselTimer) {\n\t\t\t\t\tclearInterval(buildfire.components.carousel.view.lastCarouselTimer);\n\t\t\t\t\tbuildfire.components.carousel.view.lastCarouselTimer = null;\n\t\t\t\t}\n\t\t\t\tthis._renderStaticSlides(items);\n\t\t\t\tbuildfire.components.carousel.view.lastCarouselTimer = setInterval(this._changeImage.bind(this), this.config.autoInterval, items, this.config.order);\n\t\t\t}\n\t\t}\n\t},\n\t_initDimensions: function (layout) {\n\t\tthis.width = window.innerWidth;\n\t\tlayout = layout || 'WideScreen';\n\t\tif (layout == 'WideScreen') {\n\t\t\tthis.height = Math.ceil(9 * this.width / 16);\n\t\t\tthis.aspect = '16:9';\n\t\t} else if (layout == 'Square') {\n\t\t\tthis.height = this.width;\n\t\t\tthis.aspect = '1:1';\n\t\t} else if (layout == 'Cinema') {\n\t\t\tthis.height = Math.ceil(1 * this.width / 2.39);\n\t\t\tthis.aspect = '2.39:1';\n\t\t} else if (layout == 'MobileScreen') {\n\t\t\tthis.height = (window.innerHeight / this.width) * this.width;\n\t\t\tthis.aspect = '9:16';\n\t\t}\n\n\t\tthis.cssWidth = this.width + 'px';\n\t\tif (this.height > 380) {\n\t\t\tthis.cssHeight = '380px';\n\t\t} else {\n\t\t\tthis.cssHeight = this.height + 'px';\n\t\t}\n\n\t\t// Set Min height on carousel so doesn't push content down on load.\n\t\tthis._minHeight = this.cssHeight;\n\t},\n\t_cropImage: function(options, callback) {\n\t\tlet self = this;\n\t\tlet { item, slide } = options;\n\t\tbuildfire.imageLib.local.cropImage(item.iconUrl, {\n\t\t\twidth: this.width,\n\t\t\theight: this.height,\n\t\t\taspect: this.aspect,\n\t\t\tsize: 'full_width',\n\t\t}, function (err, result) {\n\t\t\tif (!err) {\n\t\t\t\tlet image = document.createElement('img');\n\t\t\t\tlet backgroundImage = document.createElement('img');\n\t\t\t\timage.src = backgroundImage.src = result;\n\t\t\t\timage.alt = backgroundImage.alt = item.title || '';\n\t\t\t\tbackgroundImage.className = 'blurred-background-image';\n\t\t\t\tbackgroundImage.setAttribute('style', `width: 100% !important; transform: scale(1.2) !important;`);\n\t\t\t\tslide.style.overflow = 'hidden';\n\t\t\t\timage.style.transform = 'translateZ(0)';\n\t\t\t\tif (self.height > 380) {\n\t\t\t\t\tslide.appendChild(backgroundImage);\n\t\t\t\t}\n\t\t\t\tslide.appendChild(image);\n\t\t\t\tcallback(null, result);\n\t\t\t} else {\n\t\t\t\tcallback(err, null);\n\t\t\t}\n\t\t});\n\t}\n};\n"]}