{"version":3,"sources":["../sdk/scripts/buildfire/components/carouselLight/carouselLight.js"],"names":["buildfire","components","carousel","scripts","document","getElementsByTagName","carouselScriptSrc","i","length","src","toLowerCase","indexOf","lory","write","style","getElementById","head","removeChild","createElement","id","innerHTML","appendChild","view","options","img","items","this","config","mergeSettings","_initDimensions","layout","init","selector","setAttribute","imageLib","cropImage","iconUrl","size","aspect","width","window","innerWidth","height","Math","ceil","alt","title","addEventListener","actionItems","execute","err","result","console","warn","display","prototype","attrname","settings","speed","loop","autoInterval","userSttings","querySelector","self","validateLauncherCarousel","getContext","device","platform","getFrameType","navigation","onAppLauncherActive","_applySlider","onAppLauncherInactive","_destroySlider","_renderHTMLItems","timerInterval","clearInterval","lorySlider","classNameSlideContainer","classNameFrame","ease","rewindSpeed","slideSpeed","slidesToScroll","infinite","enableMouseEvents","setInterval","next","callback","firstChild","sliderFrame","forEach","cname","classList","add","slideContainer","_loadImages","itemsLength","pending","_appendItem","itemSlide","item","slide","local","log","image","append","Array","push","innerHeight","cssWidth","cssHeight","_minHeight"],"mappings":"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","file":"carouselLight.min.js","sourcesContent":["'use strict';\n\nif (typeof (buildfire) == 'undefined') throw ('please add buildfire.js first to use carousel components');\n\nif (typeof (buildfire.components) == 'undefined')\n\tbuildfire.components = {};\n\nif (typeof (buildfire.components.carousel) == 'undefined')\n\tbuildfire.components.carousel = {};\n\n(function () {\n\tvar scripts = document.getElementsByTagName('script');\n\tvar carouselScriptSrc = null;\n\n\tfor (var i = 0; i < scripts.length; i++) {\n\t\tif (scripts[i].src && (scripts[i].src.toLowerCase().indexOf('buildfire/components/carousellight/carousellight.js') || scripts[i].src.toLowerCase().indexOf('buildfire/components/carousellight/carousellight.min.js'))) {\n\t\t\tcarouselScriptSrc = scripts[i].src;\n\t\t}\n\t}\n\n\tif (carouselScriptSrc) {\n\t\tif (typeof lory == 'undefined') {\n\t\t\tdocument.write('<script src=\"' + carouselScriptSrc + '/../../../../lory/lory.min.js\"></script>');\n\t\t}\n\n\t\t//Add Lory CSS\n\t\tvar style = document.getElementById('loryInjectedStyle');\n\t\tif (style) document.head.removeChild(style);\n\n\t\tstyle = document.createElement('style');\n\t\tstyle.id = 'loryInjectedStyle';\n\t\tstyle.innerHTML += ' .loryFrame {position: relative;font-size: 0; line-height: 0; overflow: hidden; white-space: nowrap;}';\n\t\tstyle.innerHTML += ' .loryFrame li { position: relative; display: inline-block; height: 100%;}';\n\t\tstyle.innerHTML += ' .lorySlides { display: inline-block;}';\n\t\tstyle.innerHTML += ' .loryPercentage .lorySlides { display: block; padding: 0px;}';\n\t\tstyle.innerHTML += ' .loryPercentage li {  width: 100%;}';\n\n\t\tif (style.innerHTML.length > 0)\n\t\t\tdocument.head.appendChild(style);\n\t\t//# Add Lory CSS\n\t}\n\telse {\n\t\tthrow ('carousellight components not found');\n\t}\n})();\n\n// This is the class that will be used in the mobile\n//{selector:selector, items:items, layout:layout, speed:speed}\nbuildfire.components.carousel.view = function (options) {\n\tif ( options.items && options.items.length > 0) {\n\t\t/*\n         if more than one image add carousel else add image directly to the carousel container\n         */\n\t\tif (options.items.length > 1) {\n\t\t\tthis.config = this.mergeSettings(options);\n\t\t\tthis._initDimensions(this.config.layout);\n\t\t\tthis.init();\n\t\t} else {\n\t\t\t//add image directly to carousel container without adding the carousel lib\n\t\t\toptions.selector.innerHTML = '';\n\t\t\t//append image tag\n\t\t\tvar img = document.createElement('img');\n\t\t\timg.setAttribute('src', buildfire.imageLib.cropImage(options.items[0].iconUrl, {\n\t\t\t\tsize: 'full_width',\n\t\t\t\taspect: '16:9',\n\t\t\t\twidth: window.innerWidth,\n\t\t\t\theight: Math.ceil(9 * (window.innerWidth) / 16)\n\t\t\t}));\n\t\t\timg.alt = options.items[0].title;\n\t\t\toptions.selector.appendChild(img);\n\t\t\timg.addEventListener('click', function () {\n\t\t\t\tbuildfire.actionItems.execute(options.items[0], function (err, result) {\n\t\t\t\t\tif (err) {\n\t\t\t\t\t\tconsole.warn('Error openning slider action: ', err);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\t\toptions.selector.style.display='';\n\t} else {\n\t\toptions.selector.style.display='none';\n\t}\n\n};\n\n// Carousel view methods\nbuildfire.components.carousel.view.prototype = {\n\tmergeSettings: function (options) {\n\t\tvar settings = {\n\t\t\tselector: '.js_percentage',\n\t\t\titems: [],\n\t\t\tlayout: null,\n\t\t\tspeed: 200,\n\t\t\tloop: true,\n\t\t\tautoInterval: 5 * 1000\n\t\t};\n\t\tvar userSttings = options;\n\t\tfor (var attrname in userSttings) {\n\t\t\tsettings[attrname] = userSttings[attrname];\n\t\t}\n\t\treturn settings;\n\t},\n\tinit: function () {\n\t\tthis.selector = typeof this.config.selector === 'string' ? document.querySelector(this.config.selector) : this.config.selector;\n\n\t\tif (!this.selector) {\n\t\t\tthrow ('selecter not found');\n\t\t\treturn;\n\t\t}\n\n\t\tvar self = this;\n\n\t\tfunction validateLauncherCarousel() {\n\t\t\tbuildfire.getContext(function (err, result) {\n\t\t\t\tif (result && result.device && result.device.platform && result.device.platform.toLowerCase() == 'ios' && buildfire.getFrameType() == 'LAUNCHER_PLUGIN') {\n\t\t\t\t\tbuildfire.navigation.onAppLauncherActive(function () {\n\t\t\t\t\t\tself._applySlider();\n\t\t\t\t\t}, true);\n\t\t\t\t\tbuildfire.navigation.onAppLauncherInactive(function () {\n\t\t\t\t\t\tself._destroySlider();\n\t\t\t\t\t}, true);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\tif (this.config.items && this.config.items.length > 0) {\n\t\t\tthis._renderHTMLItems(function () {\n\t\t\t\tself._applySlider();\n\t\t\t\tvalidateLauncherCarousel();\n\t\t\t});\n\t\t} else {\n\t\t\tself._applySlider();\n\t\t\tvalidateLauncherCarousel();\n\t\t}\n\t},\n\t_destroySlider: function () {\n\t\tif (this.timerInterval) {\n\t\t\tclearInterval(this.timerInterval);\n\t\t\tthis.timerInterval = null;\n\t\t}\n\t},\n\t_applySlider: function () {\n\t\tif (!this.lorySlider) {\n\t\t\tthis.lorySlider = lory(this.config.selector, {\n\t\t\t\tclassNameSlideContainer: this.config.classNameSlideContainer || 'js_slides',\n\t\t\t\tclassNameFrame: this.config.classNameFrame || 'js_frame',\n\t\t\t\tease: 'ease',\n\t\t\t\trewindSpeed: 600,//ms\n\t\t\t\tslideSpeed: this.config.speed,//ms\n\t\t\t\tslidesToScroll: this.config.slidesToScroll || 1,\n\t\t\t\tinfinite: this.config.infinite || 1,\n\t\t\t\tenableMouseEvents: true\n\t\t\t});\n\t\t}\n\n\t\tif (this.config.loop && this.config.items && this.config.items.length > 1) {\n\t\t\tvar self = this;\n\n\t\t\tif (this.timerInterval) {\n\t\t\t\tclearInterval(this.timerInterval);\n\t\t\t\tthis.timerInterval = null;\n\t\t\t}\n\n\t\t\tthis.timerInterval = setInterval(function () {\n\t\t\t\tself.lorySlider.next();\n\t\t\t}, this.config.autoInterval);\n\t\t}\n\t},\n\t_renderHTMLItems: function (callback) {\n\t\tvar self = this;\n\n\t\twhile (this.selector.firstChild) {\n\t\t\tthis.selector.removeChild(this.selector.firstChild);\n\t\t}\n\n\t\tthis.sliderFrame = document.createElement('div');\n\t\t['loryFrame', 'js_frame'].forEach(function (cname) {\n\t\t\tself.sliderFrame.classList.add(cname);\n\t\t});\n\n\t\tthis.slideContainer = document.createElement('ul');\n\t\t['lorySlides', 'js_slides'].forEach(function (cname) {\n\t\t\tself.slideContainer.classList.add(cname);\n\t\t});\n\n\t\tthis._loadImages(this.config.items, function () {\n\t\t\t['slider', 'js_percentage', 'loryPercentage'].forEach(function (cname) {\n\t\t\t\tself.selector.classList.add(cname);\n\t\t\t});\n\n\t\t\tself.sliderFrame.appendChild(self.slideContainer);\n\t\t\tself.selector.appendChild(self.sliderFrame);\n\n\t\t\tcallback();\n\t\t});\n\t},\n\t_loadImages: function (items, callback) {\n\t\tvar self = this;\n\n\t\tvar itemsLength = items.length;\n\t\tvar pending = itemsLength;\n\n\t\tif (itemsLength == 0) {\n\t\t\tcallback();\n\t\t}\n\n\t\tfor (var i = 0; i < itemsLength; i++) {\n\t\t\tthis._appendItem(items[i], function (itemSlide) {\n\t\t\t\tpending--;\n\t\t\t\tself.slideContainer.appendChild(itemSlide);\n\n\t\t\t\tif (pending == 0) {\n\t\t\t\t\tcallback();\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t},\n\t_appendItem: function (item, callback) {\n\t\tvar slide = document.createElement('li');\n\t\tslide.classList.add('js_slide');\n\n\t\tslide.addEventListener('click', function () {\n\t\t\tbuildfire.actionItems.execute(item, function (err, result) {\n\t\t\t\tif (err) {\n\t\t\t\t\tconsole.warn('Error openning slider action: ', err);\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\n\t\tbuildfire.imageLib.local.cropImage(item.iconUrl, {\n\t\t\taspect: this.aspect,\n\t\t\tsize: 'full_width',\n\t\t\twidth: this.width,\n\t\t\theight: this.height\n\t\t}, function (err, result) {\n\t\t\tif (!err) {\n\t\t\t\tvar image = document.createElement('img');\n\t\t\t\timage.src = result;\n\t\t\t\timage.alt = item.title || '';\n\t\t\t\tslide.appendChild(image);\n\t\t\t}\n\t\t\telse\n\t\t\t\tconsole.log('Error occurred while cropping image: ', err);\n\n\t\t\tcallback(slide);\n\t\t});\n\t},\n\t// allows you to append a single item or an array of items\n\tappend: function (items) {\n\t\tif (!items)\n\t\t\treturn;\n\t\telse if (!(items instanceof Array) && typeof(items) == 'object')\n\t\t\titems = [items];\n\n\t\tif (items && items instanceof Array && items.length) {\n\t\t\tfor (var i = 0; i < items.length; i++) {\n\t\t\t\tthis.items.push(items[i]);\n\t\t\t}\n\n\t\t\tvar self = this;\n\t\t\tthis._loadImages(items, function () {\n\t\t\t\tself._applySlider();\n\t\t\t});\n\t\t}\n\t},\n\t_initDimensions: function (layout) {\n\t\tthis.width = window.innerWidth;\n\t\tlayout = layout || 'WideScreen';\n\t\tif (layout == 'WideScreen') {\n\t\t\tthis.height = Math.ceil(9 * this.width / 16);\n\t\t\tthis.aspect = '16:9';\n\t\t} else if (layout == 'Square') {\n\t\t\tthis.height = this.width;\n\t\t\tthis.aspect = '1:1';\n\t\t} else if (layout == 'Cinema') {\n\t\t\tthis.height = Math.ceil(1 * this.width / 2.39);\n\t\t\tthis.aspect = '2.39:1';\n\t\t} else if (layout == 'MobileScreen') {\n\t\t\tthis.height = (window.innerHeight / this.width) * this.width;\n\t\t\tthis.width = this.width;\n\t\t\tthis.aspect = '9:16';\n\t\t}\n\n\t\tthis.cssWidth = this.width + 'px';\n\t\tif (this.height > 380) {\n\t\t\tthis.cssHeight = '380px';\n\t\t} else {\n\t\t\tthis.cssHeight = this.height + 'px';\n\t\t}\n\n\t\t// Set Min height on carousel so doesn't push content down on load.\n\t\tthis._minHeight = '180px';\n\t\tthis._minHeight = this.cssHeight;\n\t}\n};\n"]}