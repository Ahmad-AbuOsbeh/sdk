if("undefined"==typeof buildfire)throw"please add buildfire.js first to use buildfire components";void 0===buildfire.components&&(buildfire.components={}),void 0===buildfire.components.control&&(buildfire.components.control={}),"undefined"==typeof Tagify&&(document.write('<script src="../../../scripts/tagify/tagify.min.js"></script>'),document.write('<script src="../../../scripts/tagify/tagify.polyfills.min.js"></script>')),buildfire.components.control.tagsInput=class t{constructor(t,e={}){this._readyToFireEvent=!0,this._tagifyTags=null,this.activeTags=[],this.container=null,this.selector=t||null;let s=e.settings?.source?e.settings.source:[],i="list";if("function"==typeof s)i="custom";else for(let n=0;n<s.length;n++)if(!this._validateSource(s[n]))throw Error("Invalid source, missing value");this.settings={source:s,sourceType:i,allowAutoComplete:void 0===e.settings?.allowAutoComplete||e.settings.allowAutoComplete,allowUserInput:void 0===e.settings?.allowUserInput||e.settings.allowUserInput},this.languageSettings={placeholder:e.languageSettings?.placeholder||"Select Tags"},this._init()}_validateSource(t){return!!t&&!!t.value&&"string"==typeof t.value}_init(){let t=document.querySelector(this.selector);if(t)this.container=t,this._buildComponent();else throw Error("Element not found!")}_tagify(t){let e={whitelist:"list"===this.settings.sourceType?this.settings.source:[],autoComplete:{enabled:this.settings.allowAutoComplete,rightKey:this.settings.allowAutoComplete},enforceWhitelist:!1,userInput:this.settings.allowUserInput};this._tagifyTags=new Tagify(t,e),this._tagifyTags.on("remove",()=>this._onAddRemoveTag()),this._tagifyTags.on("change",()=>this._onAddRemoveTag())}_buildComponent(){if("list"===this.settings.sourceType)this.container.innerHTML=`<input type="text" class="form-control" placeholder="${this.languageSettings.placeholder}" >`;else{this.container.innerHTML=`
            <div class="input-group">
                <input type="text" class="form-control tagify_input_hide_courser" placeholder="${this.languageSettings.placeholder}" >
                <span class="input-group-addon icon icon-plus add_tagBtn"></span>
            </div>`;this.container.querySelector("span").addEventListener("click",()=>{this.settings.source({},t=>{this.set(t)})})}let t=this.container.querySelector("input");this._tagify(t)}_onAddRemoveTag(){this.activeTags=this._tagifyTags.value.length?this._tagifyTags.value.map(t=>t):[],this._readyToFireEvent&&this.onUpdate({tags:this.activeTags})}append(t){let e=[];if(t&&Array.isArray(t))for(let s=0;s<t.length;s++)if(this._validateSource(t[s]))e.push(t[s]);else throw Error("Invalid data, missing value");else if(this._validateSource(t))e.push(t);else throw Error("Invalid data, missing value");for(let i=0;i<e.length;i++)this.activeTags.push(e[i]);this._tagifyTags.addTags(e)}clear(){this.activeTags=[],this._tagifyTags.removeAllTags()}set(t){this._readyToFireEvent=!1,this.activeTags=[],this._tagifyTags.removeAllTags(),this._readyToFireEvent=!0,this.append(t)}get(){return this.activeTags}onUpdate(t){throw Error("function not implemented")}},buildfire.components.control.userTagsInput=class t extends buildfire.components.control.tagsInput{constructor(t,e={}){super(t,{settings:{source:(t,e)=>{buildfire.auth.showTagsSearchDialog(null,(t,s)=>{if(t)return console.error(t);if(s){let i=[...s,...this.get()];i=i.map(t=>({...t,value:t.tagName}));for(let n=0;n<i.length;n++)for(let o=n+1;o<i.length;o++)i[n].value===i[o].value&&(i.splice(o,1),o-=1);e(i)}})},allowAutoComplete:!1,allowUserInput:!1},languageSettings:e.languageSettings})}};