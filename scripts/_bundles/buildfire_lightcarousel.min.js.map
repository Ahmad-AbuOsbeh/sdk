/**
 * Minified Bundle for buildfire.js & lory.min.js & carouselLight.js
 */

{"version":3,"sources":["../sdk/scripts/buildfire.js","../sdk/scripts/lory/lory.min.js","../sdk/scripts/buildfire/components/carouselLight/carouselLight.js"],"names":["Packet","id","cmd","data","this","Date","toISOString","Math","random","instanceId","buildfire","isFileServer","url","indexOf","isWeb","callback","isWebFromContext","context","device","platform","toLowerCase","console","error","window","location","protocol","getContext","err","callbackContext","warn","ratingSystem","inject","head","script","components","document","link","createElement","rel","type","href","appendChild","injectRatings","includes","replace","scripts","getElementsByTagName","i","length","src","hasScript","onreadystatechange","onload","logger","attachRemoteLogger","tag","buildFireAppDebuggerScript","getElementById","header","parentElement","removeChild","prompt","querySelector","_callbacks","parseQueryString","str","vars","search","substring","split","obj","Object","pair","decodeURIComponent","index","key","value","options","parseMetaOptions","tags","content","forEach","section","s","eventManager","events","add","event","handler","allowMultipleHandlers","clear","push","eh","splice","trigger","e","_context","init","removeEventListener","_postMessageHandler","addEventListener","appearance","insertHTMLAttributes","attachCSSFiles","localStorage","overrideNativeLocalStorage","wysiwyg","extend","_whitelistedCommands","source","packet","JSON","parse","sequence","parent","apply","_sendPacket","result","timeout","command","resendAttempts","isDataStoreRetry","isGetContextRetry","setTimeout","log","d","clearTimeout","fid","_parentPost","angular","sanitize","p","$$hashKey","postMessage","parsedQuerystring","appcontext","navigation","navigateTo","pluginData","pluginTypeId","pluginId","title","folderName","queryString","navigateToSocialWall","wid","wallUserIds","sort","reverse","join","predefinedPluginIds","community","premium_social","social","orderedPluginIds","pluginTypeOrder","orderIndex","navigate","cb","status","navigateHome","scrollTop","openWindow","target","action","openIn","info","_goBackOne","onBackButtonClick","restoreBackButtonClick","goBack","makeSafeLinks","element","t","anchors","querySelectorAll","setAttribute","evt","preventDefault","navigateEmulator","onAppLauncherActive","onAppLauncherInactive","triggerOnAppLauncherActive","triggerOnAppLauncherInactive","onPluginOpened","triggerOnPluginOpened","getBackNavigationInstanceId","qs","backnavigationinstance","navigateToTab","getFrameType","PLUGIN_STRING_ENUM","PLUGIN_TYPE_ENUM","ready","_defaultTheme","appName","colors","backgroundColor","bodyText","dangerTheme","defaultTheme","footerMenuBackgroundColor","footerMenuIconColor","headerText","icons","infoTheme","primaryTheme","successTheme","titleBar","titleBarTextAndIcons","warningTheme","fontId","fontName","_setFontUrl","appTheme","isCustomFont","fontUrl","concat","endPoints","pluginRootHost","fontFolderPath","appId","encodeURIComponent","fontFileName","fontLastUpdatedOn","getAppTheme","getWidgetTheme","widgetTheme","_forceCSSRender","html","style","innerHTML","navigator","appVersion","nameOffset","ix","nAgt","userAgent","browserName","fullVersion","parseFloat","majorVersion","parseInt","os","verOffset","lastIndexOf","toUpperCase","isNaN","vendor","opera","match","maxTouchPoints","footerMenu","settings","turnOnFooterMenu","getCSSFiles","files","base","disableBootstrap","disableTheme","enableMDTheme","pathname","disableAppStyles","styleElement","applyMDTheme","css","fontFormat","theme","bfWidgetTheme","_getAppThemeCssVariables","body","onUpdate","_sharedStyle","write","disableFastClickOnLoad","attachFastClick","path","FastClick","attach","applyFastClick","attachAppThemeCSSFiles","liveMode","appHost","_attachAppThemeCSSFiles","CSSBusterCounter","attachLocalAppThemeCSSFiles","linkElement","_resizedTo","autosizeContainer","height","max","documentElement","clientHeight","scrollHeight","offsetHeight","setHeaderVisibility","triggerOnUpdate","appThemeCSSElement","titlebar","show","hide","navbar","sideMenu","open","close","fullScreenMode","enable","disable","analytics","trackAction","actionName","metadata","trackView","registerEvent","unregisterEvent","showReports","params","datastore","get","tagType","getWithDynamicData","withDynamicData","getById","save","insert","checkDuplicate","checkDuplicateType","bulkInsert","arrayObj","constructor","Array","code","message","update","searchAndUpdate","delete","filter","onRefresh","triggerOnRefresh","disableRefresh","userData","userToken","userTokenType","hasIndex","_buildfire","keys","filterKeys","validKeys","$text","$search","stringify","aggregate","publicData","appData","_isTagValid","isTagValid","imageLib","ENUMS","SIZES","xxs","xs","m","l","xl","xxl","720","1080","1440","full_width","findNearest","half_width","third_width","fourth_width","fifth_width","sixth_width","ratio","VALID_SIZES","size","innerWidth","ASPECT_RATIOS","1:1","4:3","16:9","9:16","11:5","4:1","2.39:1","VALID_RATIOS","showDialog","isProdImageServer","resizeImage","test","filetype","exec","width","disablePixelRation","disablePixelRatio","devicePixelRatio","innerHeight","hasQueryString","root","aspect","sizes","ratios","floor","_handleElement","cropImage","_getLocalPath","tagName","setProperty","removeProperty","onerror","_handleBgImage","applyStyle","img","Image","ele","localPath","requestAnimationFrame","string","extension","hash","charCodeAt","pluginHost","getCompression","c","local","_parser","localImageLibPath","parseFileFromUrl","sections","toLocalPath","localURL","canvas","ctx","drawImage","toDataURL","onLine","dim","offset","x","y","colorLib","onchange","packetData","_triggerOnChange","notifications","alert","buttonName","okButton","text","confirm","buttonLabels","confirmButton","cancelButton","beep","vibrate","dialog","confirmButtonText","actionButtonCallbacks","actionButtons","button","selectedButton","toast","actionButton","assign","actionClicked","bookmarks","_getParameterByName","name","results","RegExp","param","getAll","actionItems","actionItem","execute","list","create","iconUrl","history","label","onPop","triggerOnPop","pop","messaging","sendMessageToControl","sendMessageToWidget","onReceivedMessage","sendMessageToService","pluginInstance","ids","showCreatePluginInstancesDialog","skipPluginInstances","clone","deeplink","getData","_data","dld","template","setData","createLink","generateUrl","registerDeeplink","deeplinkData","_self","deeplinkItem","deeplinkId","imageUrl","pluginInstanceId","string1","array1","getDeeplink","searchOptions","_buildfire.index.string1","_buildfire.index.array1.string1","getAllDeeplinks","pageSize","unregisterDeeplink","spinner","auth","login","logout","getCurrentUser","onLogin","triggerOnLogin","user","onLogout","triggerOnLogout","openProfile","userId","getUserProfile","getUserProfiles","getUsersByEmail","getUserPictureUrl","email","username","Error","qString","authUrl","authHost","showUsersSearchDialog","showTagsSearchDialog","assignUserTags","keepSessionAlive","searchUsers","calendar","addEvent","share","messageObj","onAppBackgrounded","onAppResumed","triggerOnAppBackgrounded","triggerOnAppResumed","contacts","geo","getCurrentPosition","watchPosition","onPositionChange","position","clearWatch","watchId","calculateDistance","start","end","R","unitSystem","decimalPlaces","dLat","degreesToRadians","latitude","dLon","longitude","lat1","lat2","a","sin","cos","atan2","sqrt","round","decimals","Number","degrees","PI","setItem","getItem","val","undefined","removeItem","input","showTextDialog","showListDialog","imagePreviewer","notes","openDialog","onSeekTo","triggerOnSeekTo","getByItemId","injectPluginStyles","tinymcePluginStylesElement","tinymcePluginStyles","appContext","originalTinymceInit","tinymce","isBuildfire","bind","_bfInitialize","originalSetup","setup","editor","on","scriptElm","dom","getDoc","allLayouts","styleElementsInBody","doc","from","find","layout","dataset","layoutName","ui","registry","addMenuItem","icon","onAction","execCommand","shortcut","selectedNode","selection","getNode","insertAdjacentHTML","addContextMenu","bfLayout","content_style","content_css","splittedStyleFiles","menubar","userMenu","menu","edit","items","view","format","tools","item","splittedPlugins","defaultPlugins","plugins","defaultToolbar","toolbar","toolbarGroup","toolbar_mode","skin","contextmenu","fontsize_formats","extended_valid_elements","custom_elements","convert_urls","iframes","videos","vimeo_command","youtube_command","func","contentWindow","method","j","pause","stopVideos","handleEvent","eventType","processedClick","disableSelect","className","debugTag","disableFastClick","disableExternalLinkOverride","onclick","srcElement","getAttribute","inAppBrowser","regexp","errorMsg","lineNumber","column","errorObj","CustomEvent","bubbles","cancelable","detail","createEvent","initCustomEvent","prototype","Event","exports","module","define","amd","n","Function","eval","__esModule","default","defineProperty","r","arguments","hasOwnProperty","call","lory","z","classNameActiveSlide","classList","contains","remove","o","B","T","transition","hasTranslate3d","transform","slideSpeed","slidesToScroll","infinite","rewind","rewindSpeed","u","ease","v","A","h","M","nextSlide","O","k","min","S","b","offsetLeft","abs","N","P","f","currentSlide","classNameFrame","classNameSlideContainer","classNamePrevCtrl","classNameNextCtrl","enableMouseEvents","E","_","getElementsByClassName","offsetTop","children","slice","cloneNode","insertBefore","firstChild","transitionEnd","L","g","C","rewindOnResize","getBoundingClientRect","offsetWidth","reduce","touches","w","pageX","pageY","D","time","now","F","snapBackSpeed","jQuery","reset","slideTo","returnIndex","prev","next","destroy","lastChild","getComputedStyle","getPropertyValue","dispatchEvent","foo","createEventObject","Boolean","configurable","enumerable","carousel","carouselScriptSrc","config","mergeSettings","_initDimensions","selector","ceil","alt","display","attrname","speed","loop","autoInterval","userSttings","self","validateLauncherCarousel","_applySlider","_destroySlider","_renderHTMLItems","timerInterval","clearInterval","lorySlider","setInterval","sliderFrame","cname","slideContainer","_loadImages","itemsLength","pending","_appendItem","itemSlide","slide","image","append","cssWidth","cssHeight","_minHeight"],"mappings":"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","file":"buildfire_lightcarousel.min.js","sourcesContent":["\"use strict\";\n\n//\"use strict\";\nfunction Packet(id, cmd, data) {\n  this.id = id ? id : new Date().toISOString() + Math.random();\n  this.cmd = cmd;\n  this.data = data;\n  this.instanceId = null;\n} /// ref: https://github.com/BuildFire/sdk/wiki\n\n\nvar buildfire = {\n  isFileServer: function (url) {\n    return url.indexOf('s3.amazonaws.com') !== -1;\n  },\n  isWeb: function (callback) {\n    var isWebFromContext = function (context) {\n      if (context && context.device && context.device.platform) {\n        return context.device.platform.toLowerCase() === 'web';\n      } else {\n        console.error('context device platform not defined');\n        return window.location.protocol.indexOf('http') === 0;\n      }\n    };\n\n    var context = buildfire.getContext(function (err, callbackContext) {\n      if (callback) {\n        if (err) {\n          callback(err);\n        } else {\n          callback(null, isWebFromContext(callbackContext));\n        }\n      }\n    });\n\n    if (context) {\n      return isWebFromContext(context);\n    } else {\n      if (!callback) {\n        console.warn('context not ready. must use isWeb with callback parameter: function(err, isWebResult)');\n        return window.location.protocol.indexOf('http') === 0;\n      } // don't return anything if context is not ready but we have a callback\n\n    }\n  },\n  ratingSystem: {\n    inject: function () {\n      if (typeof buildfire === 'undefined') return;\n\n      if (typeof buildfire.components == 'undefined' || typeof buildfire.components.ratingSystem == 'undefined') {\n        loadScript('../../../scripts/buildfire/components/ratingSystem/index.min.js', function (err) {\n          var head = document.head;\n          var link = document.createElement('link');\n          link.rel = 'stylesheet';\n          link.type = 'text/css';\n          link.href = '../../../scripts/buildfire/components/ratingSystem/index.min.css';\n          head.appendChild(link);\n          buildfire.components.ratingSystem.injectRatings();\n        });\n      } else buildfire.components.ratingSystem.injectRatings();\n\n      function hasScript(url) {\n        while (url.includes('../')) url = url.replace('../', '');\n\n        var scripts = document.getElementsByTagName('script');\n\n        for (var i = 0; i < scripts.length; i++) {\n          if (scripts[i].src.includes(url)) return true;\n        }\n\n        return false;\n      }\n\n      function loadScript(url, callback) {\n        if (hasScript(url)) return;\n        var head = document.head;\n        var script = document.createElement('script');\n        script.type = 'text/javascript';\n        script.src = url;\n        script.onreadystatechange = callback;\n        script.onload = callback;\n        head.appendChild(script);\n      }\n    }\n  },\n  logger: {\n    attachRemoteLogger: function (tag) {\n      // dont attach twice\n      let buildFireAppDebuggerScript = document.getElementById('BuildFireAppDebuggerScript');\n\n      if (buildFireAppDebuggerScript) {\n        buildFireAppDebuggerScript.parentElement.removeChild(buildFireAppDebuggerScript);\n      }\n\n      if (!tag) tag = prompt('Enter is a unique tag to send your logs to');\n      if (!tag) return;\n      var header = document.querySelector('head');\n      var script = document.createElement('script');\n      script.src = 'http://debug.buildfire.com/target/target-script-min.js#' + tag;\n      script.id = 'BuildFireAppDebuggerScript';\n      header.appendChild(script);\n    }\n  },\n  _callbacks: {},\n  parseQueryString: function (str) {\n    var query = str || window.location.search.substring(1);\n    var vars = query.split('&');\n    var obj = new Object();\n\n    for (var i = 0; i < vars.length; i++) {\n      var pair = vars[i].split('=');\n      obj[decodeURIComponent(pair[0])] = decodeURIComponent(pair[1]);\n      var index = vars[i].indexOf('=');\n      var key = vars[i].substring(0, index);\n      var value = vars[i].substring(index + 1);\n      obj[decodeURIComponent(key)] = decodeURIComponent(value);\n    }\n\n    return obj;\n  },\n  options: {},\n  parseMetaOptions: function () {\n    var options = {};\n    var tags = document.head.querySelector('meta[name=buildfire]');\n\n    if (tags && tags.content) {\n      var sections = tags.content.split(',');\n      sections.forEach(function (section) {\n        var s = section.split('=');\n        options[s[0]] = s.length > 1 ? s[1] : true;\n      });\n    }\n\n    return options;\n  } ///custom events are super thus this implementation\n  ,\n  eventManager: {\n    events: {},\n    add: function (event, handler, allowMultipleHandlers) {\n      if (typeof handler != 'function') throw 'Invalid event handler';\n      if (!allowMultipleHandlers) this.clear(event);\n      if (!this.events[event]) this.events[event] = [handler];else this.events[event].push(handler);\n      var eh = this.events[event];\n      return {\n        clear: function () {\n          for (var i = 0; i < eh.length; i++) if (eh[i] === handler) eh.splice(i, 1);\n        }\n      };\n    },\n    clear: function (event) {\n      this.events[event] = [];\n    },\n    trigger: function (event, data) {\n      if (this.events[event]) for (var i = 0; i < this.events[event].length; i++) {\n        try {\n          this.events[event][i](data);\n        } catch (e) {\n          console.error(e);\n        }\n      }\n    }\n  },\n  _context: null,\n\n  get context() {\n    console.warn('buildfire.context is obsolete and will be removed soon');\n    return buildfire._context;\n  },\n\n  set context(obj) {\n    buildfire._context = obj;\n  },\n\n  init: function () {\n    // Listen to message from child window\n    window.removeEventListener('message', buildfire._postMessageHandler, false);\n    window.addEventListener('message', buildfire._postMessageHandler, false);\n    buildfire.options = buildfire.parseMetaOptions();\n    buildfire.appearance.insertHTMLAttributes();\n    buildfire.appearance.attachCSSFiles();\n    buildfire.localStorage.overrideNativeLocalStorage();\n    buildfire.wysiwyg.extend();\n  },\n  _whitelistedCommands: ['datastore.triggerOnUpdate', 'datastore.triggerOnRefresh', 'userData.triggerOnUpdate', 'userData.triggerOnRefresh', 'publicData.triggerOnUpdate', 'publicData.triggerOnRefresh', 'appData.triggerOnUpdate', 'appData.triggerOnRefresh', 'messaging.onReceivedMessage', 'history.triggerOnPop', 'navigation.onBackButtonClick', 'services.media.audioPlayer.triggerOnEvent', 'auth.triggerOnLogin', 'auth.triggerOnLogout', 'auth.triggerOnUpdate', 'logger.attachRemoteLogger', 'appearance.triggerOnUpdate', 'device.triggerOnAppBackgrounded', 'device.triggerOnAppResumed', 'notifications.localNotification.onClick', 'geo.onPositionChange', 'navigation.triggerOnAppLauncherActive', 'navigation.triggerOnAppLauncherInactive', 'colorLib._triggerOnChange', 'services.publicFiles._triggerOnProgress', 'services.publicFiles._triggerOnComplete', 'services.fileSystem.fileManager._triggerOnProgress', 'notes.triggerOnSeekTo', 'navigation.triggerOnPluginOpened', 'deeplink.triggerOnUpdate'],\n  _postMessageHandler: function (e) {\n    if (e.source === window) {\n      return;\n    } //e.origin != \"null\"\n\n\n    var packet;\n    if (typeof e.data == 'object') packet = e.data;else packet = JSON.parse(e.data);\n\n    if (packet.id && buildfire._callbacks[packet.id]) {\n      buildfire._callbacks[packet.id](packet.error, packet.data);\n\n      delete buildfire._callbacks[packet.id];\n    } else if (buildfire._whitelistedCommands.indexOf(packet.cmd) + 1) {\n      var sequence = packet.cmd.split('.');\n      var obj = buildfire;\n      var parent = buildfire;\n\n      for (var i = 0; i < sequence.length; i++) {\n        if (i > 0) parent = obj;\n        if (obj[sequence[i]]) obj = obj[sequence[i]];else return; // sorry i cant help you\n      }\n\n      obj.apply(parent, [packet.data]);\n    } else {\n      console.warn(window.location.href + ' unhandled packet', packet); //alert('parent sent: ' + packet.data);\n    }\n  } //, _resendAttempts:0\n  ,\n  _sendPacket: function (packet, callback) {\n    if (typeof callback != 'function') // handels better on response\n      callback = function (err, result) {//console.info('buildfire.js ignored callback ' + JSON.stringify(arguments));\n      };\n    var retryInterval = 3000,\n        command = packet.cmd,\n        maxResendAttempts = 5,\n        resendAttempts = 0;\n    var isDataStoreRetry = command.indexOf('datastore') == 0 && command.indexOf('datastore.insert') != 0 && command.indexOf('datastore.bulkInsert') != 0 && command.indexOf('datastore.disableRefresh') != 0 && command.indexOf('datastore.searchAndUpdate') != 0 && command.indexOf('datastore.update') != 0;\n    var isGetContextRetry = command.indexOf('getContext') == 0;\n    var allowRetry = isDataStoreRetry || isGetContextRetry;\n\n    var resend = function () {\n      if (resendAttempts < maxResendAttempts) {\n        console.log('calling ' + packet.cmd + ' again. total overall resend attempts ' + resendAttempts);\n\n        buildfire._sendPacket(packet, function (e, d) {\n          resendAttempts--;\n          callback(e, d);\n        });\n\n        resendAttempts++;\n      }\n    };\n\n    if (allowRetry) {\n      var timeout = setTimeout(resend, retryInterval);\n    } //packet.cmd.indexOf('getContext') == 0? 250 :\n\n\n    var wrapper = function (err, data) {\n      clearTimeout(timeout); // commented this to remove the 'timeout is not defined' error.\n\n      callback(err, data);\n    };\n\n    buildfire._callbacks[packet.id] = wrapper;\n    packet.fid = buildfire.fid; //console.info(\"BuildFire.js Send >> \" , packet.cmd, buildfire.fid);\n\n    buildfire._parentPost(packet, callback); //if (parent)parent.postMessage(p, \"*\");\n\n  },\n  _parentPost: function (packet) {\n    function sanitize(data) {\n      if (data) delete data.$$hashKey;\n\n      for (var p in data) {\n        var obj = data[p];\n        if (typeof obj == 'object') data[p] = sanitize(obj);\n      }\n\n      return data;\n    }\n\n    if (parent && packet) {\n      if (packet.data && typeof angular != 'undefined') packet.data = sanitize(packet.data);\n      parent.postMessage(packet, '*');\n    }\n  },\n  getContext: function (callback) {\n    if (buildfire._context) {\n      if (callback) callback(null, buildfire._context);\n    } else {\n      if (window.parsedQuerystring.appcontext) {\n        buildfire._context = JSON.parse(window.parsedQuerystring.appcontext);\n        if (callback) callback(null, buildfire._context);\n      } else {\n        if (!callback) throw 'Context not ready. Use callback parameter instead of direct return';\n        var p = new Packet(null, 'getContext');\n\n        buildfire._sendPacket(p, function (err, data) {\n          if (data) buildfire._context = data;\n          if (callback) callback(err, data);\n        });\n      }\n    }\n\n    return buildfire._context;\n  } /// ref: https://github.com/BuildFire/sdk/wiki/How-to-use-Navigation\n  ,\n  navigation: {\n    /**\n           * Navigate To plugin\n           * @pluginData {pluginId : pluginId,instanceId : instanceId,folderName:folderName,title:title ,queryString: to pass to next plugin}\n           */\n    navigateTo: function (pluginData, callback) {\n      if (pluginData.pluginTypeId && !pluginData.pluginId) pluginData.pluginId = pluginData.pluginTypeId;\n      var p = new Packet(null, 'navigation.navigateTo', {\n        pluginId: pluginData.pluginId,\n        instanceId: pluginData.instanceId,\n        title: pluginData.title,\n        folderName: pluginData.folderName,\n        queryString: pluginData.queryString\n      });\n\n      buildfire._sendPacket(p, callback);\n    },\n    navigateToSocialWall: function (options, callback) {\n      if (!callback) {\n        callback = console.warn;\n      }\n\n      if (!options) {\n        options = {};\n      }\n\n      if (options.wallUserIds) {\n        var wid = options.wallUserIds.sort().reverse().join('');\n\n        if (options.queryString) {\n          options.queryString += '&wid=' + wid;\n        } else {\n          options.queryString = 'wid=' + wid;\n        }\n      }\n\n      var predefinedPluginIds = {\n        'community': 'b15c62f2-7a99-48dc-a37a-e42d46bd3289',\n        'premium_social': '697f1612-8208-4870-93f9-555c65103578',\n        'social': '7b3d82bf-e5f1-4b2e-82bf-966d2ab0340d'\n      };\n      var orderedPluginIds = [];\n      options.pluginTypeOrder = options.pluginTypeOrder && options.pluginTypeOrder.length ? options.pluginTypeOrder : ['community', 'premium_social', 'social'];\n\n      for (var orderIndex = 0; orderIndex < options.pluginTypeOrder.length; orderIndex++) {\n        if (!predefinedPluginIds[options.pluginTypeOrder[orderIndex]]) {\n          return callback('unknown plugin ' + options.pluginTypeOrder[orderIndex]);\n        }\n\n        orderedPluginIds.push(predefinedPluginIds[options.pluginTypeOrder[orderIndex]]);\n      }\n\n      navigate(options, orderedPluginIds[0], function (error) {\n        if (!error) return callback(null, {\n          status: 'completed'\n        });\n\n        if (orderedPluginIds[1]) {\n          navigate(options, orderedPluginIds[1], function (error) {\n            if (!error) return callback(null, {\n              status: 'completed'\n            });\n\n            if (orderedPluginIds[2]) {\n              navigate(options, orderedPluginIds[2], callback);\n            } else {\n              callback(error);\n            }\n          });\n        } else {\n          callback(error);\n        }\n      });\n\n      function navigate(data, pluginId, cb) {\n        data.pluginId = pluginId;\n        var p = new Packet(null, 'navigation.navigateTo', {\n          pluginId: data.pluginId,\n          instanceId: data.instanceId,\n          title: data.title,\n          folderName: data.folderName,\n          queryString: data.queryString\n        });\n\n        buildfire._sendPacket(p, cb);\n      }\n    },\n    navigateHome: function () {\n      var p = new Packet(null, 'navigation.navigateHome');\n\n      buildfire._sendPacket(p);\n    },\n    scrollTop: function (callback) {\n      var p = new Packet(null, 'navigation.scrollTop');\n\n      buildfire._sendPacket(p, callback);\n    },\n    openWindow: function (url, target, callback) {\n      if (!target) target = '_blank';\n      if (!callback) callback = function () {\n        console.info('openWindow:: completed');\n      };\n      var actionItem = {\n        action: 'linkToWeb',\n        url: url,\n        openIn: target\n      };\n      var p = new Packet(null, 'actionItems.execute', actionItem, callback);\n\n      buildfire._sendPacket(p, callback);\n    },\n    _goBackOne: function () {\n      buildfire._sendPacket(new Packet(null, 'navigation.navigateBack'));\n    },\n    onBackButtonClick: function () {\n      buildfire.navigation._goBackOne();\n    },\n    restoreBackButtonClick: function () {\n      buildfire.navigation.onBackButtonClick = function () {\n        buildfire.navigation._goBackOne();\n      };\n    },\n    goBack: function () {\n      buildfire.navigation.onBackButtonClick();\n    },\n    makeSafeLinks: function (element) {\n      var t = this;\n      if (typeof element != 'object') element = document.getElementById(element);\n      var anchors = element.querySelectorAll('a[href^=http], a[href^=https],a[href^=www]');\n\n      for (var i = 0; i < anchors.length; i++) {\n        anchors[i].setAttribute('inAppBrowser', true);\n        anchors[i].addEventListener('click', function (evt) {\n          evt.preventDefault();\n          t.openWindow(this.href, this.target, null);\n        }, false);\n      }\n    },\n    navigateEmulator: function (options) {\n      buildfire._sendPacket(new Packet(null, 'navigation.navigateEmulator', options));\n    },\n    onAppLauncherActive: function (callback, allowMultipleHandlers) {\n      return buildfire.eventManager.add('appLauncherActive', callback, allowMultipleHandlers);\n    },\n    onAppLauncherInactive: function (callback, allowMultipleHandlers) {\n      return buildfire.eventManager.add('appLauncherInactive', callback, allowMultipleHandlers);\n    },\n    triggerOnAppLauncherActive: function (data) {\n      return buildfire.eventManager.trigger('appLauncherActive', data);\n    },\n    triggerOnAppLauncherInactive: function (data) {\n      return buildfire.eventManager.trigger('appLauncherInactive', data);\n    },\n    onPluginOpened: function (callback, allowMultipleHandlers) {\n      return buildfire.eventManager.add('pluginOpened', callback, allowMultipleHandlers);\n    },\n    triggerOnPluginOpened: function (data) {\n      return buildfire.eventManager.trigger('pluginOpened', data);\n    },\n    getBackNavigationInstanceId: function () {\n      var qs = buildfire.parseQueryString();\n      if (qs.backnavigationinstance) return qs.backnavigationinstance;\n      return undefined;\n    },\n\n    navigateToTab(options = {}, callback) {\n      var p = new Packet(null, 'navigation.navigateToTab', options);\n\n      buildfire._sendPacket(p, callback);\n    }\n\n  },\n  //buildfire.getFrameType API returns string \"launcherPluginv\" if it is Home plugin\n  // else it returns \"controlIFrame\"\n  getFrameType: function () {\n    var PLUGIN_STRING_ENUM = {\n      LAUNCHER_PLUGIN: 'launcherPluginv',\n      CONTROL_FRAME: 'controlIFrame'\n    };\n    var PLUGIN_TYPE_ENUM = {\n      LAUNCHER_PLUGIN: 'LAUNCHER_PLUGIN',\n      CONTROL_FRAME: 'CONTROL_FRAME',\n      UNKNOWN: 'UNKNOWN'\n    };\n    var fid = buildfire.fid;\n    if (fid && fid.indexOf(PLUGIN_STRING_ENUM.LAUNCHER_PLUGIN) > -1) return PLUGIN_TYPE_ENUM.LAUNCHER_PLUGIN;else if (fid && fid.indexOf(PLUGIN_STRING_ENUM.CONTROL_FRAME) > -1) return PLUGIN_TYPE_ENUM.CONTROL_FRAME;else return PLUGIN_TYPE_ENUM.UNKNOWN;\n  } /// ref: https://github.com/BuildFire/sdk/wiki/How-to-use-Appearance\n  ,\n  appearance: {\n    ready: function () {\n      var p = new Packet(null, 'appearance.ready');\n\n      buildfire._sendPacket(p);\n    },\n    _defaultTheme: {\n      appName: '',\n      colors: {\n        backgroundColor: '#ffffff',\n        bodyText: '#858585',\n        dangerTheme: '#f24965',\n        defaultTheme: '#07a05e',\n        footerMenuBackgroundColor: '#ffffff',\n        footerMenuIconColor: '#45cae6',\n        headerText: '#000000',\n        icons: '#45cae6',\n        infoTheme: '#66d6ed',\n        primaryTheme: '#45cae6',\n        successTheme: '#0ac775',\n        titleBar: '#0ac775',\n        titleBarTextAndIcons: '#ffffff',\n        warningTheme: '#ffcf40'\n      },\n      fontId: 'Lato',\n      fontName: 'Lato'\n    },\n    _setFontUrl: function (context, appTheme) {\n      if (appTheme.fontId) {\n        if (appTheme.isCustomFont) {\n          appTheme.fontUrl = \"\".concat(context.endPoints.pluginRootHost, \"/\").concat(appTheme.fontFolderPath, \"/\").concat(context.appId, \"/\").concat(encodeURIComponent(appTheme.fontFileName), \"?v=\").concat(appTheme.fontLastUpdatedOn);\n        } else {\n          appTheme.fontUrl = \"https://fonts.googleapis.com/css?family=\".concat(appTheme.fontId);\n        }\n      }\n    },\n    getAppTheme: function (callback) {\n      buildfire.getContext(function (err, context) {\n        if (err) callback(err, null);\n\n        if (context) {\n          if (buildfire.isWeb() && !context.appTheme) {\n            context.appTheme = buildfire.appearance._defaultTheme;\n          }\n\n          buildfire.appearance._setFontUrl(context, context.appTheme);\n\n          callback(null, context.appTheme);\n        } else callback(null, null);\n      });\n    },\n    getWidgetTheme: function (callback) {\n      buildfire.getContext(function (err, context) {\n        if (err) return callback(err, null);\n\n        if (context) {\n          if (context.widgetTheme) {\n            buildfire.appearance._setFontUrl(context, context.widgetTheme);\n\n            return callback(null, context.widgetTheme);\n          }\n\n          return buildfire.appearance.getAppTheme(callback);\n        } else {\n          callback(null, null);\n        }\n      });\n    },\n    _forceCSSRender: function () {\n      // WebKit Rendering Reset on Plugins\n      if (window.location.href.indexOf('/widget/') > 0) {\n        var html = document.getElementsByTagName('html')[0];\n        var style = document.createElement('style');\n        style.type = 'text/css';\n        style.innerHTML = 'body{position:relative !important; z-index:1 !important;} .plugin-slide{position:relative !important;} .plugin-slide, .plugin-slide img{transform: translateZ(0) !important;';\n        html.appendChild(style);\n      }\n    },\n    insertHTMLAttributes: function () {\n      var html = document.getElementsByTagName('html')[0];\n\n      if (window.location.href.indexOf('/widget/') > 0) {\n        html.setAttribute('buildfire', 'widget');\n        html.setAttribute('type', 'app');\n      } else {\n        html.setAttribute('buildfire', 'control');\n      }\n\n      var nVer = navigator.appVersion;\n      var nAgt = navigator.userAgent;\n      var browserName = navigator.appName;\n      var fullVersion = '' + parseFloat(navigator.appVersion);\n      var majorVersion = parseInt(navigator.appVersion, 10);\n      var nameOffset, verOffset, ix;\n      var os = 'Unknown OS'; // In Opera, the true version is after \"Opera\" or after \"Version\"\n\n      if ((verOffset = nAgt.indexOf('Opera')) != -1) {\n        browserName = 'Opera';\n        fullVersion = nAgt.substring(verOffset + 6);\n        if ((verOffset = nAgt.indexOf('Version')) != -1) fullVersion = nAgt.substring(verOffset + 8);\n      } // In MSIE, the true version is after \"MSIE\" in userAgent\n      else if ((verOffset = nAgt.indexOf('MSIE')) != -1) {\n        browserName = 'Microsoft Internet Explorer';\n        fullVersion = nAgt.substring(verOffset + 5);\n      } // In Chrome, the true version is after \"Chrome\"\n      else if ((verOffset = nAgt.indexOf('Chrome')) != -1) {\n        browserName = 'Chrome';\n        fullVersion = nAgt.substring(verOffset + 7);\n      } // In Safari, the true version is after \"Safari\" or after \"Version\"\n      else if ((verOffset = nAgt.indexOf('Safari')) != -1) {\n        browserName = 'Safari';\n        fullVersion = nAgt.substring(verOffset + 7);\n        if ((verOffset = nAgt.indexOf('Version')) != -1) fullVersion = nAgt.substring(verOffset + 8);\n      } // In Firefox, the true version is after \"Firefox\"\n      else if ((verOffset = nAgt.indexOf('Firefox')) != -1) {\n        browserName = 'Firefox';\n        fullVersion = nAgt.substring(verOffset + 8);\n      } // In most other browsers, \"name/version\" is at the end of userAgent\n      else if ((nameOffset = nAgt.lastIndexOf(' ') + 1) < (verOffset = nAgt.lastIndexOf('/'))) {\n        browserName = nAgt.substring(nameOffset, verOffset);\n        fullVersion = nAgt.substring(verOffset + 1);\n\n        if (browserName.toLowerCase() == browserName.toUpperCase()) {\n          browserName = navigator.appName;\n        }\n      } // trim the fullVersion string at semicolon/space if present\n\n\n      if ((ix = fullVersion.indexOf(';')) != -1) fullVersion = fullVersion.substring(0, ix);\n      if ((ix = fullVersion.indexOf(' ')) != -1) fullVersion = fullVersion.substring(0, ix);\n      majorVersion = parseInt('' + fullVersion, 10);\n\n      if (isNaN(majorVersion)) {\n        fullVersion = '' + parseFloat(navigator.appVersion);\n        majorVersion = parseInt(navigator.appVersion, 10);\n      }\n\n      if (navigator.appVersion.indexOf('Win') != -1) os = 'Windows';\n      if (navigator.appVersion.indexOf('Mac') != -1) os = 'MacOS';\n      if (navigator.appVersion.indexOf('X11') != -1) os = 'UNIX';\n      if (navigator.appVersion.indexOf('Linux') != -1) os = 'Linux';\n      html.setAttribute('os', os);\n      html.setAttribute('browser', browserName);\n      html.setAttribute('majorVersion', majorVersion);\n      html.setAttribute('fullVersion', fullVersion);\n      var userAgent = navigator.userAgent || navigator.vendor || window.opera;\n\n      if (userAgent.match(/iPad/i) || userAgent.match(/iPhone/i) || userAgent.match(/iPod/i) || userAgent.match(/Macintosh/i) && navigator.maxTouchPoints > 1) {\n        var p = new Packet(null, 'appearance.getFooterMenu');\n\n        buildfire._sendPacket(p, function (err, footerMenu) {\n          if (err) {\n            console.error(err);\n          }\n\n          if (!footerMenu || !footerMenu.settings || !footerMenu.settings.turnOnFooterMenu) {\n            html.setAttribute('safe-area', 'true');\n          }\n        });\n      }\n    },\n    getCSSFiles: function (callback) {\n      var p = new Packet(null, 'appearance.getCSSFiles');\n\n      buildfire._sendPacket(p, callback);\n    },\n    attachCSSFiles: function () {\n      var files = [],\n          base = '';\n      var disableBootstrap = buildfire.options && buildfire.options.disableBootstrap ? buildfire.options.disableBootstrap : false;\n      var disableTheme = buildfire.options && buildfire.options.disableTheme ? buildfire.options.disableTheme : false;\n      var enableMDTheme = buildfire.options && buildfire.options.enableMDTheme ? buildfire.options.enableMDTheme : false;\n\n      if (!disableTheme && !enableMDTheme) {\n        if (!disableTheme && !disableBootstrap) {\n          files.push('styles/bootstrap.css');\n        }\n\n        if (window.location.pathname.indexOf('/control/') >= 0) {\n          files.push('styles/siteStyle.css') && files.push('styles/pluginScreen.css');\n        } else {\n          var disableAppStyles = buildfire.options && buildfire.options.disableAppStyles ? buildfire.options.disableAppStyles : false;\n\n          if (!disableAppStyles) {\n            files.push('styles/appStyle.css');\n          }\n        }\n      } // TODO: verify why in attachCSSFiles and if should not run if disableTheme === true ?\n\n\n      var scripts = document.getElementsByTagName('script');\n\n      for (var i = 0; i < scripts.length; i++) {\n        var src = scripts[i].src;\n\n        if (src.indexOf('buildfire.js') > 0) {\n          base = src.replace('/scripts/buildfire.js', '');\n          break;\n        } else if (src.indexOf('buildfire.min.js') > 0) {\n          base = src.replace('/scripts/buildfire.min.js', '');\n          break;\n        } else if (src.match(/(\\/scripts\\/_bundle\\S+.js)/gi)) {\n          base = src.replace(/(\\/scripts\\/_bundle\\S+.js)/gi, '');\n          break;\n        }\n      }\n\n      buildfire.appearance.getWidgetTheme(function (err, theme) {\n        if (err) return console.error(err);\n        var bfWidgetTheme = document.createElement('style');\n        bfWidgetTheme.id = 'bfWidgetTheme';\n        bfWidgetTheme.rel = 'stylesheet';\n        bfWidgetTheme.innerHTML = buildfire.appearance._getAppThemeCssVariables(theme);\n        (document.head || document.body || document).appendChild(bfWidgetTheme);\n        files.push('styles/bfUIElements.css');\n      });\n\n      if (enableMDTheme) {\n        var styleElement = document.createElement('style');\n        styleElement.id = 'appMDTheme';\n        styleElement.type = 'text/css';\n\n        function applyMDTheme(err, appTheme) {\n          var css = '';\n\n          if (typeof appTheme.fontId !== 'undefined' && appTheme.fontId !== 'Arial' && appTheme.fontId !== 'Sans-Serif' && appTheme.fontId !== 'Helvetica' && appTheme.fontId !== 'Shadows+into+Light' && appTheme.fontId !== 'Asap+condensed' && appTheme.fontUrl) {\n            if (appTheme.isCustomFont) {\n              css += '@font-face { font-family: \\'' + appTheme.fontId + '\\'; src: url(\\'' + appTheme.fontUrl + '\\') format(\\'' + appTheme.fontFormat + '\\'); }';\n            } else {\n              css += '@import url(\\'' + appTheme.fontUrl + '\\');';\n            }\n          }\n\n          css += ':root:root {' + '  --mdc-typography-font-family: unquote(\"' + appTheme.fontName + ', sans-serif\");' + '  --mdc-theme-primary:' + appTheme.colors.primaryTheme + ';' + '  --mdc-theme-secondary:' + appTheme.colors.successTheme + ';' + '  --mdc-theme-surface:' + appTheme.colors.backgroundColor + ';' + '  --mdc-theme-background:' + appTheme.colors.backgroundColor + ';' + '  --mdc-theme-error:' + appTheme.colors.dangerTheme + ';' + '  --mdc-theme-on-background:' + appTheme.colors.bodyText + ';' + '  --mdc-theme-on-primary: white;' + '  --mdc-theme-on-secondary: white;' + '  --mdc-theme-on-error: white;' + '  --mdc-theme-on-surface:' + appTheme.colors.bodyText + ';' + '  --mdc-theme-text-primary-on-background:' + appTheme.colors.bodyText + ';' + '  --mdc-theme-text-secondary-on-background:' + appTheme.colors.bodyText + ';' + '  --mdc-theme-text-disabled-on-background:' + appTheme.colors.bodyText + ';' + '  --mdc-theme-text-primary-on-light: white;' + '  --mdc-theme-text-secondary-on-light: white;' + '  --mdc-theme-text-hint-on-light: white;' + '  --mdc-theme-text-disabled-on-light: white;' + '  --mdc-theme-text-icon-on-light:  white;' + '  --mdc-theme-text-primary-on-dark: white;' + '  --mdc-theme-text-secondary-on-dark: white;' + '  --mdc-theme-text-hint-on-dark: white;' + '  --mdc-theme-text-disabled-on-dark: white;' + '  --mdc-theme-text-icon-on-dark: white;' + '  --mdc-theme-text-icon-on-background:' + appTheme.colors.icons + ';' + '}' + '*:not(i):not(.material-icons):not(.mdc-icon):not(.mdc-button__icon):not(.mdc-icon-button__icon)' + '{ font-family: \\'' + appTheme.fontName + '\\', sans-serif !important ' + '}' + '.mdc-typography { font-family: ' + appTheme.fontName + ', sans-serif }' + '.mdc-typography--headline1 { font-family: ' + appTheme.fontName + ', sans-serif }' + '.mdc-typography--headline2 { font-family: ' + appTheme.fontName + ', sans-serif }' + '.mdc-typography--headline3 { font-family: ' + appTheme.fontName + ', sans-serif }' + '.mdc-typography--headline4 { font-family: ' + appTheme.fontName + ', sans-serif }' + '.mdc-typography--headline5 { font-family: ' + appTheme.fontName + ', sans-serif }' + '.mdc-typography--headline6 { font-family: ' + appTheme.fontName + ', sans-serif }' + '.mdc-typography--subtitle1 { font-family: ' + appTheme.fontName + ', sans-serif }' + '.mdc-typography--subtitle2 { font-family: ' + appTheme.fontName + ', sans-serif }' + '.mdc-typography--body1 { font-family: ' + appTheme.fontName + ', sans-serif }, sans-serif' + '.mdc-typography--body2 { font-family: ' + appTheme.fontName + ', sans-serif }' + '.mdc-typography--caption { font-family: ' + appTheme.fontName + ', sans-serif }' + '.mdc-typography--button { font-family: ' + appTheme.fontName + ', sans-serif }' + '.mdc-typography--overline { font-family: ' + appTheme.fontName + ', sans-serif }' + '.mdc-theme--primary { color: #6200ee !important; color: var(--mdc-theme-primary, #6200ee) !important; }' + '.mdc-theme--secondary { color: #018786 !important; color: var(--mdc-theme-secondary, #018786) !important; }' + '.mdc-theme--background { background-color: #fff; background-color: var(--mdc-theme-background, #fff);}' + '.mdc-theme--surface { background-color: #fff; background-color: var(--mdc-theme-surface, #fff);}' + '.mdc-theme--error { color: #b00020 !important; color: var(--mdc-theme-error, #b00020) !important;}' + '.mdc-theme--on-primary { color: #fff !important; color: var(--mdc-theme-on-primary, #fff) !important;}' + '.mdc-theme--on-secondary { color: #fff !important; color: var(--mdc-theme-on-secondary, #fff) !important;}' + '.mdc-theme--on-surface { color: #000 !important; color: var(--mdc-theme-on-surface, #000) !important;}' + '.mdc-theme--on-error { color: #fff !important; color: var(--mdc-theme-on-error, #fff) !important;}' + '.mdc-theme--text-primary-on-background { color: rgba(0, 0, 0, 0.87) !important; color: var(--mdc-theme-text-primary-on-background, rgba(0, 0, 0, 0.87)) !important;}' + '.mdc-theme--text-secondary-on-background { color: rgba(0, 0, 0, 0.54) !important; color: var(--mdc-theme-text-secondary-on-background, rgba(0, 0, 0, 0.54)) !important;}' + '.mdc-theme--text-hint-on-background {color: rgba(0, 0, 0, 0.38) !important; color: var(--mdc-theme-text-hint-on-background, rgba(0, 0, 0, 0.38)) !important;}' + '.mdc-theme--text-disabled-on-background {color: rgba(0, 0, 0, 0.38) !important; color: var(--mdc-theme-text-disabled-on-background, rgba(0, 0, 0, 0.38)) !important;}' + '.mdc-theme--text-icon-on-background { color: rgba(0, 0, 0, 0.38) !important; color: var(--mdc-theme-text-icon-on-background, rgba(0, 0, 0, 0.38)) !important;}' + '.mdc-theme--text-primary-on-light { color: rgba(0, 0, 0, 0.87) !important; color: var(--mdc-theme-text-primary-on-light, rgba(0, 0, 0, 0.87)) !important;}' + '.mdc-theme--text-secondary-on-light { color: rgba(0, 0, 0, 0.54) !important; color: var(--mdc-theme-text-secondary-on-light, rgba(0, 0, 0, 0.54)) !important;}' + '.mdc-theme--text-hint-on-light { color: rgba(0, 0, 0, 0.38) !important; color: var(--mdc-theme-text-hint-on-light, rgba(0, 0, 0, 0.38)) !important;}' + '.mdc-theme--text-disabled-on-light { color: rgba(0, 0, 0, 0.38) !important; color: var(--mdc-theme-text-disabled-on-light, rgba(0, 0, 0, 0.38)) !important;}' + '.mdc-theme--text-icon-on-light { color: rgba(0, 0, 0, 0.38) !important; color: var(--mdc-theme-text-icon-on-light, rgba(0, 0, 0, 0.38)) !important;}' + '.mdc-theme--text-primary-on-dark { color: white !important; color: var(--mdc-theme-text-primary-on-dark, white) !important;}' + '.mdc-theme--text-secondary-on-dark { color: rgba(255, 255, 255, 0.7) !important; color: var(--mdc-theme-text-secondary-on-dark, rgba(255, 255, 255, 0.7)) !important;}' + '.mdc-theme--text-hint-on-dark { color: rgba(255, 255, 255, 0.5) !important; color: var(--mdc-theme-text-hint-on-dark, rgba(255, 255, 255, 0.5)) !important;}' + '.mdc-theme--text-disabled-on-dark { color: rgba(255, 255, 255, 0.5) !important; color: var(--mdc-theme-text-disabled-on-dark, rgba(255, 255, 255, 0.5)) !important;}' + '.mdc-theme--text-icon-on-dark { color: rgba(255, 255, 255, 0.5) !important; color: var(--mdc-theme-text-icon-on-dark, rgba(255, 255, 255, 0.5)) !important;}' + '.mdc-theme--primary-bg { background-color: #6200ee !important; background-color: var(--mdc-theme-primary, #6200ee) !important;}' + '.mdc-theme--secondary-bg { background-color: #018786 !important; background-color: var(--mdc-theme-secondary, #018786) !important;}';\n          styleElement.innerHTML = css;\n        }\n\n        buildfire.appearance.getAppTheme(function (err, appTheme) {\n          applyMDTheme(err, appTheme);\n          (document.head || document.body || document).appendChild(styleElement);\n        });\n        buildfire.appearance.onUpdate(function (appTheme) {\n          buildfire.getContext((err, context) => {\n            if (err) console.error(err);\n\n            if (context) {\n              buildfire.appearance._setFontUrl(context, appTheme);\n\n              applyMDTheme(null, appTheme);\n            } else {\n              applyMDTheme(null, appTheme);\n            }\n          });\n        });\n      }\n\n      if (base[base.length - 1] != '/') {\n        base += '/';\n      } //Remove Scrollbars css\n\n\n      {\n        var _sharedStyle = document.createElement('style');\n\n        _sharedStyle.type = 'text/css';\n        _sharedStyle.innerHTML = '@media(max-width: 1200px){' + '/* Remove Scrollbars */' + '[buildfire=\"widget\"] ::-webkit-scrollbar,' + '[buildfire=\"widget\"] html::-webkit-scrollbar,' + '[buildfire=\"widget\"] body::-webkit-scrollbar,' + '[buildfire=\"widget\"] html *::-webkit-scrollbar,' + '[buildfire=\"widget\"] body *::-webkit-scrollbar{' + 'display: none !important;' + '}' + '[buildfire=\"widget\"] html,' + '[buildfire=\"widget\"] body,' + '[buildfire=\"widget\"] html *,' + '[buildfire=\"widget\"] body *{' + '-ms-overflow-style: none;' + 'scrollbar-width: none;' + '}' + '}';\n        (document.head || document.body || document).appendChild(_sharedStyle);\n      }\n\n      for (var i = 0; i < files.length; i++) document.write('<link rel=\"stylesheet\" href=\"' + base + files[i] + '\"/>');\n    },\n    disableFastClickOnLoad: false,\n    attachFastClick: function () {\n      var path;\n      var scripts = document.getElementsByTagName('script');\n\n      for (var i = 0; i < scripts.length; i++) {\n        if (scripts[i].src.indexOf('buildfire.js') > 0) path = scripts[i].src.replace('buildfire.js', 'fastclick.js');else if (scripts[i].src.indexOf('buildfire.min.js') > 0) path = scripts[i].src.replace('buildfire.min.js', 'fastclick.js');else if (scripts[i].src.indexOf('fastclick.js') > 0) {\n          console.warn('fastclick already attached');\n          return;\n        }\n      }\n\n      if (!path) {\n        console.warn('fastclick.js requires a buildfire.js reference.');\n        return;\n      } else {\n        var script = document.createElement('script');\n        script.src = path;\n        script.type = 'text/javascript';\n\n        script.onload = function () {\n          if (typeof FastClick == 'undefined') console.error('fastclick undefined');else FastClick.attach(document.body);\n        };\n\n        document.body.appendChild(script);\n      }\n    },\n    applyFastClick: function (element) {\n      if (!element) element = document.body;\n      if (typeof FastClick == 'undefined') console.error('fastclick undefined');else FastClick.attach(element);\n    },\n    attachAppThemeCSSFiles: function (appId, liveMode, appHost) {\n      this._attachAppThemeCSSFiles(appHost + '/api/app/styles/appTheme.css?appId=' + appId + '&liveMode=' + liveMode + '&v=' + buildfire.appearance.CSSBusterCounter);\n    },\n    attachLocalAppThemeCSSFiles: function (appId) {\n      this._attachAppThemeCSSFiles('../../../../app/scripts/offline/appTheme' + appId + '.css');\n    },\n    _attachAppThemeCSSFiles: function (url) {\n      var linkElement = document.createElement('link');\n      buildfire.appearance.CSSBusterCounter = 0;\n      linkElement.setAttribute('rel', 'stylesheet');\n      linkElement.setAttribute('type', 'text/css');\n      linkElement.setAttribute('id', 'appThemeCSS');\n      linkElement.setAttribute('href', url);\n      document.getElementsByTagName('head')[0].appendChild(linkElement);\n    },\n    _resizedTo: 0,\n    autosizeContainer: function () {\n      var height;\n\n      try {\n        height = Math.max(document.documentElement.clientHeight, document.body.scrollHeight, document.documentElement.scrollHeight, document.body.offsetHeight, document.documentElement.offsetHeight);\n      } catch (e) {}\n\n      if (!height || buildfire.appearance._resizedTo == height || height < 100) return;\n      var p = new Packet(null, 'appearance.autosizeContainer', {\n        height: height\n      });\n\n      buildfire._sendPacket(p);\n\n      buildfire.appearance._resizedTo = height;\n    },\n    setHeaderVisibility: function (value) {\n      var p = new Packet(null, 'appearance.setHeaderVisibility', value);\n\n      buildfire._sendPacket(p);\n    },\n    onUpdate: function (callback, allowMultipleHandlers) {\n      return buildfire.eventManager.add('appearanceOnUpdate', callback, allowMultipleHandlers);\n    },\n    triggerOnUpdate: function (appTheme) {\n      var appThemeCSSElement = document.getElementById('appThemeCSS');\n\n      if (appThemeCSSElement) {\n        appThemeCSSElement.href = appThemeCSSElement.href.replace('&v=' + buildfire.appearance.CSSBusterCounter, '&v=' + ++buildfire.appearance.CSSBusterCounter);\n      }\n\n      if (appTheme) {\n        var bfWidgetTheme = document.getElementById('bfWidgetTheme');\n\n        if (bfWidgetTheme) {\n          buildfire.getContext((err, context) => {\n            if (err) console.error(err);\n\n            if (context) {\n              buildfire.appearance._setFontUrl(context, appTheme);\n\n              bfWidgetTheme.innerHTML = buildfire.appearance._getAppThemeCssVariables(appTheme);\n            } else {\n              bfWidgetTheme.innerHTML = buildfire.appearance._getAppThemeCssVariables(appTheme);\n            }\n          });\n        }\n\n        buildfire.eventManager.trigger('appearanceOnUpdate', appTheme);\n      }\n    },\n    titlebar: {\n      show: function (options, callback) {\n        var p = new Packet(null, 'appearance.titlebar.show');\n\n        buildfire._sendPacket(p, callback);\n      },\n      hide: function (options, callback) {\n        var p = new Packet(null, 'appearance.titlebar.hide');\n\n        buildfire._sendPacket(p, callback);\n      }\n    },\n    navbar: {\n      show: function (options, callback) {\n        var p = new Packet(null, 'appearance.navbar.show');\n\n        buildfire._sendPacket(p, callback);\n      },\n      hide: function (options, callback) {\n        var p = new Packet(null, 'appearance.navbar.hide');\n\n        buildfire._sendPacket(p, callback);\n      }\n    },\n    sideMenu: {\n      show: function (options, callback) {\n        var p = new Packet(null, 'appearance.sideMenu.show');\n\n        buildfire._sendPacket(p, callback);\n      },\n      hide: function (options, callback) {\n        var p = new Packet(null, 'appearance.sideMenu.hide');\n\n        buildfire._sendPacket(p, callback);\n      },\n      open: function (options, callback) {\n        var p = new Packet(null, 'appearance.sideMenu.open');\n\n        buildfire._sendPacket(p, callback);\n      },\n      close: function (options, callback) {\n        var p = new Packet(null, 'appearance.sideMenu.close');\n\n        buildfire._sendPacket(p, callback);\n      }\n    },\n    fullScreenMode: {\n      enable: function (options, callback) {\n        var p = new Packet(null, 'appearance.fullScreenMode.enable');\n\n        buildfire._sendPacket(p, callback);\n      },\n      disable: function (options, callback) {\n        var p = new Packet(null, 'appearance.fullScreenMode.disable');\n\n        buildfire._sendPacket(p, callback);\n      }\n    },\n    _getAppThemeCssVariables: function (appTheme) {\n      var css = '';\n\n      if (typeof appTheme.fontId !== 'undefined' && appTheme.fontId !== 'Arial' && appTheme.fontId !== 'Sans-Serif' && appTheme.fontId !== 'Helvetica' && appTheme.fontId !== 'Shadows+into+Light' && appTheme.fontId !== 'Asap+condensed' && appTheme.fontUrl) {\n        if (appTheme.isCustomFont) {\n          css += '@font-face { font-family: \\'' + appTheme.fontId + '\\'; src: url(\\'' + appTheme.fontUrl + '\\') format(\\'' + appTheme.fontFormat + '\\'); }';\n        } else {\n          css += '@import url(\\'' + appTheme.fontUrl + '\\');';\n        }\n      }\n\n      css += ':root {' + '--bf-theme-primary: ' + appTheme.colors.primaryTheme + ' !important;' + '--bf-theme-success: ' + appTheme.colors.successTheme + ' !important;' + '--bf-theme-warning: ' + appTheme.colors.warningTheme + ' !important;' + '--bf-theme-info: ' + appTheme.colors.infoTheme + ' !important;' + '--bf-theme-default: ' + appTheme.colors.defaultTheme + ' !important;' + '--bf-theme-danger: ' + appTheme.colors.dangerTheme + ' !important;' + '--bf-theme-background: ' + appTheme.colors.backgroundColor + ' !important;' + '--bf-theme-body-text: ' + appTheme.colors.bodyText + ' !important;' + '--bf-theme-footer-background: ' + appTheme.colors.footerMenuBackgroundColor + ' !important;' + '--bf-theme-footer-icon: ' + appTheme.colors.footerMenuIconColor + ' !important;' + '--bf-theme-header-text: ' + appTheme.colors.headerText + ' !important;' + '--bf-theme-icons: ' + appTheme.colors.icons + ' !important;' + '--bf-theme-title-bar: ' + appTheme.colors.titleBar + ' !important;' + '--bf-theme-title-bar-text-icons: ' + appTheme.colors.titleBarTextAndIcons + ' !important;' + '--bf-font-family:' + appTheme.fontName + ', sans-serif !important' + '}';\n      return css;\n    }\n  } /// ref: https://github.com/BuildFire/sdk/wiki/How-to-capture-Analytics-for-your-plugin\n  ,\n  analytics: {\n    trackAction: function (actionName, metadata) {\n      var p = new Packet(null, 'analytics.trackActionCommand', {\n        value: actionName,\n        metadata: metadata\n      }); // wrap object to follow the command(obj, callback)\n\n      buildfire._sendPacket(p);\n    },\n    trackView: function (actionName, metadata) {\n      var p = new Packet(null, 'analytics.trackViewCommand', {\n        value: actionName,\n        metadata: metadata\n      }); // wrap object to follow the command(obj, callback)\n\n      buildfire._sendPacket(p);\n    },\n    /// ref: https://github.com/BuildFire/sdk/wiki/Plugin-Custom-Events\n    registerEvent: function (event, options, callback) {\n      if (typeof options == 'function') {\n        callback = options;\n        options = null;\n      }\n\n      var p = new Packet(null, 'analytics.registerPluginEvent', {\n        data: event,\n        options: options\n      });\n\n      buildfire._sendPacket(p, callback);\n    },\n    unregisterEvent: function (key, callback) {\n      var p = new Packet(null, 'analytics.unregisterPluginEvent', {\n        key: key\n      });\n\n      buildfire._sendPacket(p, callback);\n    },\n    ///params:{eventKey:''}\n    showReports: function (params, callback) {\n      if (!params) params = {};\n      var p = new Packet(null, 'analytics.showReports', params);\n\n      buildfire._sendPacket(p, callback);\n    }\n  } /// ref: https://github.com/BuildFire/sdk/wiki/How-to-use-Datastore\n  ,\n  datastore: {\n    /// ref: https://github.com/BuildFire/sdk/wiki/How-to-use-Datastore#buildfiredatastoreget-tag-optional-id-optional-callback\n    get: function (tag, callback) {\n      var tagType = typeof tag;\n      if (tagType == 'undefined') tag = '';else if (tagType == 'function' && typeof callback == 'undefined') {\n        callback = tag;\n        tag = '';\n      }\n      var obj = {\n        tag: tag\n      };\n      var p = new Packet(null, 'datastore.get', obj);\n\n      buildfire._sendPacket(p, callback);\n    },\n    getWithDynamicData: function (tag, callback) {\n      var tagType = typeof tag;\n      if (tagType == 'undefined') tag = '';else if (tagType == 'function' && typeof callback == 'undefined') {\n        callback = tag;\n        tag = '';\n      }\n      var obj = {\n        tag: tag,\n        withDynamicData: true\n      };\n      var p = new Packet(null, 'datastore.get', obj);\n\n      buildfire._sendPacket(p, callback);\n    },\n    /// ref: https://github.com/BuildFire/sdk/wiki/How-to-use-Datastore#buildfiredatastoregetbyid--id--tag-optional-callback\n    getById: function (id, tag, callback) {\n      var idType = typeof id;\n\n      if (idType == 'function' && typeof callback == 'undefined') {\n        callback = id;\n        id = '';\n      }\n\n      var tagType = typeof tag;\n      if (tagType == 'undefined') tag = '';else if (tagType == 'function' && typeof callback == 'undefined') {\n        callback = tag;\n        tag = '';\n      }\n      var obj = {\n        tag: tag,\n        id: id\n      };\n      var p = new Packet(null, 'datastore.get', obj);\n\n      buildfire._sendPacket(p, callback);\n    } /// ref: https://github.com/BuildFire/sdk/wiki/How-to-use-Datastore#buildfiredatastoresave-obj-tag-optional-callback\n    ,\n    save: function (obj, tag, callback) {\n      var tagType = typeof tag;\n      if (tagType == 'undefined') tag = '';else if (tagType == 'function' && typeof callback == 'undefined') {\n        callback = tag;\n        tag = '';\n      }\n      var p = new Packet(null, 'datastore.save', {\n        tag: tag,\n        obj: obj\n      });\n\n      buildfire._sendPacket(p, function (err, result) {\n        if (result) buildfire.datastore.triggerOnUpdate(result);\n        if (callback) callback(err, result);\n      });\n    } /// ref: https://github.com/BuildFire/sdk/wiki/How-to-use-Datastore#buildfiredatastoreinsert-obj-tag-optionalcheckduplicate--callback\n    ,\n    insert: function (obj, tag, checkDuplicate, callback) {\n      var checkDuplicateType = typeof checkDuplicate;\n      if (checkDuplicateType == 'undefined') checkDuplicate = false;else if (checkDuplicateType == 'function' && typeof callback == 'undefined') {\n        callback = checkDuplicate;\n        checkDuplicate = false;\n      }\n      var tagType = typeof tag;\n      if (tagType == 'undefined') tag = '';else if (tagType == 'function' && typeof callback == 'undefined') {\n        callback = tag;\n        tag = '';\n      }\n      var p = new Packet(null, 'datastore.insert', {\n        tag: tag,\n        obj: obj,\n        checkDuplicate: checkDuplicate\n      });\n\n      buildfire._sendPacket(p, function (err, result) {\n        if (result) buildfire.datastore.triggerOnUpdate(result);\n        callback(err, result);\n      });\n    } /// ref: https://github.com/BuildFire/sdk/wiki/How-to-use-Datastore#buildfiredatastorebulkinsert-obj-tag-optional---callback\n    ,\n    bulkInsert: function (arrayObj, tag, callback) {\n      if (arrayObj.constructor !== Array) {\n        callback({\n          'code': 'error',\n          'message': 'the data should be an array'\n        }, null);\n        return;\n      }\n\n      var tagType = typeof tag;\n      if (tagType == 'undefined') tag = '';else if (tagType == 'function' && typeof callback == 'undefined') {\n        callback = tag;\n        tag = '';\n      }\n      var p = new Packet(null, 'datastore.bulkInsert', {\n        tag: tag,\n        obj: arrayObj\n      });\n\n      buildfire._sendPacket(p, function (err, result) {\n        if (result) buildfire.datastore.triggerOnUpdate(result);\n        callback(err, result);\n      });\n    } /// ref https://github.com/BuildFire/sdk/wiki/How-to-use-Datastore#buildfiredatastoreupdateidobj-tag-optional-callback\n    ,\n    update: function (id, obj, tag, callback) {\n      var tagType = typeof tag;\n      if (tagType == 'undefined') tag = '';else if (tagType == 'function' && typeof callback == 'undefined') {\n        callback = tag;\n        tag = '';\n      }\n      var p = new Packet(null, 'datastore.update', {\n        tag: tag,\n        id: id,\n        obj: obj\n      });\n\n      buildfire._sendPacket(p, function (err, result) {\n        if (result) buildfire.datastore.triggerOnUpdate(result);\n        if (callback) callback(err, result);\n      });\n    },\n    searchAndUpdate: function (search, obj, tag, callback) {\n      var tagType = typeof tag;\n      if (tagType == 'undefined') tag = '';else if (tagType == 'function' && typeof callback == 'undefined') {\n        callback = tag;\n        tag = '';\n      }\n      var p = new Packet(null, 'datastore.searchAndUpdate', {\n        tag: tag,\n        search: search,\n        obj: obj\n      });\n\n      buildfire._sendPacket(p, function (err, result) {\n        if (result) buildfire.datastore.triggerOnUpdate(result);\n        if (callback) callback(err, result);\n      });\n    } /// ref https://github.com/BuildFire/sdk/wiki/How-to-use-Datastore#buildfiredatastoredeleteidobj-tag-optional-callback\n    ,\n    delete: function (id, tag, callback) {\n      var tagType = typeof tag;\n      if (tagType == 'undefined') tag = '';else if (tagType == 'function' && typeof callback == 'undefined') {\n        callback = tag;\n        tag = '';\n      }\n      var p = new Packet(null, 'datastore.delete', {\n        tag: tag,\n        id: id\n      });\n\n      buildfire._sendPacket(p, function (err, result) {\n        if (result) buildfire.datastore.triggerOnUpdate(result);\n        if (callback) callback(err, result);\n      });\n    } /// ref: https://github.com/BuildFire/sdk/wiki/How-to-use-Datastore#buildfiredatastoresearchoptions-tag-optional-callback\n    ,\n    search: function (options, tag, callback) {\n      var tagType = typeof tag;\n      if (tagType == 'undefined') tag = '';else if (tagType == 'function' && typeof callback == 'undefined') {\n        callback = tag;\n        tag = '';\n      } //auto correct empty string filter\n\n      if (typeof options == 'undefined') options = {\n        filter: {}\n      };\n      if (!options.filter) options.filter = {};\n      var p = new Packet(null, 'datastore.search', {\n        tag: tag,\n        obj: options\n      });\n\n      buildfire._sendPacket(p, function (err, result) {\n        callback(err, result);\n      });\n    } /// ref: https://github.com/BuildFire/sdk/wiki/How-to-use-Datastore#buildfiredatastoreonupdatecallback\n    ,\n    onUpdate: function (callback, allowMultipleHandlers) {\n      return buildfire.eventManager.add('datastoreOnUpdate', callback, allowMultipleHandlers);\n    },\n    triggerOnUpdate: function (obj) {\n      buildfire.eventManager.trigger('datastoreOnUpdate', obj);\n    } /// ref: https://github.com/BuildFire/sdk/wiki/How-to-use-Datastore#buildfiredatastoreonrefreshcallback\n    ,\n    onRefresh: function (callback, allowMultipleHandlers) {\n      return buildfire.eventManager.add('datastoreOnRefresh', callback, allowMultipleHandlers);\n    },\n    triggerOnRefresh: function (obj) {\n      buildfire.eventManager.trigger('datastoreOnRefresh', obj);\n    } /// ref: https://github.com/BuildFire/sdk/wiki/How-to-use-Datastore#buildfiredatastoredisablerefresh\n    ,\n    disableRefresh: function () {\n      var p = new Packet(null, 'datastore.disableRefresh');\n\n      buildfire._sendPacket(p);\n    }\n  } /// ref: https://github.com/BuildFire/sdk/wiki/User-Data:-Save-user-data-from-the-widget\n  ,\n  userData: {\n    get: function (tag, callback) {\n      var tagType = typeof tag;\n      if (tagType == 'undefined') tag = '';else if (tagType == 'function' && typeof callback == 'undefined') {\n        callback = tag;\n        tag = '';\n      }\n      var obj = {\n        tag: tag\n      };\n      var p = new Packet(null, 'userData.get', obj);\n\n      buildfire._sendPacket(p, callback);\n    },\n    /// ref:\n    getById: function (id, tag, callback) {\n      var idType = typeof id;\n\n      if (idType == 'function' && typeof callback == 'undefined') {\n        callback = id;\n        id = '';\n      }\n\n      var tagType = typeof tag;\n      if (tagType == 'undefined') tag = '';else if (tagType == 'function' && typeof callback == 'undefined') {\n        callback = tag;\n        tag = '';\n      }\n      var obj = {\n        tag: tag,\n        id: id\n      };\n      var p = new Packet(null, 'userData.get', obj);\n\n      buildfire._sendPacket(p, callback);\n    } /// ref:\n    ,\n    save: function (obj, tag, userToken, callback) {\n      var tagType = typeof tag;\n      if (tagType == 'undefined') tag = '';else if (tagType == 'function' && typeof callback == 'undefined') {\n        callback = tag;\n        tag = '';\n      }\n      var userTokenType = typeof userToken;\n      if (userTokenType == 'undefined') userToken = '';else if (userTokenType == 'function' && typeof callback == 'undefined') {\n        callback = userToken;\n        userToken = '';\n      }\n      var p = new Packet(null, 'userData.save', {\n        tag: tag,\n        userToken: userToken,\n        obj: obj\n      });\n\n      buildfire._sendPacket(p, function (err, result) {\n        if (result) buildfire.userData.triggerOnUpdate(result);\n        if (callback) callback(err, result);\n      });\n    } /// ref:\n    ,\n    insert: function (obj, tag, userToken, checkDuplicate, callback) {\n      var userTokenType = typeof userToken;\n      if (userTokenType == 'undefined') userToken = '';else if (userTokenType == 'function' && typeof callback == 'undefined') {\n        callback = userToken;\n        userToken = '';\n      }\n      var checkDuplicateType = typeof checkDuplicate;\n      if (checkDuplicateType == 'undefined') checkDuplicate = false;else if (checkDuplicateType == 'function' && typeof callback == 'undefined') {\n        callback = checkDuplicate;\n        checkDuplicate = false;\n      }\n      var userTokenType = typeof userToken;\n      if (userTokenType == 'undefined') userToken = '';else if (userTokenType == 'function' && typeof callback == 'undefined') {\n        callback = userToken;\n        userToken = '';\n      }\n      var tagType = typeof tag;\n      if (tagType == 'undefined') tag = '';else if (tagType == 'function' && typeof callback == 'undefined') {\n        callback = tag;\n        tag = '';\n      }\n      var p = new Packet(null, 'userData.insert', {\n        tag: tag,\n        userToken: userToken,\n        obj: obj,\n        checkDuplicate: checkDuplicate\n      });\n\n      buildfire._sendPacket(p, function (err, result) {\n        if (result) buildfire.userData.triggerOnUpdate(result);\n        callback(err, result);\n      });\n\n      var hasIndex = false;\n\n      if (obj && obj._buildfire && obj._buildfire.index && Object.keys(obj._buildfire.index)) {\n        var filterKeys = Object.keys(obj._buildfire.index);\n        var validKeys = ['string1', 'date1', 'number1', 'array1', 'text'];\n\n        for (var i = 0; i < filterKeys.length; i++) {\n          var key = filterKeys[i];\n\n          if (validKeys.indexOf(key) > -1 && obj._buildfire.index[key]) {\n            hasIndex = true;\n            break;\n          }\n        }\n      }\n\n      if (!hasIndex) {\n        console.warn('WARNING: no index on inserted data! Please see https://github.com/BuildFire/sdk/wiki/User-Data-and-Public-Data-Indexed-Fields');\n      }\n    } /// ref:\n    ,\n    bulkInsert: function (arrayObj, tag, userToken, callback) {\n      if (arrayObj.constructor !== Array) {\n        callback({\n          'code': 'error',\n          'message': 'the data should be an array'\n        }, null);\n        return;\n      }\n\n      var userTokenType = typeof userToken;\n      if (userTokenType == 'undefined') userToken = '';else if (userTokenType == 'function' && typeof callback == 'undefined') {\n        callback = userToken;\n        userToken = '';\n      }\n      var tagType = typeof tag;\n      if (tagType == 'undefined') tag = '';else if (tagType == 'function' && typeof callback == 'undefined') {\n        callback = tag;\n        tag = '';\n      }\n      var p = new Packet(null, 'userData.bulkInsert', {\n        tag: tag,\n        userToken: userToken,\n        obj: arrayObj\n      });\n\n      buildfire._sendPacket(p, function (err, result) {\n        if (result) buildfire.userData.triggerOnUpdate(result);\n        callback(err, result);\n      });\n    } ///\n    ,\n    update: function (id, obj, tag, userToken, callback) {\n      var userTokenType = typeof userToken;\n      if (userTokenType == 'undefined') userToken = '';else if (userTokenType == 'function' && typeof callback == 'undefined') {\n        callback = userToken;\n        userToken = '';\n      }\n      var tagType = typeof tag;\n      if (tagType == 'undefined') tag = '';else if (tagType == 'function' && typeof callback == 'undefined') {\n        callback = tag;\n        tag = '';\n      }\n      var p = new Packet(null, 'userData.update', {\n        tag: tag,\n        userToken: userToken,\n        id: id,\n        obj: obj\n      });\n\n      buildfire._sendPacket(p, function (err, result) {\n        if (result) buildfire.userData.triggerOnUpdate(result);\n        if (callback) callback(err, result);\n      });\n    },\n    searchAndUpdate: function (search, obj, tag, userToken, callback) {\n      var userTokenType = typeof userToken;\n      if (userTokenType == 'undefined') userToken = '';else if (userTokenType == 'function' && typeof callback == 'undefined') {\n        callback = userToken;\n        userToken = '';\n      }\n      var tagType = typeof tag;\n      if (tagType == 'undefined') tag = '';else if (tagType == 'function' && typeof callback == 'undefined') {\n        callback = tag;\n        tag = '';\n      }\n      var p = new Packet(null, 'userData.searchAndUpdate', {\n        tag: tag,\n        userToken: userToken,\n        search: search,\n        obj: obj\n      });\n\n      buildfire._sendPacket(p, function (err, result) {\n        if (result) buildfire.userData.triggerOnUpdate(result);\n        if (callback) callback(err, result);\n      });\n\n      if (!search.$text || !search.$text.$search) {\n        var hasIndex = false;\n        var filterKeys = Object.keys(search);\n\n        for (var i = 0; i < filterKeys.length; i++) {\n          var key = filterKeys[i];\n\n          if (key.indexOf('_buildfire.index') > -1 && search[key]) {\n            hasIndex = true;\n            break;\n          }\n        }\n\n        if (!hasIndex) {\n          console.warn('WARNING: no index on search filter! Please see https://github.com/BuildFire/sdk/wiki/User-Data-and-Public-Data-Indexed-Fields. Filter: ' + JSON.stringify(search));\n        }\n      }\n    } /// ref\n    ,\n    delete: function (id, tag, userToken, callback) {\n      var userTokenType = typeof userToken;\n      if (userTokenType == 'undefined') userToken = '';else if (userTokenType == 'function' && typeof callback == 'undefined') {\n        callback = userToken;\n        userToken = '';\n      }\n      var tagType = typeof tag;\n      if (tagType == 'undefined') tag = '';else if (tagType == 'function' && typeof callback == 'undefined') {\n        callback = tag;\n        tag = '';\n      }\n      var p = new Packet(null, 'userData.delete', {\n        tag: tag,\n        userToken: userToken,\n        id: id\n      });\n\n      buildfire._sendPacket(p, function (err, result) {\n        if (result) buildfire.userData.triggerOnUpdate(result);\n        if (callback) callback(err, result);\n      });\n    } ///\n    ,\n    search: function (options, tag, callback) {\n      var tagType = typeof tag;\n      if (tagType == 'undefined') tag = '';else if (tagType == 'function' && typeof callback == 'undefined') {\n        callback = tag;\n        tag = '';\n      } //auto correct empty string filter\n\n      if (typeof options == 'undefined') options = {\n        filter: {}\n      };\n      if (!options.filter) options.filter = {};\n      var p = new Packet(null, 'userData.search', {\n        tag: tag,\n        obj: options\n      });\n\n      buildfire._sendPacket(p, function (err, result) {\n        callback(err, result);\n      });\n\n      if (!options.filter.$text || !options.filter.$text.$search) {\n        var hasIndex = false;\n        var filterKeys = Object.keys(options.filter);\n\n        for (var i = 0; i < filterKeys.length; i++) {\n          var key = filterKeys[i];\n\n          if (key.indexOf('_buildfire.index') > -1 && options.filter[key]) {\n            hasIndex = true;\n            break;\n          }\n        }\n\n        if (!hasIndex) {\n          console.warn('WARNING: no index on search filter! Please see https://github.com/BuildFire/sdk/wiki/User-Data-and-Public-Data-Indexed-Fields. Filter: ' + JSON.stringify(options.filter));\n        }\n      }\n    },\n    aggregate: function (params, tag, callback) {\n      var tagType = typeof tag;\n      if (tagType == 'undefined') tag = '';else if (tagType == 'function' && typeof callback == 'undefined') {\n        callback = tag;\n        tag = '';\n      }\n\n      if (!params || typeof params !== 'object') {\n        params = {};\n      }\n\n      function validate() {\n        function _checkIfMatchHasIndexes(matchStage) {\n          if (typeof matchStage !== 'object' || Object.keys(matchStage).length === 0) {\n            return false;\n          }\n\n          var matchKeys = Object.keys(matchStage);\n\n          for (var i = 0; i < matchKeys.length; i++) {\n            var key = matchKeys[i];\n\n            if (key.indexOf('_buildfire.index') > -1) {\n              return true;\n            }\n          }\n\n          return false;\n        }\n\n        function _findFirstGeoNearStage(stages) {\n          if (stages && stages.length === 0) {\n            return null;\n          }\n\n          for (var i = 0; i < stages.length; i++) {\n            var stage = stages[i];\n\n            if (typeof stage !== 'object') {\n              continue;\n            }\n\n            if (stage.$geoNear && typeof stage.$geoNear === 'object') {\n              return {\n                $geoNear: stage.$geoNear,\n                index: i\n              };\n            }\n          }\n\n          return null;\n        }\n\n        function _checkIfGeoNearStagesHasRightKey(stages) {\n          // key : Specify the geospatial indexed field to use when calculating the distance.\n          for (var i = 0; i < stages.length; i++) {\n            var stage = stages[i];\n\n            if (typeof stage !== 'object') {\n              continue;\n            }\n\n            if (stage.$geoNear && (typeof stage.$geoNear !== 'object' || !stage.$geoNear.key || !stage.$geoNear.key.endsWith('_buildfire.geo'))) {\n              return false;\n            }\n          }\n\n          return true;\n        }\n\n        if (!params.pipelineStages) {\n          callback('pipelineStages is required property for aggregation', null);\n          return false;\n        }\n\n        if (!Array.isArray(params.pipelineStages)) {\n          callback('pipelineStages property should be an array of your pipeline stages', null);\n          return false;\n        }\n\n        var geoStage = _findFirstGeoNearStage(params.pipelineStages);\n\n        if (geoStage) {\n          if (geoStage.index !== 0) {\n            callback('$geoNear should be first stage of pipeline', null);\n            return false;\n          }\n\n          if (!_checkIfGeoNearStagesHasRightKey(params.pipelineStages)) {\n            callback('$geoNear stages doesn\\'t have the right geospatial indexed field name for key option', null);\n            return false;\n          }\n        } else {\n          // check $match stage should first stage of pipeline\n          if (typeof params.pipelineStages[0] !== 'object' || !params.pipelineStages[0].$match) {\n            callback('$match stage should be first stage of pipeline', null);\n            return false;\n          }\n\n          if (!_checkIfMatchHasIndexes(params.pipelineStages[0].$match)) {\n            callback('$match stage should has at least one of the buildfire indexes', null);\n            return false;\n          }\n        }\n\n        return true;\n      } // these validation not used  for current state, we handle that on server side\n      // if (!validate()) {\n      //     return;\n      // }\n\n\n      var p = new Packet(null, 'userData.aggregate', {\n        tag: tag,\n        obj: params\n      });\n\n      buildfire._sendPacket(p, function (err, result) {\n        callback(err, result);\n      });\n    } /// ref:\n    ,\n    onUpdate: function (callback, allowMultipleHandlers) {\n      return buildfire.eventManager.add('userDataOnUpdate', callback, allowMultipleHandlers);\n    },\n    triggerOnUpdate: function (obj) {\n      buildfire.eventManager.trigger('userDataOnUpdate', obj);\n    } /// ref:\n    ,\n    onRefresh: function (callback, allowMultipleHandlers) {\n      return buildfire.eventManager.add('userDataOnRefresh', callback, allowMultipleHandlers);\n    },\n    triggerOnRefresh: function (obj) {\n      buildfire.eventManager.trigger('userDataOnRefresh', obj);\n    } /// ref:\n    ,\n    disableRefresh: function () {\n      var p = new Packet(null, 'userData.disableRefresh');\n\n      buildfire._sendPacket(p);\n    }\n  },\n  publicData: {\n    /// ref:\n    get: function (tag, callback) {\n      var tagType = typeof tag;\n      if (tagType == 'undefined') tag = '';else if (tagType == 'function' && typeof callback == 'undefined') {\n        callback = tag;\n        tag = '';\n      }\n      var obj = {\n        tag: tag\n      };\n      var p = new Packet(null, 'publicData.get', obj);\n\n      buildfire._sendPacket(p, callback);\n    },\n    /// ref:\n    getById: function (id, tag, callback) {\n      var idType = typeof id;\n\n      if (idType == 'function' && typeof callback == 'undefined') {\n        callback = id;\n        id = '';\n      }\n\n      var tagType = typeof tag;\n      if (tagType == 'undefined') tag = '';else if (tagType == 'function' && typeof callback == 'undefined') {\n        callback = tag;\n        tag = '';\n      }\n      var obj = {\n        tag: tag,\n        id: id\n      };\n      var p = new Packet(null, 'publicData.get', obj);\n\n      buildfire._sendPacket(p, callback);\n    } /// ref:\n    ,\n    save: function (obj, tag, callback) {\n      var tagType = typeof tag;\n      if (tagType == 'undefined') tag = '';else if (tagType == 'function' && typeof callback == 'undefined') {\n        callback = tag;\n        tag = '';\n      }\n      var p = new Packet(null, 'publicData.save', {\n        tag: tag,\n        obj: obj\n      });\n\n      buildfire._sendPacket(p, function (err, result) {\n        if (result) buildfire.publicData.triggerOnUpdate(result);\n        if (callback) callback(err, result);\n      });\n    } /// ref:\n    ,\n    insert: function (obj, tag, checkDuplicate, callback) {\n      var checkDuplicateType = typeof checkDuplicate;\n      if (checkDuplicateType == 'undefined') checkDuplicate = false;else if (checkDuplicateType == 'function' && typeof callback == 'undefined') {\n        callback = checkDuplicate;\n        checkDuplicate = false;\n      }\n      var tagType = typeof tag;\n      if (tagType == 'undefined') tag = '';else if (tagType == 'function' && typeof callback == 'undefined') {\n        callback = tag;\n        tag = '';\n      }\n      var p = new Packet(null, 'publicData.insert', {\n        tag: tag,\n        obj: obj,\n        checkDuplicate: checkDuplicate\n      });\n\n      buildfire._sendPacket(p, function (err, result) {\n        if (result) buildfire.publicData.triggerOnUpdate(result);\n        callback(err, result);\n      });\n\n      var hasIndex = false;\n\n      if (obj && obj._buildfire && obj._buildfire.index && Object.keys(obj._buildfire.index)) {\n        var filterKeys = Object.keys(obj._buildfire.index);\n        var validKeys = ['string1', 'date1', 'number1', 'array1', 'text'];\n\n        for (var i = 0; i < filterKeys.length; i++) {\n          var key = filterKeys[i];\n\n          if (validKeys.indexOf(key) > -1 && obj._buildfire.index[key]) {\n            hasIndex = true;\n            break;\n          }\n        }\n      }\n\n      if (!hasIndex) {\n        console.warn('WARNING: no index on inserted data! Please see https://github.com/BuildFire/sdk/wiki/User-Data-and-Public-Data-Indexed-Fields');\n      }\n    } /// ref:\n    ,\n    bulkInsert: function (arrayObj, tag, callback) {\n      if (arrayObj.constructor !== Array) {\n        callback({\n          'code': 'error',\n          'message': 'the data should be an array'\n        }, null);\n        return;\n      }\n\n      var tagType = typeof tag;\n      if (tagType == 'undefined') tag = '';else if (tagType == 'function' && typeof callback == 'undefined') {\n        callback = tag;\n        tag = '';\n      }\n      var p = new Packet(null, 'publicData.bulkInsert', {\n        tag: tag,\n        obj: arrayObj\n      });\n\n      buildfire._sendPacket(p, function (err, result) {\n        if (result) buildfire.publicData.triggerOnUpdate(result);\n        callback(err, result);\n      });\n    } ///\n    ,\n    update: function (id, obj, tag, callback) {\n      var tagType = typeof tag;\n      if (tagType == 'undefined') tag = '';else if (tagType == 'function' && typeof callback == 'undefined') {\n        callback = tag;\n        tag = '';\n      }\n      var p = new Packet(null, 'publicData.update', {\n        tag: tag,\n        id: id,\n        obj: obj\n      });\n\n      buildfire._sendPacket(p, function (err, result) {\n        if (result) buildfire.publicData.triggerOnUpdate(result);\n        if (callback) callback(err, result);\n      });\n    },\n    searchAndUpdate: function (search, obj, tag, callback) {\n      var tagType = typeof tag;\n      if (tagType == 'undefined') tag = '';else if (tagType == 'function' && typeof callback == 'undefined') {\n        callback = tag;\n        tag = '';\n      }\n      var p = new Packet(null, 'publicData.searchAndUpdate', {\n        tag: tag,\n        search: search,\n        obj: obj\n      });\n\n      buildfire._sendPacket(p, function (err, result) {\n        if (result) buildfire.publicData.triggerOnUpdate(result);\n        if (callback) callback(err, result);\n      });\n\n      if (!search.$text || !search.$text.$search) {\n        var hasIndex = false;\n        var filterKeys = Object.keys(search);\n\n        for (var i = 0; i < filterKeys.length; i++) {\n          var key = filterKeys[i];\n\n          if (key.indexOf('_buildfire.index') > -1 && search[key]) {\n            hasIndex = true;\n            break;\n          }\n        }\n\n        if (!hasIndex) {\n          console.warn('WARNING: no index on search filter! Please see https://github.com/BuildFire/sdk/wiki/User-Data-and-Public-Data-Indexed-Fields. Filter: ' + JSON.stringify(search));\n        }\n      }\n    } /// ref\n    ,\n    delete: function (id, tag, callback) {\n      var tagType = typeof tag;\n      if (tagType == 'undefined') tag = '';else if (tagType == 'function' && typeof callback == 'undefined') {\n        callback = tag;\n        tag = '';\n      }\n      var p = new Packet(null, 'publicData.delete', {\n        tag: tag,\n        id: id\n      });\n\n      buildfire._sendPacket(p, function (err, result) {\n        if (result) buildfire.publicData.triggerOnUpdate(result);\n        if (callback) callback(err, result);\n      });\n    } ///\n    ,\n    search: function (options, tag, callback) {\n      var tagType = typeof tag;\n      if (tagType == 'undefined') tag = '';else if (tagType == 'function' && typeof callback == 'undefined') {\n        callback = tag;\n        tag = '';\n      } //auto correct empty string filter\n\n      if (typeof options == 'undefined') options = {\n        filter: {}\n      };\n      if (!options.filter) options.filter = {};\n      var p = new Packet(null, 'publicData.search', {\n        tag: tag,\n        obj: options\n      });\n\n      buildfire._sendPacket(p, function (err, result) {\n        callback(err, result);\n      });\n\n      if (!options.filter.$text || !options.filter.$text.$search) {\n        var hasIndex = false;\n        var filterKeys = Object.keys(options.filter);\n\n        for (var i = 0; i < filterKeys.length; i++) {\n          var key = filterKeys[i];\n\n          if (key.indexOf('_buildfire.index') > -1 && options.filter[key]) {\n            // if (key.includes('_buildfire.index') && options.filter[key]) {\n            hasIndex = true;\n            break;\n          }\n        }\n\n        if (!hasIndex) {\n          console.warn('WARNING: no index on search filter! Please see https://github.com/BuildFire/sdk/wiki/User-Data-and-Public-Data-Indexed-Fields. Filter: ' + JSON.stringify(options.filter));\n        }\n      }\n    },\n    aggregate: function (params, tag, callback) {\n      var tagType = typeof tag;\n      if (tagType == 'undefined') tag = '';else if (tagType == 'function' && typeof callback == 'undefined') {\n        callback = tag;\n        tag = '';\n      }\n\n      if (!params || typeof params !== 'object') {\n        params = {};\n      }\n\n      function validate() {\n        function _checkIfMatchHasIndexes(matchStage) {\n          if (typeof matchStage !== 'object' || Object.keys(matchStage).length === 0) {\n            return false;\n          }\n\n          var matchKeys = Object.keys(matchStage);\n\n          for (var i = 0; i < matchKeys.length; i++) {\n            var key = matchKeys[i];\n\n            if (key.indexOf('_buildfire.index') > -1) {\n              return true;\n            }\n          }\n\n          return false;\n        }\n\n        function _findFirstGeoNearStage(stages) {\n          if (stages && stages.length === 0) {\n            return null;\n          }\n\n          for (var i = 0; i < stages.length; i++) {\n            var stage = stages[i];\n\n            if (typeof stage !== 'object') {\n              continue;\n            }\n\n            if (stage.$geoNear && typeof stage.$geoNear === 'object') {\n              return {\n                $geoNear: stage.$geoNear,\n                index: i\n              };\n            }\n          }\n\n          return null;\n        }\n\n        function _checkIfGeoNearStagesHasRightKey(stages) {\n          // key : Specify the geospatial indexed field to use when calculating the distance.\n          for (var i = 0; i < stages.length; i++) {\n            var stage = stages[i];\n\n            if (typeof stage !== 'object') {\n              continue;\n            }\n\n            if (stage.$geoNear && (typeof stage.$geoNear !== 'object' || !stage.$geoNear.key || !stage.$geoNear.key.endsWith('_buildfire.geo'))) {\n              return false;\n            }\n          }\n\n          return true;\n        }\n\n        if (!params.pipelineStages) {\n          callback('pipelineStages is required property for aggregation', null);\n          return false;\n        }\n\n        if (!Array.isArray(params.pipelineStages)) {\n          callback('pipelineStages property should be an array of your pipeline stages', null);\n          return false;\n        }\n\n        var geoStage = _findFirstGeoNearStage(params.pipelineStages);\n\n        if (geoStage) {\n          if (geoStage.index !== 0) {\n            callback('$geoNear should be first stage of pipeline', null);\n            return false;\n          }\n\n          if (!_checkIfGeoNearStagesHasRightKey(params.pipelineStages)) {\n            callback('$geoNear stages doesn\\'t have the right geospatial indexed field name for key option', null);\n            return false;\n          }\n        } else {\n          // check $match stage should first stage of pipeline\n          if (typeof params.pipelineStages[0] !== 'object' || !params.pipelineStages[0].$match) {\n            callback('$match stage should be first stage of pipeline', null);\n            return false;\n          }\n\n          if (!_checkIfMatchHasIndexes(params.pipelineStages[0].$match)) {\n            callback('$match stage should has at least one of the buildfire indexes', null);\n            return false;\n          }\n        }\n\n        return true;\n      } // these validation not used  for current state, we handle that on server side\n      // if (!validate()) {\n      //     return;\n      // }\n\n\n      var p = new Packet(null, 'publicData.aggregate', {\n        tag: tag,\n        obj: params\n      });\n\n      buildfire._sendPacket(p, function (err, result) {\n        callback(err, result);\n      });\n    } /// ref:\n    ,\n    onUpdate: function (callback, allowMultipleHandlers) {\n      return buildfire.eventManager.add('publicDataOnUpdate', callback, allowMultipleHandlers);\n    },\n    triggerOnUpdate: function (obj) {\n      buildfire.eventManager.trigger('publicDataOnUpdate', obj);\n    } /// ref:\n    ,\n    onRefresh: function (callback, allowMultipleHandlers) {\n      return buildfire.eventManager.add('publicDataOnRefresh', callback, allowMultipleHandlers);\n    },\n    triggerOnRefresh: function (obj) {\n      buildfire.eventManager.trigger('publicDataOnRefresh', obj);\n    } /// ref:\n    ,\n    disableRefresh: function () {\n      var p = new Packet(null, 'publicData.disableRefresh');\n\n      buildfire._sendPacket(p);\n    }\n  },\n  appData: {\n    get: function (tag, callback) {\n      if (!this._isTagValid(tag, callback)) return;\n      var obj = {\n        tag: tag\n      };\n      var p = new Packet(null, 'appData.get', obj);\n\n      buildfire._sendPacket(p, callback);\n    },\n    getById: function (id, tag, callback) {\n      var idType = typeof id;\n\n      if (idType == 'function' && typeof callback == 'undefined') {\n        callback = id;\n        id = '';\n      }\n\n      if (!this._isTagValid(tag, callback)) return;\n      var obj = {\n        tag: tag,\n        id: id\n      };\n      var p = new Packet(null, 'appData.get', obj);\n\n      buildfire._sendPacket(p, callback);\n    },\n    save: function (obj, tag, callback) {\n      if (!this._isTagValid(tag, callback)) return;\n      var p = new Packet(null, 'appData.save', {\n        tag: tag,\n        obj: obj\n      });\n\n      buildfire._sendPacket(p, function (err, result) {\n        if (result) buildfire.appData.triggerOnUpdate(result);\n        if (callback) callback(err, result);\n      });\n    },\n    insert: function (obj, tag, checkDuplicate, callback) {\n      var checkDuplicateType = typeof checkDuplicate;\n      if (checkDuplicateType == 'undefined') checkDuplicate = false;else if (checkDuplicateType == 'function' && typeof callback == 'undefined') {\n        callback = checkDuplicate;\n        checkDuplicate = false;\n      }\n      if (!this._isTagValid(tag, callback)) return;\n      var p = new Packet(null, 'appData.insert', {\n        tag: tag,\n        obj: obj,\n        checkDuplicate: checkDuplicate\n      });\n\n      buildfire._sendPacket(p, function (err, result) {\n        if (result) buildfire.appData.triggerOnUpdate(result);\n        callback(err, result);\n      });\n\n      var hasIndex = false;\n\n      if (obj && obj._buildfire && obj._buildfire.index && Object.keys(obj._buildfire.index)) {\n        var filterKeys = Object.keys(obj._buildfire.index);\n        var validKeys = ['string1', 'date1', 'number1', 'array1', 'text'];\n\n        for (var i = 0; i < filterKeys.length; i++) {\n          var key = filterKeys[i];\n\n          if (validKeys.indexOf(key) > -1 && obj._buildfire.index[key]) {\n            hasIndex = true;\n            break;\n          }\n        }\n      }\n\n      if (!hasIndex) {\n        console.warn('WARNING: no index on inserted data! Please see https://github.com/BuildFire/sdk/wiki/User-Data-and-Public-Data-Indexed-Fields');\n      }\n    },\n    bulkInsert: function (arrayObj, tag, callback) {\n      if (arrayObj.constructor !== Array) {\n        callback({\n          'code': 'error',\n          'message': 'the data should be an array'\n        }, null);\n        return;\n      }\n\n      if (!this._isTagValid(tag, callback)) return;\n      var p = new Packet(null, 'appData.bulkInsert', {\n        tag: tag,\n        obj: arrayObj\n      });\n\n      buildfire._sendPacket(p, function (err, result) {\n        if (result) buildfire.appData.triggerOnUpdate(result);\n        callback(err, result);\n      });\n    },\n    update: function (id, obj, tag, callback) {\n      if (!this._isTagValid(tag, callback)) return;\n      var p = new Packet(null, 'appData.update', {\n        tag: tag,\n        id: id,\n        obj: obj\n      });\n\n      buildfire._sendPacket(p, function (err, result) {\n        if (result) buildfire.appData.triggerOnUpdate(result);\n        if (callback) callback(err, result);\n      });\n    },\n    searchAndUpdate: function (search, obj, tag, callback) {\n      if (!this._isTagValid(tag, callback)) return;\n      var p = new Packet(null, 'appData.searchAndUpdate', {\n        tag: tag,\n        search: search,\n        obj: obj\n      });\n\n      buildfire._sendPacket(p, function (err, result) {\n        if (result) buildfire.appData.triggerOnUpdate(result);\n        if (callback) callback(err, result);\n      });\n\n      if (!search.$text || !search.$text.$search) {\n        var hasIndex = false;\n        var filterKeys = Object.keys(search);\n\n        for (var i = 0; i < filterKeys.length; i++) {\n          var key = filterKeys[i];\n\n          if (key.indexOf('_buildfire.index') > -1 && search[key]) {\n            hasIndex = true;\n            break;\n          }\n        }\n\n        if (!hasIndex) {\n          console.warn('WARNING: no index on search filter! Please see https://github.com/BuildFire/sdk/wiki/User-Data-and-Public-Data-Indexed-Fields. Filter: ' + JSON.stringify(search));\n        }\n      }\n    },\n    delete: function (id, tag, callback) {\n      if (!this._isTagValid(tag, callback)) return;\n      var p = new Packet(null, 'appData.delete', {\n        tag: tag,\n        id: id\n      });\n\n      buildfire._sendPacket(p, function (err, result) {\n        if (result) buildfire.appData.triggerOnUpdate(result);\n        if (callback) callback(err, result);\n      });\n    },\n    search: function (options, tag, callback) {\n      if (!this._isTagValid(tag, callback)) return; //auto correct empty string filter\n\n      if (typeof options == 'undefined') options = {\n        filter: {}\n      };\n      if (!options.filter) options.filter = {};\n\n      if (!options.filter.$text || !options.filter.$text.$search) {\n        var hasIndex = false;\n        var filterKeys = Object.keys(options.filter);\n\n        for (var i = 0; i < filterKeys.length; i++) {\n          var key = filterKeys[i];\n\n          if (key.indexOf('_buildfire.index') > -1 && options.filter[key]) {\n            hasIndex = true;\n            break;\n          }\n        }\n\n        if (!hasIndex) {\n          console.warn('WARNING: no index on search filter! Please see https://github.com/BuildFire/sdk/wiki/User-Data-and-Public-Data-Indexed-Fields. Filter: ' + JSON.stringify(options.filter));\n        }\n      }\n\n      var p = new Packet(null, 'appData.search', {\n        tag: tag,\n        obj: options\n      });\n\n      buildfire._sendPacket(p, function (err, result) {\n        callback(err, result);\n      });\n    },\n    aggregate: function (params, tag, callback) {\n      if (!this._isTagValid(tag, callback)) return;\n\n      if (!params || typeof params !== 'object') {\n        params = {};\n      }\n\n      function validate() {\n        function _checkIfMatchHasIndexes(matchStage) {\n          if (typeof matchStage !== 'object' || Object.keys(matchStage).length === 0) {\n            return false;\n          }\n\n          var matchKeys = Object.keys(matchStage);\n\n          for (var i = 0; i < matchKeys.length; i++) {\n            var key = matchKeys[i];\n\n            if (key.indexOf('_buildfire.index') > -1) {\n              return true;\n            }\n          }\n\n          return false;\n        }\n\n        function _findFirstGeoNearStage(stages) {\n          if (stages && stages.length === 0) {\n            return null;\n          }\n\n          for (var i = 0; i < stages.length; i++) {\n            var stage = stages[i];\n\n            if (typeof stage !== 'object') {\n              continue;\n            }\n\n            if (stage.$geoNear && typeof stage.$geoNear === 'object') {\n              return {\n                $geoNear: stage.$geoNear,\n                index: i\n              };\n            }\n          }\n\n          return null;\n        }\n\n        function _checkIfGeoNearStagesHasRightKey(stages) {\n          // key : Specify the geospatial indexed field to use when calculating the distance.\n          for (var i = 0; i < stages.length; i++) {\n            var stage = stages[i];\n\n            if (typeof stage !== 'object') {\n              continue;\n            }\n\n            if (stage.$geoNear && (typeof stage.$geoNear !== 'object' || !stage.$geoNear.key || !stage.$geoNear.key.endsWith('_buildfire.geo'))) {\n              return false;\n            }\n          }\n\n          return true;\n        }\n\n        if (!params.pipelineStages) {\n          callback('pipelineStages is required property for aggregation', null);\n          return false;\n        }\n\n        if (!Array.isArray(params.pipelineStages)) {\n          callback('pipelineStages property should be an array of your pipeline stages', null);\n          return false;\n        }\n\n        var geoStage = _findFirstGeoNearStage(params.pipelineStages);\n\n        if (geoStage) {\n          if (geoStage.index !== 0) {\n            callback('$geoNear should be first stage of pipeline', null);\n            return false;\n          }\n\n          if (!_checkIfGeoNearStagesHasRightKey(params.pipelineStages)) {\n            callback('$geoNear stages doesn\\'t have the right geospatial indexed field name for key option', null);\n            return false;\n          }\n        } else {\n          // check $match stage should first stage of pipeline\n          if (typeof params.pipelineStages[0] !== 'object' || !params.pipelineStages[0].$match) {\n            callback('$match stage should be first stage of pipeline', null);\n            return false;\n          }\n\n          if (!_checkIfMatchHasIndexes(params.pipelineStages[0].$match)) {\n            callback('$match stage should has at least one of the buildfire indexes', null);\n            return false;\n          }\n        }\n\n        return true;\n      } // these validation not used  for current state, we handle that on server side\n\n      /* if (!validate()){\n                   return;\n               } */\n\n\n      var p = new Packet(null, 'appData.aggregate', {\n        tag: tag,\n        obj: params\n      });\n\n      buildfire._sendPacket(p, function (err, result) {\n        callback(err, result);\n      });\n    },\n    onUpdate: function (callback, allowMultipleHandlers) {\n      return buildfire.eventManager.add('appDataOnUpdate', callback, allowMultipleHandlers);\n    },\n    triggerOnUpdate: function (obj) {\n      buildfire.eventManager.trigger('appDataOnUpdate', obj);\n    },\n    onRefresh: function (callback, allowMultipleHandlers) {\n      return buildfire.eventManager.add('appDataOnRefresh', callback, allowMultipleHandlers);\n    },\n    triggerOnRefresh: function (obj) {\n      buildfire.eventManager.trigger('appDataOnRefresh', obj);\n    },\n    disableRefresh: function () {\n      var p = new Packet(null, 'appData.disableRefresh');\n\n      buildfire._sendPacket(p);\n    },\n    _isTagValid: function (tag, callback) {\n      var isTagValid = false;\n\n      if (typeof tag === 'string' && tag) {\n        isTagValid = true;\n      }\n\n      if (isTagValid) return isTagValid;\n\n      if (typeof tag === 'function') {\n        callback = tag;\n      }\n\n      if (typeof callback !== 'function') {\n        callback = console.warn;\n      }\n\n      callback({\n        'code': 'error',\n        'message': 'tag is required for appData, and must be a string'\n      }, null);\n      return isTagValid;\n    }\n  } /// ref: https://github.com/BuildFire/sdk/wiki/How-to-use-ImageLib\n  ,\n  imageLib: {\n    get ENUMS() {\n      return {\n        SIZES: {\n          xxs: 32,\n          xs: 64,\n          s: 128,\n          m: 200,\n          l: 304,\n          xl: 416,\n          xxl: 600,\n          '720': 720,\n          '1080': 1080,\n          '1440': 1440,\n\n          get full_width() {\n            return this.findNearest(1);\n          },\n\n          get half_width() {\n            return this.findNearest(2);\n          },\n\n          get third_width() {\n            return this.findNearest(3);\n          },\n\n          get fourth_width() {\n            return this.findNearest(4);\n          },\n\n          get fifth_width() {\n            return this.findNearest(5);\n          },\n\n          get sixth_width() {\n            return this.findNearest(6);\n          },\n\n          findNearest: function (ratio) {\n            var match = null;\n\n            for (var i = 0; i < this.VALID_SIZES.length; i++) {\n              var size = this.VALID_SIZES[i];\n\n              if (window.innerWidth / ratio < this[size]) {\n                match = size;\n                break;\n              }\n            }\n\n            return this[match];\n          },\n          VALID_SIZES: ['xxs', 'xs', 's', 'm', 'l', 'xl', 'xxl', //standard\n          '720', '1080', '1440', //desktop\n          'full_width', 'half_width', 'third_width', 'quarter_width', 'fifth_width', 'sixth_width' // responsive\n          ]\n        },\n        ASPECT_RATIOS: {\n          '1:1': 1,\n          '4:3': 0.75,\n          '16:9': 0.5625,\n          '9:16': 1.77777778,\n          '11:5': 0.45454545,\n          '4:1': 0.25,\n          '2.39:1': 0.41841004,\n          VALID_RATIOS: ['1:1', '4:3', '16:9', '9:16', '11:5', '4:1', '2.39:1']\n        }\n      };\n    },\n\n    /// ref: https://github.com/BuildFire/sdk/wiki/How-to-use-ImageLib#buildfireimagelibshowdialogoptions-callback\n    showDialog: function (options, callback) {\n      var p = new Packet(null, 'imageLib.showDialog', options);\n\n      buildfire._sendPacket(p, callback);\n    },\n    isProdImageServer: function (url) {\n      return url.indexOf('http://imageserver.prod.s3.amazonaws.com') == 0 || url.indexOf('https://imageserver.prod.s3.amazonaws.com') == 0 || url.indexOf('https://s3-us-west-2.amazonaws.com/imageserver.prod') == 0;\n    } //options:{\n    // width: integer or 'full'\n    // height: integer or 'full'\n    // disablePixelRation: bool\n    // }\n    ,\n    resizeImage: function (url, options, element, callback) {\n      if (!url) return null; // return unsupported file types\n\n      if (/\\..{3,4}(?!.)/g.test(url) && !/.(png|jpg|jpeg)(?!.)/gi.test(url)) {\n        var filetype = (/.{0,4}(?!.)/g.exec(url) || ['Selected'])[0];\n        console.warn(filetype + ' files are not supported by resizeImage. Returning original URL: ' + url);\n        return url;\n      }\n\n      if (!options) options = {\n        width: window.innerWidth\n      };else if (typeof options != 'object') throw 'options not an object';\n\n      if (!options.disablePixelRation && options.disablePixelRatio) {\n        options.disablePixelRation = options.disablePixelRatio;\n      }\n\n      if (!options.disablePixelRatio && options.disablePixelRation) {\n        options.disablePixelRatio = options.disablePixelRation;\n      }\n\n      var ratio = options.disablePixelRation ? 1 : window.devicePixelRatio; // Don't pass any value under 1\n\n      if (ratio < 1) {\n        var ratio = 1;\n      }\n\n      if (options.width == 'full') options.width = window.innerWidth;\n      if (options.height == 'full') options.height = window.innerHeight;\n      var root;\n      {\n        //var protocol = window.location.protocol == \"https:\" ? \"https:\" : \"http:\";\n        var root = 'https://alnnibitpo.cloudimg.io/v7'; // Check if there is query string\n\n        var hasQueryString = url.indexOf('?') !== -1;\n        var result = root + '/' + url + (hasQueryString ? '&' : '?') + 'func=bound';\n        var isDevMode = window.location.pathname.indexOf('&devMode=true') !== -1;\n\n        if (isDevMode) {\n          result += '&ci_info=1';\n        }\n\n        if (options.size && options.aspect) {\n          if (this.ENUMS.SIZES.VALID_SIZES.indexOf(options.size) < 0) {\n            var sizes = this.ENUMS.SIZES.VALID_SIZES.join(', ');\n            console.warn('Inavlid size. Availible options are ' + sizes + '. Returning original url');\n            return url;\n          }\n\n          if (this.ENUMS.ASPECT_RATIOS.VALID_RATIOS.indexOf(options.aspect) < 0) {\n            var ratios = this.ENUMS.ASPECT_RATIOS.VALID_RATIOS.join(', ');\n            console.warn('Inavlid aspect ratio. Availible options are ' + ratios + '. Returning original url');\n            return url;\n          } //math.round\n\n\n          options.width = this.ENUMS.SIZES[options.size];\n          options.height = options.width * this.ENUMS.ASPECT_RATIOS[options.aspect];\n        } // check for missing size or aspect\n\n\n        if (options.width && !options.height) {\n          var width = Math.floor(options.width * ratio);\n          result += '&width=' + width;\n        } else if (!options.width && options.height) {\n          var height = Math.floor(options.height * ratio);\n          result += '&height=' + height;\n        } else if (options.width && options.height) {\n          var width = Math.floor(options.width * ratio);\n          var height = Math.floor(options.height * ratio);\n          result += '&width=' + width + '&height=' + height;\n        } else {\n          result = url;\n        }\n\n        this._handleElement(element, result, callback);\n\n        return result;\n      }\n    },\n    cropImage: function (url, options, element, callback) {\n      if (!url) return null; // return unsupported file types\n\n      if (/\\..{3,4}(?!.)/g.test(url) && !/.(png|jpg|jpeg)(?!.)/gi.test(url)) {\n        var filetype = (/.{0,4}(?!.)/g.exec(url) || ['Selected'])[0];\n        console.warn(filetype + ' files are not supported by cropImage. Returning original URL: ' + url);\n        return url;\n      }\n      /*if (imageTools.isProdImageServer(url)) {\n                   url = url.replace(/^https:\\/\\//i, 'http://');\n               }*/\n\n\n      if (!options) {\n        options = {};\n      }\n\n      if (typeof options != 'object') {\n        throw 'options not an object';\n      }\n\n      if (!options.disablePixelRation && options.disablePixelRatio) {\n        options.disablePixelRation = options.disablePixelRatio;\n      }\n\n      if (!options.disablePixelRatio && options.disablePixelRation) {\n        options.disablePixelRatio = options.disablePixelRation;\n      }\n\n      if (options.size && options.aspect) {\n        if (this.ENUMS.SIZES.VALID_SIZES.indexOf(options.size) < 0) {\n          var sizes = this.ENUMS.SIZES.VALID_SIZES.join(', ');\n          console.warn('Inavlid size. Availible options are ' + sizes + '. Returning original url');\n          return url;\n        }\n\n        if (this.ENUMS.ASPECT_RATIOS.VALID_RATIOS.indexOf(options.aspect) < 0) {\n          var ratios = this.ENUMS.ASPECT_RATIOS.VALID_RATIOS.join(', ');\n          console.warn('Inavlid aspect ratio. Availible options are ' + ratios + '. Returning original url');\n          return url;\n        }\n\n        options.width = this.ENUMS.SIZES[options.size];\n        options.height = options.width * this.ENUMS.ASPECT_RATIOS[options.aspect];\n      }\n\n      if (!options.width && !options.height) {\n        options = {\n          width: 'full',\n          height: 'full'\n        };\n      }\n\n      if (options.width == 'full') {\n        options.width = window.innerWidth;\n      }\n\n      if (options.height == 'full') {\n        options.height = window.innerHeight;\n      }\n\n      if (!options.width || !options.height) {\n        console.warn('cropImage doenst have width or height please fix. returning original url');\n        return url + '?h=' + options.height + '&w=' + options.width;\n      }\n\n      var ratio = window.devicePixelRatio;\n\n      if (options && options.disablePixelRatio) {\n        ratio = options.disablePixelRatio;\n      } //var protocol = window.location.protocol == \"https:\" ? \"https:\" : \"http:\";\n\n\n      var root = 'https://alnnibitpo.cloudimg.io/v7';\n      var hasQueryString = url.indexOf('?') !== -1;\n      var result = root + '/' + url + (hasQueryString ? '&' : '?') + 'func=crop';\n      var isDevMode = window.location.pathname.indexOf('&devMode=true') !== -1;\n\n      if (isDevMode) {\n        result += '&ci_info=1';\n      }\n\n      var width = Math.floor(options.width * ratio);\n      var height = Math.floor(options.height * ratio);\n      result += '&width=' + width + '&height=' + height;\n\n      this._handleElement(element, result, callback);\n\n      return result;\n    },\n    _handleElement: function (element, src, callback) {\n      if (!element || !src) return;\n\n      var path = this._getLocalPath(src);\n\n      if (element.tagName === 'IMG') {\n        element.style.setProperty('opacity', '0', 'important');\n        element.src = path;\n\n        element.onload = function () {\n          element.style.removeProperty('opacity');\n          if (callback) callback(path);\n        };\n\n        element.onerror = function () {\n          element.src = src;\n          var p = new Packet(null, 'imageCache.download', src);\n\n          buildfire._sendPacket(p, function () {\n            if (callback) callback(path);\n          });\n        };\n      } else {\n        this._handleBgImage(element, path, src, callback);\n      }\n    },\n    _handleBgImage: function (element, path, src, callback) {\n      applyStyle(element, path);\n      var img = new Image();\n      img.src = path;\n\n      img.onload = function () {\n        if (callback) callback(path);\n      };\n\n      img.onerror = function () {\n        applyStyle(element, src);\n        var p = new Packet(null, 'imageCache.download', src);\n\n        buildfire._sendPacket(p, function (error, localPath) {\n          if (error) {\n            if (callback) callback(src);\n          }\n\n          window.requestAnimationFrame(function () {\n            if (callback) callback(localPath);\n          });\n        });\n      };\n\n      function applyStyle(ele, source) {\n        if (!source) {\n          return ele.style.removeProperty('background-image');\n        }\n\n        var backgroundCss = 'url(\"' + source + '\")';\n        ele.style.setProperty('background-image', backgroundCss, 'important');\n      }\n    },\n    _getLocalPath: function (string) {\n      if (buildfire.isWeb()) {\n        return string;\n      }\n\n      string = string.replace(/(http|https):\\/\\/\\S{0,8}.cloudimg.io\\//g, '');\n      var extension = string.match(/(png|jpg|jpeg)/g)[0] || '';\n      extension = extension ? '.' + extension : '';\n      var hash = 0;\n      if (!string.length) return hash;\n\n      for (var i = 0; i < string.length; i++) {\n        var char = string.charCodeAt(i);\n        hash = (hash << 5) - hash + char;\n        hash |= 0; // Convert to 32bit integer\n      }\n\n      return buildfire.getContext().endPoints.pluginHost.replace('pluginTemplate/plugins', 'imageCache/images') + '/' + hash + extension;\n    },\n    getCompression: function (c) {\n      var result = 'n/';\n\n      if (c) {\n        var isValid = typeof c === 'number' && c >= 1 && c <= 100;\n\n        if (isValid) {\n          var value = 'png-lossy-' + c + '.q' + c + '/';\n\n          if (/png-lossy-\\d{1,3}.q\\d{1,3}\\//g.test(value)) {\n            result = value;\n          }\n        } else {\n          console.warn('Disabling compression, must be an integer between 1-100');\n        }\n      }\n\n      return result;\n    },\n    local: {\n      _parser: document.createElement('a'),\n      localImageLibPath: window.location.href.split('pluginTemplate/')[0] + 'imageLib/',\n      parseFileFromUrl: function (url) {\n        buildfire.imageLib.local._parser.href = url;\n\n        var sections = buildfire.imageLib.local._parser.pathname.split('/');\n\n        if (sections.length == 0) return null;else return sections[sections.length - 1];\n      },\n      toLocalPath: function (url) {\n        if (buildfire.isFileServer(url)) {\n          var localURL = this.localImageLibPath + this.parseFileFromUrl(url); // length of root host\n          //localURL = localURL.substring(localURL.indexOf('/'));\n\n          return localURL;\n        } else return null;\n      },\n      resizeImage: function (url, options, callback) {\n        //var ratio = options.disablePixelRation ? 1 : window.devicePixelRatio;\n        if (!options) options = {\n          width: window.innerWidth\n        };else if (typeof options != 'object') throw 'options not an object';\n        if (options.width == 'full') options.width = window.innerWidth;\n        if (options.height == 'full') options.height = window.innerHeight;\n        var localURL = buildfire.imageLib.local.toLocalPath(url);\n\n        if (localURL) {\n          var img = new Image();\n          img.src = localURL;\n\n          img.onload = function () {\n            if (options.width && !options.height) options.height = img.height * options.width / img.width;else if (!options.width && options.height) options.width = img.width * options.height / img.width;\n            var canvas = document.createElement('canvas');\n            var ctx = canvas.getContext('2d');\n            canvas.width = options.width;\n            canvas.height = options.height;\n            ctx.drawImage(img, 0, 0, options.width, options.height);\n            callback(null, canvas.toDataURL());\n          };\n\n          img.onerror = function () {\n            callback(null, buildfire.imageLib.resizeImage(url, options));\n          };\n        } else callback(null, buildfire.imageLib.resizeImage(url, options));\n      },\n      cropImage: function (url, options, callback) {\n        //If we are online, use the normal crop image.\n        if (window.navigator.onLine) {\n          callback(null, buildfire.imageLib.cropImage(url, options));\n          return;\n        }\n\n        var ratio = options.disablePixelRatio ? 1 : window.devicePixelRatio;\n        if (!options) options = {\n          width: window.innerWidth\n        };else if (typeof options != 'object') throw 'options not an object';\n        if (options.width == 'full') options.width = window.innerWidth;\n        if (options.height == 'full') options.height = window.innerHeight;\n        var localURL = buildfire.imageLib.local.toLocalPath(url);\n\n        if (localURL) {\n          var img = new Image();\n          img.src = localURL;\n\n          img.onload = function () {\n            var canvas = document.createElement('canvas');\n            var ctx = canvas.getContext('2d');\n            var dim = {\n              width: 0,\n              height: 0\n            };\n            var offset = {\n              x: 0,\n              y: 0\n            };\n\n            if (options.width !== options.height) {\n              if (options.width > options.height) {\n                dim.width = options.width;\n                dim.height = img.height * options.width / img.width;\n                offset.y = (options.height - dim.height) / 2;\n              } else {\n                dim.width = img.width * options.height / img.height;\n                dim.height = options.height;\n                offset.x = (options.width - dim.width) / 2;\n              }\n            } else {\n              if (img.width < img.height) {\n                dim.width = options.width;\n                dim.height = img.height * options.width / img.width;\n                offset.y = (options.height - dim.height) / 2;\n              } else {\n                dim.width = img.width * options.height / img.height;\n                dim.height = options.height;\n                offset.x = (options.width - dim.width) / 2;\n              }\n            }\n\n            dim.width *= ratio;\n            dim.height *= ratio;\n            options.width *= ratio;\n            options.height *= ratio;\n            canvas.width = options.width;\n            canvas.height = options.height;\n            ctx.drawImage(img, offset.x, offset.y, dim.width, dim.height);\n            callback(null, canvas.toDataURL());\n          };\n\n          img.onerror = function () {\n            callback(null, buildfire.imageLib.cropImage(url, options));\n          };\n        } else {\n          callback(null, buildfire.imageLib.cropImage(url, options));\n        }\n      }\n    }\n  },\n  colorLib: {\n    showDialog: function (data, options, onchange, callback) {\n      buildfire.eventManager.clear('colorLibOnChange');\n\n      if (typeof onchange == 'function') {\n        buildfire.eventManager.add('colorLibOnChange', function (data) {\n          onchange(null, data);\n        }, false);\n      }\n\n      var packetData = {};\n      if (options) packetData = JSON.parse(JSON.stringify(options));\n      packetData.data = data;\n      var p = new Packet(null, 'colorLib.showDialog', packetData);\n\n      buildfire._sendPacket(p, callback);\n    },\n    _triggerOnChange: function (data) {\n      buildfire.eventManager.trigger('colorLibOnChange', data);\n    }\n  } /// ref: https://github.com/BuildFire/sdk/wiki/How-to-use-Notifications\n  ,\n  notifications: {\n    alert: function (options, callback) {\n      console.warn('Notifications api is deprecated. Please use dialog api. https://github.com/BuildFire/sdk/wiki/How-to-use-Dialogs'); //make it compatible with app, cp and the old versions\n\n      if (options && options.buttonName && !options.okButton) {\n        options.okButton = {\n          text: options.buttonName\n        };\n      }\n\n      var p = new Packet(null, 'notificationsAPI.alert', options);\n\n      buildfire._sendPacket(p, callback);\n    },\n    confirm: function (options, callback) {\n      console.warn('Notifications api is deprecated. Please use dialog api. https://github.com/BuildFire/sdk/wiki/How-to-use-Dialogs'); //make it compatible with app, cp and the old versions\n\n      if (options && options.buttonLabels) {\n        if (!options.confirmButton) {\n          options.confirmButton = {\n            text: options.buttonLabels[0]\n          };\n        }\n\n        if (!options.cancelButton) {\n          options.cancelButton = {\n            text: options.buttonLabels[1]\n          };\n        }\n      }\n\n      var p = new Packet(null, 'notificationsAPI.confirm', options);\n\n      buildfire._sendPacket(p, callback);\n    },\n    prompt: function (options, callback) {\n      var p = new Packet(null, 'notificationsAPI.prompt', options);\n\n      buildfire._sendPacket(p, callback);\n    },\n    beep: function (options, callback) {\n      var p = new Packet(null, 'notificationsAPI.beep', options);\n\n      buildfire._sendPacket(p, callback);\n    },\n    vibrate: function (options, callback) {\n      var p = new Packet(null, 'notificationsAPI.vibrate', options);\n\n      buildfire._sendPacket(p, callback);\n    },\n    showDialog: function (options, callback) {\n      console.warn('Notifications api is deprecated. Please use dialog api. https://github.com/BuildFire/sdk/wiki/How-to-use-Dialogs');\n      var p = new Packet(null, 'notificationsAPI.showDialog', options);\n\n      buildfire._sendPacket(p, callback);\n    }\n  },\n  dialog: {\n    alert: function (options, callback) {\n      var p = new Packet(null, 'dialogAPI.alert', options);\n\n      buildfire._sendPacket(p, function () {\n        if (callback) return callback(null);\n      });\n    },\n    confirm: function (options, callback) {\n      if (!options.confirmButtonText) {\n        options.confirmButtonText = 'Confirm';\n      }\n\n      var p = new Packet(null, 'dialogAPI.confirm', options);\n\n      buildfire._sendPacket(p, callback);\n    },\n    show: function (options, callback) {\n      var p = new Packet(null, 'dialogAPI.show', options);\n      var actionButtonCallbacks = new Object();\n\n      if (options.actionButtons && options.actionButtons.length) {\n        options.actionButtons.forEach(function (button) {\n          actionButtonCallbacks[button.text] = button.action;\n          delete button.action;\n        });\n      }\n\n      buildfire._sendPacket(p, function (err, result) {\n        if (result && result.selectedButton) {\n          var action = actionButtonCallbacks[result.selectedButton.text];\n          if (action) action();\n          result.selectedButton.action = action;\n          callback && callback(err, result.selectedButton);\n        } else {\n          callback && callback(err);\n        }\n      });\n    },\n    toast: function (options, callback) {\n      var p = new Packet(null, 'dialogAPI.toast', options);\n      var actionButton = new Object();\n\n      if (options.actionButton && options.actionButton.action) {\n        actionButton = Object.assign(actionButton, options.actionButton);\n        delete options.actionButton.action;\n      }\n\n      buildfire._sendPacket(p, function (err, actionClicked) {\n        if (actionClicked) {\n          actionButton.action && actionButton.action();\n          callback && callback(err, actionButton);\n        } else {\n          callback && callback(err, null);\n        }\n      });\n    }\n  },\n  bookmarks: {\n    add: function (options, callback) {\n      var p = new Packet(null, 'bookmarkAPI.add', options);\n\n      buildfire._sendPacket(p, callback);\n    },\n    _getParameterByName: function (name, url) {\n      if (!url) url = window.location.href;\n      name = name.replace(/[\\[\\]]/g, '\\\\$&');\n      var regex = new RegExp('[?&]' + name + '(=([^&#]*)|&|#|$)'),\n          results = regex.exec(url);\n      if (!results) return null;\n      if (!results[2]) return '';\n      return decodeURIComponent(results[2].replace(/\\+/g, ' '));\n    },\n    get: function (callback) {\n      var param = buildfire.bookmarks._getParameterByName('bookmarkPayload');\n\n      var bookmark = JSON.parse(param);\n      callback(null, bookmark);\n    },\n    getAll: function (callback) {\n      var p = new Packet(null, 'bookmarkAPI.getAllFromPlugin');\n\n      buildfire._sendPacket(p, callback);\n    },\n    delete: function (options, callback) {\n      var p = new Packet(null, 'bookmarkAPI.deleteFromPlugin', options);\n\n      buildfire._sendPacket(p, callback);\n    }\n  } /// ref: https://github.com/BuildFire/sdk/wiki/How-to-use-action-Items\n  /// also https://github.com/BuildFire/sdk/wiki/BuildFire-Action-Items-Component\n  ,\n  actionItems: {\n    showDialog: function (actionItem, options, callback) {\n      var p = new Packet(null, 'actionItems.showDialog', {\n        actionItem: actionItem,\n        options: options\n      });\n\n      buildfire._sendPacket(p, callback);\n    },\n    execute: function (actionItem, options, callback) {\n      if (typeof options === 'function') callback = options;\n      var p = new Packet(null, 'actionItems.execute', actionItem);\n\n      buildfire._sendPacket(p, callback);\n    },\n    list: function (actionItems, options, callback) {\n      var p = new Packet(null, 'actionItems.list', {\n        actionItems: actionItems,\n        options: options\n      });\n\n      buildfire._sendPacket(p, callback);\n    },\n    create: function (action, iconUrl, title) {\n      var actionItem = {\n        action: action,\n        iconUrl: iconUrl,\n        title: title\n      };\n      return actionItem;\n    }\n  } /// ref: https://github.com/BuildFire/sdk/wiki/How-to-use-Breadcrumbs\n  ,\n  history: {\n    push: function (label, options, callback) {\n      var p = new Packet(null, 'history.push', {\n        label: label,\n        options: options,\n        source: 'plugin'\n      });\n\n      buildfire._sendPacket(p, callback);\n    },\n    onPop: function (callback, allowMultipleHandlers) {\n      return buildfire.eventManager.add('historyOnPop', callback, allowMultipleHandlers);\n    },\n    triggerOnPop: function (obj) {\n      buildfire.eventManager.trigger('historyOnPop', obj);\n    },\n    pop: function (callback) {\n      var p = new Packet(null, 'history.pop');\n\n      buildfire._sendPacket(p, callback);\n    },\n    get: function (options, callback) {\n      var p = new Packet(null, 'history.get', options);\n\n      buildfire._sendPacket(p, callback);\n    }\n  } /// ref: https://github.com/BuildFire/sdk/wiki/How-to-use-Messaging-to-sync-your-Control-to-Widget\n  ,\n  messaging: {\n    sendMessageToControl: function (data) {\n      var p = new Packet(null, 'messaging.triggerOnNewControlMessage', data);\n\n      buildfire._sendPacket(p);\n    },\n    sendMessageToWidget: function (data) {\n      var p = new Packet(null, 'messaging.triggerOnNewWidgetMessage', data);\n\n      buildfire._sendPacket(p);\n    },\n    onReceivedMessage: function (message) {\n      console.info('onReceivedMessage ignored', window.location);\n    },\n    sendMessageToService: function (data) {\n      var p = new Packet(null, 'messaging.sendMessageToService', data);\n\n      buildfire._sendPacket(p);\n    }\n  } /// ref: https://github.com/BuildFire/sdk/wiki/Plugin-Instances\n  ,\n  pluginInstance: {\n    showDialog: function (options, callback) {\n      var p = new Packet(null, 'pluginInstances.showDialog', {\n        options: options\n      });\n\n      buildfire._sendPacket(p, callback);\n    },\n    get: function (ids, callback) {\n      var p = new Packet(null, 'pluginInstances.get', ids);\n\n      buildfire._sendPacket(p, callback);\n    }\n    /*\n           * options {\n           * title : for searching\n           * , pageIndex : 0\n           * , pageSize: max 20\n           * }\n           * */\n    ,\n    search: function (options, callback) {\n      var p = new Packet(null, 'pluginInstances.search', options);\n\n      buildfire._sendPacket(p, callback);\n    },\n    showCreatePluginInstancesDialog: function (options, callback) {\n      if (typeof options == 'function' && !callback) {\n        callback = options;\n        options = {\n          skipPluginInstances: true\n        };\n      } else if (options) {\n        options.skipPluginInstances = true;\n      }\n\n      buildfire.pluginInstance.showDialog(options, callback);\n    },\n    create: function (options, callback) {\n      var p = new Packet(null, 'pluginInstances.create', options);\n\n      buildfire._sendPacket(p, callback);\n    },\n    clone: function (options, callback) {\n      var p = new Packet(null, 'pluginInstances.clone', options);\n\n      buildfire._sendPacket(p, callback);\n    }\n  } /// ref: https://github.com/BuildFire/sdk/wiki/Deep-Links\n  ,\n  deeplink: {\n    getData: function (callback) {\n      if (buildfire.deeplink._data) {\n        return callback(buildfire.deeplink._data);\n      }\n\n      var qs = buildfire.parseQueryString();\n\n      if (qs.dld) {\n        var obj = JSON.parse(qs.dld);\n        buildfire.deeplink._data = obj;\n        callback(obj); /// dld: Deep Link Data\n      } else {\n        callback(null);\n      }\n    },\n    template: {\n      get: function (callback) {\n        var p = new Packet(null, 'deepLink.getTemplate', {});\n\n        buildfire._sendPacket(p, callback);\n      }\n    },\n    setData: function (obj, options, callback) {\n      var p = new Packet(null, 'deepLink.setData', {\n        data: obj,\n        options: options\n      });\n\n      buildfire._sendPacket(p, callback);\n    },\n    createLink: function (obj) {\n      console.log('this method is obsolete you have to call deeplink.template.get instead and it will return back the full deep link');\n      var root = 'app' + buildfire._context.appId + '://plugin';\n      if (!obj) return root;else return root + '?dld=' + JSON.stringify(obj);\n    },\n    generateUrl: function (params, callback) {\n      var p = new Packet(null, 'shortLinks.generate', params);\n\n      buildfire._sendPacket(p, callback);\n    },\n    registerDeeplink: function (options, callback) {\n      if (!callback) {\n        callback = function (err) {\n          if (err) console.error(err);\n        };\n      }\n\n      if (!options) {\n        return callback('Missing options parameter', null);\n      }\n\n      if (!options.id) {\n        return callback('Missing deeplink id', null);\n      }\n\n      if (!options.name) {\n        return callback('Missing deeplink name', null);\n      }\n\n      if (!options.deeplinkData) {\n        return callback('Missing deeplink deeplinkData', null);\n      }\n\n      var _self = this;\n\n      buildfire.getContext(function (err, context) {\n        if (err) {\n          callback(err, null);\n        } else {\n          if (context && context.instanceId && context.pluginId) {\n            var deeplinkItem = {\n              name: options.name,\n              deeplinkId: options.id,\n              imageUrl: options.imageUrl,\n              deeplinkData: options.deeplinkData,\n              pluginInstanceId: context.instanceId,\n              pluginTypeId: context.pluginId,\n              _buildfire: {\n                index: {\n                  string1: context.instanceId,\n                  text: options.name,\n                  array1: [{\n                    string1: options.id\n                  }]\n                }\n              }\n            };\n\n            _self.getDeeplink(options.id, function (err, result) {\n              if (err) return callback(err, null);\n\n              if (result) {\n                buildfire.appData.update(result.id, deeplinkItem, '$$deeplinks', callback);\n              } else {\n                buildfire.appData.insert(deeplinkItem, '$$deeplinks', false, callback);\n              }\n            });\n          } else {\n            callback('no context', null);\n          }\n        }\n      });\n    },\n    getDeeplink: function (deeplinkId, callback) {\n      if (!callback) {\n        return console.error('Missing callback parameter');\n      }\n\n      buildfire.getContext(function (err, context) {\n        if (err) return callback(err, null);\n\n        if (context && context.instanceId) {\n          var searchOptions = {\n            filter: {\n              '_buildfire.index.string1': context.instanceId,\n              '_buildfire.index.array1.string1': deeplinkId\n            }\n          };\n          buildfire.appData.search(searchOptions, '$$deeplinks', function (err, result) {\n            if (err) return callback(err, null);\n\n            if (result) {\n              callback(null, result[0]);\n            } else {\n              callback(null, null);\n            }\n          });\n        } else {\n          callback('no context', null);\n        }\n      });\n    },\n    getAllDeeplinks: function (options, callback) {\n      if (!callback) {\n        return console.error('Missing callback parameter');\n      }\n\n      options = options || {};\n      buildfire.getContext(function (err, context) {\n        if (err) {\n          callback(err, null);\n        } else {\n          if (context && context.instanceId) {\n            var searchOptions = {\n              pageSize: options.pageSize,\n              filter: {\n                '_buildfire.index.string1': context.instanceId\n              }\n            };\n            buildfire.appData.search(searchOptions, '$$deeplinks', callback);\n          } else {\n            callback('no context', null);\n          }\n        }\n      });\n    },\n    unregisterDeeplink: function (deeplinkId, callback) {\n      if (!callback) {\n        callback = function (err) {\n          if (err) console.error(err);\n        };\n      }\n\n      this.getDeeplink(deeplinkId, function (err, result) {\n        if (err) return callback(err, null);\n\n        if (result) {\n          buildfire.appData.delete(result.id, '$$deeplinks', callback);\n        } else {\n          callback('no result found for this deeplink id', null);\n        }\n      });\n    },\n    onUpdate: function (callback, allowMultipleHandlers) {\n      buildfire.eventManager.add('deeplinkOnUpdate', callback, allowMultipleHandlers);\n    },\n    triggerOnUpdate: function (queryString) {\n      try {\n        var qs = buildfire.parseQueryString(decodeURIComponent(queryString));\n        buildfire.deeplink._data = JSON.parse(qs.dld);\n      } catch (error) {\n        console.error(error);\n        buildfire.deeplink._data = queryString;\n      }\n\n      buildfire.eventManager.trigger('deeplinkOnUpdate', buildfire.deeplink._data);\n    },\n    _data: null\n  } /// ref: https://github.com/BuildFire/sdk/wiki/Spinners\n  ,\n  spinner: {\n    show: function (options) {\n      buildfire._sendPacket(new Packet(null, 'spinner.show', options));\n    },\n    hide: function () {\n      buildfire._sendPacket(new Packet(null, 'spinner.hide'));\n    }\n  } /// ref: https://github.com/BuildFire/sdk/wiki/How-to-use-Auth\n  ,\n  auth: {\n    login: function (options, callback) {\n      var p = new Packet(null, 'auth.login', options);\n\n      buildfire._sendPacket(p, callback);\n    },\n    logout: function () {\n      var p = new Packet(null, 'auth.logout');\n\n      buildfire._sendPacket(p);\n    },\n    getCurrentUser: function (callback) {\n      var p = new Packet(null, 'auth.getCurrentUser');\n\n      buildfire._sendPacket(p, callback);\n    },\n    onLogin: function (callback, allowMultipleHandlers) {\n      return buildfire.eventManager.add('authOnLogin', callback, allowMultipleHandlers);\n    },\n    triggerOnLogin: function (user) {\n      buildfire.eventManager.trigger('authOnLogin', user);\n    },\n    onLogout: function (callback, allowMultipleHandlers) {\n      return buildfire.eventManager.add('authOnLogout', callback, allowMultipleHandlers);\n    },\n    triggerOnLogout: function (data) {\n      return buildfire.eventManager.trigger('authOnLogout', data);\n    },\n    onUpdate: function (callback, allowMultipleHandlers) {\n      return buildfire.eventManager.add('authOnUpdate', callback, allowMultipleHandlers);\n    },\n    triggerOnUpdate: function (data) {\n      return buildfire.eventManager.trigger('authOnUpdate', data);\n    },\n    openProfile: function (userId) {\n      var p = new Packet(null, 'auth.openProfile', userId);\n\n      buildfire._sendPacket(p);\n    },\n    getUserProfile: function (options, callback) {\n      var p = new Packet(null, 'auth.getUserProfile', options);\n\n      buildfire._sendPacket(p, callback);\n    },\n    getUserProfiles: function (options, callback) {\n      var p = new Packet(null, 'auth.getUserProfiles', options);\n\n      buildfire._sendPacket(p, callback);\n    },\n    getUsersByEmail: function (options, callback) {\n      var p = new Packet(null, 'auth.getUsersByEmail', options);\n\n      buildfire._sendPacket(p, callback);\n    },\n    getUserPictureUrl: function (params) {\n      var key = null;\n      var value = null;\n\n      if (!params) {\n        params = {};\n      }\n\n      if (params.userId) {\n        key = 'userId';\n        value = params.userId;\n      }\n\n      if (params.email) {\n        key = 'email';\n        value = params.email;\n      }\n\n      if (params.username) {\n        key = 'username';\n        value = params.username;\n      }\n\n      if (!key || !value) throw Error('Invalid user picture params');\n      value = encodeURIComponent(value);\n      var qString = key + '=' + value;\n      var authUrl = 'https://auth.buildfire.com';\n\n      if (buildfire._context) {\n        if (buildfire._context.endPoints && buildfire._context.endPoints.authHost) {\n          authUrl = buildfire._context.endPoints.authHost;\n        }\n\n        if (buildfire._context.appId) {\n          qString = qString + '&externalAppId=' + encodeURIComponent(buildfire._context.appId);\n        }\n      }\n\n      return authUrl + '/src/server.js/user/picture?' + qString;\n    },\n    showUsersSearchDialog: function (options, callback) {\n      var p = new Packet(null, 'usersLib.showSearchDialog', options);\n\n      buildfire._sendPacket(p, callback);\n    },\n    showTagsSearchDialog: function (options, callback) {\n      var p = new Packet(null, 'usersLib.showTagsSearchDialog', options);\n\n      buildfire._sendPacket(p, callback);\n    },\n    assignUserTags: function (tags, options, callback) {\n      var p = new Packet(null, 'userTags.assignUserTags', {\n        tags: tags,\n        options: options\n      });\n\n      buildfire._sendPacket(p, callback);\n    },\n    keepSessionAlive: function (options, callback) {\n      buildfire._sendPacket(new Packet(null, 'auth.keepSessionAlive', options), callback);\n    },\n    searchUsers: function (params, callback) {\n      var p = new Packet(null, 'auth.searchUsers', params);\n\n      buildfire._sendPacket(p, callback);\n    }\n  } /// ref: https://github.com/BuildFire/sdk/wiki/BuildFire-Device-Features\n  ,\n  device: {\n    calendar: {\n      addEvent: function (event, callback) {\n        buildfire._sendPacket(new Packet(null, 'device.calendar.addEvent', event), callback);\n      }\n    },\n    share: function (messageObj, callback) {\n      buildfire._sendPacket(new Packet(null, 'device.share', messageObj), callback);\n    },\n    onAppBackgrounded: function (callback, allowMultipleHandlers) {\n      return buildfire.eventManager.add('deviceAppBackgrounded', callback, allowMultipleHandlers);\n    },\n    onAppResumed: function (callback, allowMultipleHandlers) {\n      return buildfire.eventManager.add('deviceAppResumed', callback, allowMultipleHandlers);\n    },\n    triggerOnAppBackgrounded: function (data) {\n      return buildfire.eventManager.trigger('deviceAppBackgrounded', data);\n    },\n    triggerOnAppResumed: function (data) {\n      return buildfire.eventManager.trigger('deviceAppResumed', data);\n    },\n    contacts: {\n      showDialog: function (options, callback) {\n        var p = new Packet(null, 'device.contacts.showDialog', options);\n\n        buildfire._sendPacket(p, callback);\n      },\n      search: function (options, callback) {\n        var p = new Packet(null, 'device.contacts.search', options);\n\n        buildfire._sendPacket(p, callback);\n      }\n    }\n  } /// ref: https://github.com/BuildFire/sdk/wiki/BuildFire-Geo-Location-Feature\n  ,\n  geo: {\n    getCurrentPosition: function (options, callback) {\n      buildfire._sendPacket(new Packet(null, 'geo.getCurrentPosition', options), callback);\n    },\n    watchPosition: function (options, callback) {\n      buildfire._sendPacket(new Packet(null, 'geo.watchPosition', options));\n\n      this.onPositionChange = callback;\n    } /// override this event handler for when you are watching for GPS Position Changes\n    ,\n    onPositionChange: function (err, position) {},\n    clearWatch: function (watchId, callback) {\n      buildfire._sendPacket(new Packet(null, 'geo.clearWatch', watchId), callback);\n    },\n    calculateDistance: function (start, end, options) {\n      var R = options && options.unitSystem === 'metric' ? 6371 : 3960,\n          decimalPlaces = options && options.decimalPlaces ? options.decimalPlaces : 2,\n          dLat = buildfire.geo.degreesToRadians(end.latitude - start.latitude),\n          dLon = buildfire.geo.degreesToRadians(end.longitude - start.longitude),\n          lat1 = buildfire.geo.degreesToRadians(start.latitude),\n          lat2 = buildfire.geo.degreesToRadians(end.latitude),\n          a = Math.sin(dLat / 2) * Math.sin(dLat / 2) + Math.sin(dLon / 2) * Math.sin(dLon / 2) * Math.cos(lat1) * Math.cos(lat2),\n          c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));\n      return buildfire.geo.round(R * c, decimalPlaces);\n    },\n    round: function (value, decimals) {\n      return Number(Math.round(value + 'e' + decimals) + 'e-' + decimals);\n    } // Converts numeric degrees to radians\n    ,\n    degreesToRadians: function (degrees) {\n      return degrees * Math.PI / 180;\n    }\n  },\n  localStorage: {\n    setItem: function (key, value, callback) {\n      if (!callback) callback = function (err) {\n        if (err) console.error(err);\n      };\n      if (typeof value === 'object') value = JSON.stringify(value);else value = value + ''; // mimic localStorage behavior. e.g: null is stored as \"null\"\n\n      buildfire._sendPacket(new Packet(null, 'localStorage.setItem', {\n        key: key,\n        value: value\n      }), callback);\n\n      buildfire.getContext(function (err, context) {\n        if (err) {\n          callback(err);\n        } else {\n          if (context) {\n            context.localStorage = context.localStorage || []; // update local copy so we don't have to sync\n\n            context.localStorage[key] = value;\n          } else {\n            callback(null, 'no context');\n          }\n        }\n      });\n    },\n    getItem: function (key, callback) {\n      if (!callback) {\n        // var getContext throw if context is not ready and no callback is provided\n        var context = buildfire.getContext();\n\n        if (context && context.localStorage) {\n          var val = context.localStorage[key];\n          return val === undefined ? null : val;\n        } else {\n          return null;\n        }\n      }\n\n      var context = buildfire.getContext(function (err, context) {\n        if (err) {\n          callback(err);\n        } else {\n          if (context && context.localStorage) {\n            var val = context.localStorage[key];\n            callback(null, val === undefined ? null : val);\n          } else {\n            callback(null, null);\n          }\n        }\n      });\n\n      if (context && context.localStorage) {\n        var val = context.localStorage[key];\n        return val === undefined ? null : val;\n      }\n    },\n    removeItem: function (key, callback) {\n      if (!callback) callback = function (err) {\n        if (err) console.error(err);\n      };\n\n      buildfire._sendPacket(new Packet(null, 'localStorage.removeItem', key), callback);\n\n      buildfire.getContext(function (err, context) {\n        if (err) {\n          callback(err);\n        } else {\n          if (context && context.localStorage) {\n            delete context.localStorage[key];\n          } else {\n            callback(null, 'no context');\n          }\n        }\n      });\n    },\n    clear: function (callback) {\n      if (!callback) callback = function (err) {\n        if (err) console.error(err);\n      };\n\n      buildfire._sendPacket(new Packet(null, 'localStorage.clear', {}), callback);\n\n      buildfire.getContext(function (err, context) {\n        if (err) {\n          callback(err);\n        } else {\n          if (context) {\n            // clear local copy\n            context.localStorage = [];\n          } else {\n            callback(null, 'no context');\n          }\n        }\n      });\n    },\n    overrideNativeLocalStorage: function () {\n      localStorage.getItem = function (key) {\n        return buildfire.localStorage.getItem(key);\n      };\n\n      localStorage.setItem = function (key, value) {\n        return buildfire.localStorage.setItem(key, value);\n      };\n\n      localStorage.removeItem = function (key) {\n        return buildfire.localStorage.removeItem(key);\n      };\n\n      localStorage.clear = function () {\n        return buildfire.localStorage.clear();\n      };\n    }\n  },\n  input: {\n    showTextDialog: function (options, callback) {\n      buildfire._sendPacket(new Packet(null, 'input.showTextDialog', options), callback);\n    },\n    showListDialog: function (options, callback) {\n      buildfire._sendPacket(new Packet(null, 'input.showListDialog', options), callback);\n    }\n  },\n  imagePreviewer: {\n    show: function (options, callback) {\n      buildfire._sendPacket(new Packet(null, 'imagePreviewer.show', options), callback);\n    }\n  },\n  notes: {\n    openDialog: function (options, callback) {\n      buildfire._sendPacket(new Packet(null, 'notes.openDialog', options), callback);\n    },\n    onSeekTo: function (callback, allowMultipleHandlers) {\n      return buildfire.eventManager.add('NOTES_SEEK_TO', callback, allowMultipleHandlers);\n    },\n    triggerOnSeekTo: function (data) {\n      buildfire.eventManager.trigger('NOTES_SEEK_TO', data, false);\n    },\n    getByItemId: function (options, callback) {\n      buildfire._sendPacket(new Packet(null, 'notes.getByItemId', options), callback);\n    }\n  },\n  wysiwyg: {\n    injectPluginStyles: function (css) {\n      var tinymcePluginStylesElement = document.getElementById('tinymcePluginStyles');\n\n      if (tinymcePluginStylesElement) {\n        tinymcePluginStylesElement.innerHTML = css;\n      } else {\n        var tinymcePluginStyles = document.createElement('style');\n        tinymcePluginStyles.id = 'tinymcePluginStyles';\n        tinymcePluginStyles.rel = 'stylesheet';\n        tinymcePluginStyles.innerHTML = css;\n        (document.head || document.body || document).appendChild(tinymcePluginStyles);\n      }\n    },\n    extend: function () {\n      if (typeof tinymce !== 'undefined' && tinymce.init && tinymce.isBuildfire) {\n        var appContext = buildfire.getContext();\n\n        if (appContext && appContext.endPoints) {\n          var appTheme = appContext.endPoints.appHost + '/api/app/styles/appTheme.css?appId=' + appContext.appId + '&liveMode=' + appContext.liveMode;\n          var originalTinymceInit = tinymce.init.bind(tinymce);\n\n          tinymce.init = function (options) {\n            if (options._bfInitialize === true) {\n              return originalTinymceInit(options);\n            }\n\n            var originalSetup = options.setup;\n\n            if (originalSetup) {\n              options.setup = function (editor) {\n                editor.on('init', function () {\n                  // add a mimic of buildfire object to prevent errors in tinymce\n                  var scriptElm = editor.dom.create('script', {}, 'var buildfire = {' + 'actionItems: { execute: function() { console.log(\"ignore actionItems in tinymce\")}},' + 'ratingSystem: {inject: function() { console.log(\"ignore rating in tinymce\")}}' + '};');\n                  editor.getDoc().getElementsByTagName('head')[0].appendChild(scriptElm);\n                });\n                editor.on('change', function () {\n                  // check if there are unused style elements for layouts and delete them\n                  var styleElementsInBody = editor.dom.doc.body.querySelectorAll('style[data-layout-name]');\n\n                  if (styleElementsInBody.length > 0) {\n                    var allLayouts = editor.dom.doc.body.querySelectorAll('div[data-layout-name]');\n                    allLayouts = Array.from(allLayouts);\n                    styleElementsInBody.forEach(function (element) {\n                      var isStyleUsed;\n                      isStyleUsed = allLayouts.find(function (layout) {\n                        return layout.dataset.layoutName === element.dataset.layoutName;\n                      });\n\n                      if (!isStyleUsed) {\n                        element.parentElement.removeChild(element);\n                      }\n                    });\n                  }\n                });\n                editor.ui.registry.addMenuItem('bf_clearContent', {\n                  text: 'Delete all',\n                  icon: 'remove',\n                  onAction: function () {\n                    editor.execCommand('mceNewDocument');\n                  }\n                });\n                editor.ui.registry.addMenuItem('bf_delete', {\n                  text: 'Delete',\n                  icon: 'remove',\n                  shortcut: 'Del',\n                  onAction: function () {\n                    editor.execCommand('Delete');\n                  }\n                });\n                editor.ui.registry.addMenuItem('bf_insertBefore', {\n                  text: 'Insert before',\n                  icon: 'chevron-left',\n                  onAction: function () {\n                    let selectedNode = editor.selection.getNode();\n                    selectedNode.insertAdjacentHTML('beforebegin', '&nbsp;');\n                  }\n                });\n                editor.ui.registry.addMenuItem('bf_insertAfter', {\n                  text: 'Insert after',\n                  icon: 'chevron-right',\n                  onAction: function () {\n                    let selectedNode = editor.selection.getNode();\n                    selectedNode.insertAdjacentHTML('afterend', '&nbsp;');\n                  }\n                });\n                editor.ui.registry.addContextMenu('bf_defaultmenuItems', {\n                  update: function (element) {\n                    return element.dataset.bfLayout ? '' : 'cut copy paste bf_insertBefore bf_insertAfter | bf_delete';\n                  }\n                });\n                originalSetup(editor);\n              };\n            }\n\n            buildfire.appearance.getWidgetTheme(function (err, theme) {\n              if (err) return console.error(err);\n\n              if (options.content_style) {\n                options.content_style += buildfire.appearance._getAppThemeCssVariables(theme);\n              } else {\n                options.content_style = buildfire.appearance._getAppThemeCssVariables(theme);\n              }\n            });\n\n            if (options.content_css) {\n              if (options.content_css instanceof Array) {\n                options.content_css.push(appTheme, '../../../../styles/bfUIElements.css', '../../../../scripts/tinymce/bf_tinymce.css');\n              } else {\n                var splittedStyleFiles = options.content_css.split(',');\n                splittedStyleFiles.push(appTheme, '../../../../styles/bfUIElements.css', '../../../../scripts/tinymce/bf_tinymce.css');\n                options.content_css = splittedStyleFiles;\n              }\n            } else {\n              options.content_css = [appTheme, '../../../../styles/bfUIElements.css', '../../../../scripts/tinymce/bf_tinymce.css'];\n            }\n\n            options.menubar = options.menubar || 'edit insert view format tools';\n            var userMenu = options.menu ? JSON.parse(JSON.stringify(options.menu)) : null;\n            options.menu = {\n              edit: {\n                title: 'Edit',\n                items: 'undo redo | cut copy paste | selectall | bf_clearContent'\n              },\n              insert: {\n                title: 'Insert',\n                items: 'bf_insertActionItem media bf_insertImage | bf_insertButtonOrLink | bf_insertRating bf_insertLayout'\n              },\n              view: {\n                title: 'View',\n                items: 'visualaid | preview'\n              },\n              format: {\n                title: 'Format',\n                items: 'bold italic underline strikethrough superscript subscript | formats | removeformat'\n              },\n              tools: {\n                title: 'Tools',\n                items: 'code'\n              }\n            };\n\n            if (userMenu) {\n              for (item in userMenu) {\n                options.menu[item] = userMenu[item];\n              }\n            }\n\n            var defaultPlugins = ['preview', 'code', 'media', 'textcolor', 'colorpicker', 'fullscreen', 'bf_actionitem', 'bf_imagelib', 'bf_rating', 'bf_buttons', 'lists', 'paste', 'bf_layouts'];\n\n            if (options.plugins) {\n              if (options.plugins instanceof Array) {\n                options.plugins = defaultPlugins.concat(options.plugins);\n              } else {\n                var splittedPlugins = options.plugins.split(' ');\n                options.plugins = defaultPlugins.concat(splittedPlugins);\n              }\n            } else {\n              options.plugins = defaultPlugins;\n            }\n\n            var defaultToolbar = 'fontsizeselect forecolor backcolor bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | bf_actionitem bf_imagelib media | code | fullscreen';\n\n            if (options.toolbar) {\n              if (options.toolbar instanceof Array) {\n                if (!(options.toolbar[0] instanceof Object)) {\n                  options.toolbar.forEach(function (toolbarGroup) {\n                    defaultToolbar += ' | ' + toolbarGroup;\n                  });\n                  options.toolbar = defaultToolbar;\n                }\n              } else {\n                defaultToolbar += ' | ' + options.toolbar;\n                options.toolbar = defaultToolbar;\n              }\n            } else {\n              options.toolbar = defaultToolbar;\n            }\n\n            options.toolbar_mode = 'floating';\n            options.theme = 'silver';\n            options.skin = 'bf-skin', options.contextmenu = 'bf_buttonOrLinkContextMenu bf_imageContextMenu bf_actionItemContextMenu bf_customLayouts bf_defaultmenuItems';\n            options.fontsize_formats = '8px 10px 12px 14px 16px 18px 24px 36px';\n            options.extended_valid_elements = 'a[href|onclick|class],img[src|style|onerror|height|width|onclick|alt],button[style|class|onclick]';\n            options.height = options.height || 265;\n            options.custom_elements = 'style';\n            options.convert_urls = false;\n            options._bfInitialize = true;\n            return originalTinymceInit(options);\n          };\n        }\n      }\n    }\n  }\n};\nwindow.parsedQuerystring = buildfire.parseQueryString();\nbuildfire.fid = window.parsedQuerystring.fid;\nbuildfire.init();\nbuildfire.eventManager.add('deviceAppBackgrounded', function () {\n  var stopVideos = function (iframes, videos) {\n    if (iframes) {\n      for (var i = 0; i < iframes.length; i++) {\n        if (iframes[i].src.indexOf('youtube.com') > -1) {\n          if (iframes[i].src.indexOf('enablejsapi=1') == -1) iframes[i].src = iframes[i].src + '?enablejsapi=1';\n          var youtube_command = window.JSON.stringify({\n            event: 'command',\n            func: 'pauseVideo'\n          });\n          iframes[i].contentWindow.postMessage(youtube_command, 'https://www.youtube.com');\n        } else if (iframes[i].src.indexOf('vimeo.com') > -1) {\n          var vimeo_command = JSON.stringify({\n            method: 'pause'\n          });\n          iframes[i].contentWindow.postMessage(vimeo_command, '*');\n        }\n      }\n    }\n\n    if (videos) {\n      for (var j = 0; j < videos.length; j++) {\n        if (videos[j].pause) videos[j].pause();\n      }\n    }\n  };\n\n  var iframes = window.document.getElementsByTagName('iframe');\n  var videos = window.document.getElementsByTagName('video');\n  stopVideos(iframes, videos);\n}, true);\n\n(function () {\n  var processedClick = false;\n\n  var handleEvent = function (eventType, event) {\n    if (!processedClick) {\n      processedClick = true;\n      setTimeout(function () {\n        processedClick = false;\n      }, 1000);\n      buildfire.auth.keepSessionAlive({\n        type: eventType\n      });\n    }\n  };\n\n  document.addEventListener('click', function (e) {\n    setTimeout(function () {\n      handleEvent('click', e);\n    });\n  });\n  document.addEventListener('touchstart', function (e) {\n    setTimeout(function () {\n      handleEvent('touchstart', e);\n    });\n  });\n})();\n\ndocument.addEventListener('DOMContentLoaded', function (event) {\n  //buildfire.appearance.autosizeContainer();\n  if (!buildfire.options.disableSelect) {\n    document.getElementsByTagName('body')[0].className += ' noSelect';\n  }\n\n  buildfire.getContext(function (err, context) {\n    if (err) {\n      console.error(err);\n    } else {\n      if (context && context.debugTag) buildfire.logger.attachRemoteLogger(context.debugTag);\n\n      if (window.location.pathname.indexOf('/widget/') >= 0) {\n        var disableTheme = buildfire.options && buildfire.options.disableTheme ? buildfire.options.disableTheme : false;\n        var enableMDTheme = buildfire.options && buildfire.options.enableMDTheme ? buildfire.options.enableMDTheme : false;\n\n        if (!disableTheme && !enableMDTheme) {\n          if (buildfire.isWeb() || !context.liveMode) buildfire.appearance.attachAppThemeCSSFiles(context.appId, context.liveMode, context.endPoints.appHost);else buildfire.appearance.attachLocalAppThemeCSSFiles(context.appId);\n        }\n      }\n    }\n  });\n  if (window.location.href.indexOf('/widget/') && !buildfire.appearance.disableFastClickOnLoad && !buildfire.options.disableFastClick) buildfire.appearance.attachFastClick();\n\n  if (!buildfire.options.disableExternalLinkOverride) {\n    document.onclick = function (e) {\n      e = e || window.event;\n      var element = e.target || e.srcElement;\n      var href = element.getAttribute('href');\n      var inAppBrowser = element.getAttribute('inAppBrowser');\n\n      if (element.tagName == 'A' && href != null && href != '' && inAppBrowser == null) {\n        var regexp = new RegExp('^(http:\\/|https:\\/|http:\\/\\/|https:\\/\\/|www.)[a-z0-9]');\n\n        if (element.tagName == 'A' && regexp.test(href)) {\n          e.preventDefault();\n          var target = element.getAttribute('inAppBrowser') || '_blank';\n          buildfire.navigation.openWindow(href, target, null);\n        }\n      }\n    };\n  }\n\n  setTimeout(function () {\n    if (!buildfire.options.disableTheme) buildfire.appearance._forceCSSRender();\n  }, 1750);\n});\ndocument.addEventListener('resize', function (event) {\n  buildfire.appearance.autosizeContainer();\n});\n\nwindow.onerror = function (errorMsg, url, lineNumber, column, errorObj) {\n  console.error('Error: ' + errorMsg, ' Script: ' + url, ' Line: ' + lineNumber, ' Column: ' + column, ' StackTrace: ' + errorObj);\n}; //IE and old Android Custom Event Fix\n\n\nif (typeof CustomEvent != 'function') {\n  function CustomEvent(event, params) {\n    params = params || {\n      bubbles: false,\n      cancelable: false,\n      detail: undefined\n    };\n    var evt = document.createEvent('CustomEvent');\n    evt.initCustomEvent(event, params.bubbles, params.cancelable, params.detail);\n    return evt;\n  }\n\n  CustomEvent.prototype = window.Event.prototype;\n  window.CustomEvent = CustomEvent;\n}","\"use strict\";\n\n//release version v2.3.4\n!function (e, t) {\n  if (\"object\" == typeof exports && \"object\" == typeof module) module.exports = t();else if (\"function\" == typeof define && define.amd) define([], t);else {\n    var n = t();\n\n    for (var i in n) (\"object\" == typeof exports ? exports : e)[i] = n[i];\n  }\n}(void 0, function () {\n  return function (e) {\n    function t(i) {\n      if (n[i]) return n[i].exports;\n      var o = n[i] = {\n        i: i,\n        l: !1,\n        exports: {}\n      };\n      return e[i].call(o.exports, o, o.exports, t), o.l = !0, o.exports;\n    }\n\n    var n = {};\n    return t.m = e, t.c = n, t.i = function (e) {\n      return e;\n    }, t.d = function (e, n, i) {\n      t.o(e, n) || Object.defineProperty(e, n, {\n        configurable: !1,\n        enumerable: !0,\n        get: i\n      });\n    }, t.n = function (e) {\n      var n = e && e.__esModule ? function () {\n        return e.default;\n      } : function () {\n        return e;\n      };\n      return t.d(n, \"a\", n), n;\n    }, t.o = function (e, t) {\n      return Object.prototype.hasOwnProperty.call(e, t);\n    }, t.p = \"\", t(t.s = 7);\n  }([function (e, t) {\n    var n;\n\n    n = function () {\n      return this;\n    }();\n\n    try {\n      n = n || Function(\"return this\")() || (0, eval)(\"this\");\n    } catch (e) {\n      \"object\" == typeof window && (n = window);\n    }\n\n    e.exports = n;\n  }, function (e, t, n) {\n    \"use strict\";\n\n    function i(e) {\n      return e && e.__esModule ? e : {\n        default: e\n      };\n    }\n\n    function o(e, t) {\n      function n(e, t) {\n        var n = z,\n            i = n.classNameActiveSlide;\n        e.forEach(function (e, t) {\n          e.classList.contains(i) && e.classList.remove(i);\n        }), e[t].classList.add(i);\n      }\n\n      function i(e) {\n        var t = z,\n            n = t.infinite,\n            i = e.slice(0, n),\n            o = e.slice(e.length - n, e.length);\n        return i.forEach(function (e) {\n          var t = e.cloneNode(!0);\n          B.appendChild(t);\n        }), o.reverse().forEach(function (e) {\n          var t = e.cloneNode(!0);\n          B.insertBefore(t, B.firstChild);\n        }), B.addEventListener(T.transitionEnd, y), f.call(B.children);\n      }\n\n      function o(t, n, i) {\n        (0, l.default)(e, t + \".lory.\" + n, i);\n      }\n\n      function s(e, t, n) {\n        var i = B && B.style;\n        i && (i[T.transition + \"TimingFunction\"] = n, i[T.transition + \"Duration\"] = t + \"ms\", T.hasTranslate3d ? i[T.transform] = \"translate3d(\" + e + \"px, 0, 0)\" : i[T.transform] = \"translate(\" + e + \"px, 0)\");\n      }\n\n      function d(e, t) {\n        var i = z,\n            r = i.slideSpeed,\n            a = i.slidesToScroll,\n            d = i.infinite,\n            l = i.rewind,\n            c = i.rewindSpeed,\n            u = i.ease,\n            v = i.classNameActiveSlide,\n            m = r,\n            p = t ? A + 1 : A - 1,\n            h = Math.round(M - j);\n        o(\"before\", \"slide\", {\n          index: A,\n          nextSlide: p\n        }), O && O.classList.remove(\"disabled\"), k && k.classList.remove(\"disabled\"), \"number\" != typeof e && (e = t ? A + a : A - a), e = Math.min(Math.max(e, 0), S.length - 1), d && void 0 === t && (e += d);\n        var b = Math.min(Math.max(-1 * S[e].offsetLeft, -1 * h), 0);\n        l && Math.abs(N.x) === h && t && (b = 0, e = 0, m = c), s(b, m, u), N.x = b, S[e].offsetLeft <= h && (A = e), !d || e !== S.length - d && 0 !== e || (t && (A = d), t || (A = S.length - 2 * d), N.x = -1 * S[A].offsetLeft, P = function () {\n          s(-1 * S[A].offsetLeft, 0, void 0);\n        }), v && n(f.call(S), A), O && !d && 0 === e && O.classList.add(\"disabled\"), !k || d || l || e + 1 !== S.length || k.classList.add(\"disabled\"), o(\"after\", \"slide\", {\n          currentSlide: A\n        });\n      }\n\n      function c() {\n        o(\"before\", \"init\"), T = (0, a.default)(), z = r({}, u.default, t);\n        var s = z,\n            d = s.classNameFrame,\n            l = s.classNameSlideContainer,\n            c = s.classNamePrevCtrl,\n            m = s.classNameNextCtrl,\n            p = s.enableMouseEvents,\n            E = s.classNameActiveSlide;\n        _ = e.getElementsByClassName(d)[0], B = _.getElementsByClassName(l)[0], O = e.getElementsByClassName(c)[0], k = e.getElementsByClassName(m)[0], N = {\n          x: B.offsetLeft,\n          y: B.offsetTop\n        }, z.infinite ? S = i(f.call(B.children)) : (S = f.call(B.children), O && O.classList.add(\"disabled\"), k && 1 === S.length && !z.rewind && k.classList.add(\"disabled\")), v(), E && n(S, A), O && k && (O.addEventListener(\"click\", h), k.addEventListener(\"click\", b)), _.addEventListener(\"touchstart\", L), p && (_.addEventListener(\"mousedown\", L), _.addEventListener(\"click\", g)), z.window.addEventListener(\"resize\", C), o(\"after\", \"init\");\n      }\n\n      function v() {\n        var e = z,\n            t = e.infinite,\n            i = e.ease,\n            o = e.rewindSpeed,\n            r = e.rewindOnResize,\n            a = e.classNameActiveSlide;\n        M = B.getBoundingClientRect().width || B.offsetWidth, j = _.getBoundingClientRect().width || _.offsetWidth, j === M && (M = S.reduce(function (e, t) {\n          return e + t.getBoundingClientRect().width || t.offsetWidth;\n        }, 0)), r ? A = 0 : (i = null, o = 0), t ? (s(-1 * S[A + t].offsetLeft, 0, null), A += t, N.x = -1 * S[A].offsetLeft) : (s(-1 * S[A].offsetLeft, o, i), N.x = -1 * S[A].offsetLeft), a && n(f.call(S), A);\n      }\n\n      function m(e) {\n        d(e);\n      }\n\n      function p() {\n        return A - z.infinite || 0;\n      }\n\n      function h() {\n        d(!1, !1);\n      }\n\n      function b() {\n        d(!1, !0);\n      }\n\n      function E() {\n        o(\"before\", \"destroy\"), _.removeEventListener(T.transitionEnd, y), _.removeEventListener(\"touchstart\", L), _.removeEventListener(\"touchmove\", x), _.removeEventListener(\"touchend\", w), _.removeEventListener(\"mousemove\", x), _.removeEventListener(\"mousedown\", L), _.removeEventListener(\"mouseup\", w), _.removeEventListener(\"mouseleave\", w), _.removeEventListener(\"click\", g), z.window.removeEventListener(\"resize\", C), O && O.removeEventListener(\"click\", h), k && k.removeEventListener(\"click\", b), z.infinite && Array.apply(null, Array(z.infinite)).forEach(function () {\n          B.removeChild(B.firstChild), B.removeChild(B.lastChild);\n        }), o(\"after\", \"destroy\");\n      }\n\n      function y() {\n        P && (P(), P = void 0);\n      }\n\n      function L(e) {\n        var t = z,\n            n = t.enableMouseEvents,\n            i = e.touches ? e.touches[0] : e;\n        n && (_.addEventListener(\"mousemove\", x), _.addEventListener(\"mouseup\", w), _.addEventListener(\"mouseleave\", w)), _.addEventListener(\"touchmove\", x), _.addEventListener(\"touchend\", w);\n        var r = i.pageX,\n            s = i.pageY;\n        D = {\n          x: r,\n          y: s,\n          time: Date.now()\n        }, F = void 0, R = {}, o(\"on\", \"touchstart\", {\n          event: e\n        });\n      }\n\n      function x(e) {\n        var t = e.touches ? e.touches[0] : e,\n            n = t.pageX,\n            i = t.pageY;\n        R = {\n          x: n - D.x,\n          y: i - D.y\n        }, void 0 === F && (F = !!(F || Math.abs(R.x) < Math.abs(R.y))), !F && D && (e.preventDefault(), s(N.x + R.x, 0, null)), o(\"on\", \"touchmove\", {\n          event: e\n        });\n      }\n\n      function w(e) {\n        var t = D ? Date.now() - D.time : void 0,\n            n = Number(t) < 300 && Math.abs(R.x) > 25 || Math.abs(R.x) > j / 3,\n            i = !A && R.x > 0 || A === S.length - 1 && R.x < 0,\n            r = R.x < 0;\n        F || (n && !i ? d(!1, r) : s(N.x, z.snapBackSpeed)), D = void 0, _.removeEventListener(\"touchmove\", x), _.removeEventListener(\"touchend\", w), _.removeEventListener(\"mousemove\", x), _.removeEventListener(\"mouseup\", w), _.removeEventListener(\"mouseleave\", w), o(\"on\", \"touchend\", {\n          event: e\n        });\n      }\n\n      function g(e) {\n        R.x && e.preventDefault();\n      }\n\n      function C(e) {\n        v(), o(\"on\", \"resize\", {\n          event: e\n        });\n      }\n\n      var N = void 0,\n          M = void 0,\n          j = void 0,\n          S = void 0,\n          _ = void 0,\n          B = void 0,\n          O = void 0,\n          k = void 0,\n          T = void 0,\n          P = void 0,\n          A = 0,\n          z = {};\n\n      \"undefined\" != typeof jQuery && e instanceof jQuery && (e = e[0]);\n      var D = void 0,\n          R = void 0,\n          F = void 0;\n      return c(), {\n        setup: c,\n        reset: v,\n        slideTo: m,\n        returnIndex: p,\n        prev: h,\n        next: b,\n        destroy: E\n      };\n    }\n\n    Object.defineProperty(t, \"__esModule\", {\n      value: !0\n    });\n\n    var r = Object.assign || function (e) {\n      for (var t = 1; t < arguments.length; t++) {\n        var n = arguments[t];\n\n        for (var i in n) Object.prototype.hasOwnProperty.call(n, i) && (e[i] = n[i]);\n      }\n\n      return e;\n    };\n\n    t.lory = o;\n    var s = n(3),\n        a = i(s),\n        d = n(4),\n        l = i(d),\n        c = n(2),\n        u = i(c),\n        f = Array.prototype.slice;\n  }, function (e, t, n) {\n    \"use strict\";\n\n    Object.defineProperty(t, \"__esModule\", {\n      value: !0\n    }), t.default = {\n      slidesToScroll: 1,\n      slideSpeed: 300,\n      rewindSpeed: 600,\n      snapBackSpeed: 200,\n      ease: \"ease\",\n      rewind: !1,\n      infinite: !1,\n      classNameFrame: \"js_frame\",\n      classNameSlideContainer: \"js_slides\",\n      classNamePrevCtrl: \"js_prev\",\n      classNameNextCtrl: \"js_next\",\n      classNameActiveSlide: \"active\",\n      enableMouseEvents: !1,\n      window: window,\n      rewindOnResize: !0\n    };\n  }, function (e, t, n) {\n    \"use strict\";\n\n    (function (e) {\n      function n() {\n        var t = void 0,\n            n = void 0,\n            i = void 0,\n            o = void 0;\n        return function () {\n          var r = document.createElement(\"_\"),\n              s = r.style,\n              a = void 0;\n          \"\" === s[a = \"webkitTransition\"] && (i = \"webkitTransitionEnd\", n = a), \"\" === s[a = \"transition\"] && (i = \"transitionend\", n = a), \"\" === s[a = \"webkitTransform\"] && (t = a), \"\" === s[a = \"msTransform\"] && (t = a), \"\" === s[a = \"transform\"] && (t = a), document.body.insertBefore(r, null), s[t] = \"translate3d(0, 0, 0)\", o = !!e.getComputedStyle(r).getPropertyValue(t), document.body.removeChild(r);\n        }(), {\n          transform: t,\n          transition: n,\n          transitionEnd: i,\n          hasTranslate3d: o\n        };\n      }\n\n      Object.defineProperty(t, \"__esModule\", {\n        value: !0\n      }), t.default = n;\n    }).call(t, n(0));\n  }, function (e, t, n) {\n    \"use strict\";\n\n    function i(e, t, n) {\n      var i = new r.default(t, {\n        bubbles: !0,\n        cancelable: !0,\n        detail: n\n      });\n      e.dispatchEvent(i);\n    }\n\n    Object.defineProperty(t, \"__esModule\", {\n      value: !0\n    }), t.default = i;\n\n    var o = n(5),\n        r = function (e) {\n      return e && e.__esModule ? e : {\n        default: e\n      };\n    }(o);\n  }, function (e, t, n) {\n    (function (t) {\n      var n = t.CustomEvent;\n      e.exports = function () {\n        try {\n          var e = new n(\"cat\", {\n            detail: {\n              foo: \"bar\"\n            }\n          });\n          return \"cat\" === e.type && \"bar\" === e.detail.foo;\n        } catch (e) {}\n\n        return !1;\n      }() ? n : \"undefined\" != typeof document && \"function\" == typeof document.createEvent ? function (e, t) {\n        var n = document.createEvent(\"CustomEvent\");\n        return t ? n.initCustomEvent(e, t.bubbles, t.cancelable, t.detail) : n.initCustomEvent(e, !1, !1, void 0), n;\n      } : function (e, t) {\n        var n = document.createEventObject();\n        return n.type = e, t ? (n.bubbles = Boolean(t.bubbles), n.cancelable = Boolean(t.cancelable), n.detail = t.detail) : (n.bubbles = !1, n.cancelable = !1, n.detail = void 0), n;\n      };\n    }).call(t, n(0));\n  },, function (e, t, n) {\n    e.exports = n(1);\n  }]);\n});","'use strict';\n\nif (typeof buildfire == 'undefined') throw 'please add buildfire.js first to use carousel components';\nif (typeof buildfire.components == 'undefined') buildfire.components = {};\nif (typeof buildfire.components.carousel == 'undefined') buildfire.components.carousel = {};\n\n(function () {\n  var scripts = document.getElementsByTagName('script');\n  var carouselScriptSrc = null;\n\n  for (var i = 0; i < scripts.length; i++) {\n    if (scripts[i].src && (scripts[i].src.toLowerCase().indexOf('buildfire/components/carousellight/carousellight.js') || scripts[i].src.toLowerCase().indexOf('buildfire/components/carousellight/carousellight.min.js'))) {\n      carouselScriptSrc = scripts[i].src;\n    }\n  }\n\n  if (carouselScriptSrc) {\n    if (typeof lory == 'undefined') {\n      document.write('<script src=\"' + carouselScriptSrc + '/../../../../lory/lory.min.js\"></script>');\n    } //Add Lory CSS\n\n\n    var style = document.getElementById('loryInjectedStyle');\n    if (style) document.head.removeChild(style);\n    style = document.createElement('style');\n    style.id = 'loryInjectedStyle';\n    style.innerHTML += ' .loryFrame {position: relative;font-size: 0; line-height: 0; overflow: hidden; white-space: nowrap;}';\n    style.innerHTML += ' .loryFrame li { position: relative; display: inline-block; height: 100%;}';\n    style.innerHTML += ' .lorySlides { display: inline-block;}';\n    style.innerHTML += ' .loryPercentage .lorySlides { display: block; padding: 0px;}';\n    style.innerHTML += ' .loryPercentage li {  width: 100%;}';\n    if (style.innerHTML.length > 0) document.head.appendChild(style); //# Add Lory CSS\n  } else {\n    throw 'carousellight components not found';\n  }\n})(); // This is the class that will be used in the mobile\n//{selector:selector, items:items, layout:layout, speed:speed}\n\n\nbuildfire.components.carousel.view = function (options) {\n  if (options.items && options.items.length > 0) {\n    /*\n           if more than one image add carousel else add image directly to the carousel container\n           */\n    if (options.items.length > 1) {\n      this.config = this.mergeSettings(options);\n\n      this._initDimensions(this.config.layout);\n\n      this.init();\n    } else {\n      //add image directly to carousel container without adding the carousel lib\n      options.selector.innerHTML = ''; //append image tag\n\n      var img = document.createElement('img');\n      img.setAttribute(\"src\", buildfire.imageLib.cropImage(options.items[0].iconUrl, {\n        size: 'full_width',\n        aspect: '16:9',\n        width: window.innerWidth,\n        height: Math.ceil(9 * window.innerWidth / 16)\n      }));\n      img.alt = options.items[0].title;\n      options.selector.appendChild(img);\n      img.addEventListener(\"click\", function () {\n        buildfire.actionItems.execute(options.items[0], function (err, result) {\n          if (err) {\n            console.warn('Error openning slider action: ', err);\n          }\n        });\n      });\n    }\n\n    options.selector.style.display = \"\";\n  } else {\n    options.selector.style.display = \"none\";\n  }\n}; // Carousel view methods\n\n\nbuildfire.components.carousel.view.prototype = {\n  mergeSettings: function (options) {\n    var settings = {\n      selector: '.js_percentage',\n      items: [],\n      layout: null,\n      speed: 200,\n      loop: true,\n      autoInterval: 5 * 1000\n    };\n    var userSttings = options;\n\n    for (var attrname in userSttings) {\n      settings[attrname] = userSttings[attrname];\n    }\n\n    return settings;\n  },\n  init: function () {\n    this.selector = typeof this.config.selector === 'string' ? document.querySelector(this.config.selector) : this.config.selector;\n\n    if (!this.selector) {\n      throw 'selecter not found';\n      return;\n    }\n\n    var self = this;\n\n    function validateLauncherCarousel() {\n      buildfire.getContext(function (err, result) {\n        if (result && result.device && result.device.platform && result.device.platform.toLowerCase() == 'ios' && buildfire.getFrameType() == 'LAUNCHER_PLUGIN') {\n          buildfire.navigation.onAppLauncherActive(function () {\n            self._applySlider();\n          }, true);\n          buildfire.navigation.onAppLauncherInactive(function () {\n            self._destroySlider();\n          }, true);\n        }\n      });\n    }\n\n    if (this.config.items && this.config.items.length > 0) {\n      this._renderHTMLItems(function () {\n        self._applySlider();\n\n        validateLauncherCarousel();\n      });\n    } else {\n      self._applySlider();\n\n      validateLauncherCarousel();\n    }\n  },\n  _destroySlider: function () {\n    if (this.timerInterval) {\n      clearInterval(this.timerInterval);\n      this.timerInterval = null;\n    }\n  },\n  _applySlider: function () {\n    if (!this.lorySlider) {\n      this.lorySlider = lory(this.config.selector, {\n        classNameSlideContainer: this.config.classNameSlideContainer || 'js_slides',\n        classNameFrame: this.config.classNameFrame || 'js_frame',\n        ease: 'ease',\n        rewindSpeed: 600,\n        //ms\n        slideSpeed: this.config.speed,\n        //ms\n        slidesToScroll: this.config.slidesToScroll || 1,\n        infinite: this.config.infinite || 1,\n        enableMouseEvents: true\n      });\n    }\n\n    if (this.config.loop && this.config.items && this.config.items.length > 1) {\n      var self = this;\n\n      if (this.timerInterval) {\n        clearInterval(this.timerInterval);\n        this.timerInterval = null;\n      }\n\n      this.timerInterval = setInterval(function () {\n        self.lorySlider.next();\n      }, this.config.autoInterval);\n    }\n  },\n  _renderHTMLItems: function (callback) {\n    var self = this;\n\n    while (this.selector.firstChild) {\n      this.selector.removeChild(this.selector.firstChild);\n    }\n\n    this.sliderFrame = document.createElement('div');\n    ['loryFrame', 'js_frame'].forEach(function (cname) {\n      self.sliderFrame.classList.add(cname);\n    });\n    this.slideContainer = document.createElement('ul');\n    ['lorySlides', 'js_slides'].forEach(function (cname) {\n      self.slideContainer.classList.add(cname);\n    });\n\n    this._loadImages(this.config.items, function () {\n      ['slider', 'js_percentage', 'loryPercentage'].forEach(function (cname) {\n        self.selector.classList.add(cname);\n      });\n      self.sliderFrame.appendChild(self.slideContainer);\n      self.selector.appendChild(self.sliderFrame);\n      callback();\n    });\n  },\n  _loadImages: function (items, callback) {\n    var self = this;\n    var itemsLength = items.length;\n    var pending = itemsLength;\n\n    if (itemsLength == 0) {\n      callback();\n    }\n\n    for (var i = 0; i < itemsLength; i++) {\n      this._appendItem(items[i], function (itemSlide) {\n        pending--;\n        self.slideContainer.appendChild(itemSlide);\n\n        if (pending == 0) {\n          callback();\n        }\n      });\n    }\n  },\n  _appendItem: function (item, callback) {\n    var slide = document.createElement('li');\n    slide.classList.add('js_slide');\n    slide.addEventListener('click', function () {\n      buildfire.actionItems.execute(item, function (err, result) {\n        if (err) {\n          console.warn('Error openning slider action: ', err);\n        }\n      });\n    });\n    buildfire.imageLib.local.cropImage(item.iconUrl, {\n      aspect: this.aspect,\n      size: 'full_width',\n      width: this.width,\n      height: this.height\n    }, function (err, result) {\n      if (!err) {\n        var image = document.createElement(\"img\");\n        image.src = result;\n        image.alt = item.title || '';\n        slide.appendChild(image);\n      } else console.log('Error occurred while cropping image: ', err);\n\n      callback(slide);\n    });\n  },\n  // allows you to append a single item or an array of items\n  append: function (items) {\n    if (!items) return;else if (!(items instanceof Array) && typeof items == 'object') items = [items];\n\n    if (items && items instanceof Array && items.length) {\n      for (var i = 0; i < items.length; i++) {\n        this.items.push(items[i]);\n      }\n\n      var self = this;\n\n      this._loadImages(items, function () {\n        self._applySlider();\n      });\n    }\n  },\n  _initDimensions: function (layout) {\n    this.width = window.innerWidth;\n    layout = layout || 'WideScreen';\n\n    if (layout == 'WideScreen') {\n      this.height = Math.ceil(9 * this.width / 16);\n      this.aspect = '16:9';\n    } else if (layout == 'Square') {\n      this.height = this.width;\n      this.aspect = '1:1';\n    } else if (layout == 'Cinema') {\n      this.height = Math.ceil(1 * this.width / 2.39);\n      this.aspect = '2.39:1';\n    } else if (layout == 'MobileScreen') {\n      this.height = window.innerHeight / this.width * this.width;\n      this.width = this.width;\n      this.aspect = '9:16';\n    }\n\n    this.cssWidth = this.width + 'px';\n\n    if (this.height > 380) {\n      this.cssHeight = '380px';\n    } else {\n      this.cssHeight = this.height + 'px';\n    } // Set Min height on carousel so doesn't push content down on load.\n\n\n    this._minHeight = '180px';\n    this._minHeight = this.cssHeight;\n  }\n};"]}