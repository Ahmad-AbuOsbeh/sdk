const dynamicEngine={triggerContextChange(e){for(var n in dynamicEngine.expressions._evaluationRequests){n=dynamicEngine.expressions._evaluationRequests[n];n.context&&n._context.__handler__._usedProperties[e.contextProperty]&&dynamicEngine.expressions._evaluate(n)}},expressions:{_evaluationRequests:{},evaluate(e,n){var t=e["id"],e={callback:n,options:e,id:t||dynamicEngine.expressions._nanoid(),destroy(){dynamicEngine.expressions._destroyRequest(this.id)}};return t&&dynamicEngine.expressions._destroyRequest(t),dynamicEngine.expressions._evaluate(e),e},_evaluate(o){const r=dynamicEngine["expressions"],{id:a,callback:d}=o,u=o.options["expression"];r._prepareContext(o.options,(e,n)=>{try{var t={_usedProperties:{},get(e,n){return"__handler__"===n?this:n in e?(this._usedProperties[n]=!0,e[n]):void 0},set(){throw"not_allowed"}},s="`"+u+"`";o._context=new Proxy(n,t),o.context=n;var i=Function(`"use strict"; const context = this;return (${s})`).bind(o._context)();(r._evaluationRequests[a]=o).callback(null,i)}catch(e){d(e)}})},_destroyRequest(e){delete dynamicEngine.expressions._evaluationRequests[e]},_getBaseContext(e,n){n(null,{})},getContext(e,n){n(null,{})},_prepareContext(s,i){dynamicEngine.expressions._getBaseContext(null,(e,t)=>{dynamicEngine.expressions.getContext({request:s},(e,n)=>{Object.assign(t,n,s.extendedContext),i(null,t)})})},_isServer(){return!("undefined"!=typeof window&&window.document)},_nanoid(e=21){return crypto.getRandomValues(new Uint8Array(e)).reduce((e,n)=>e+=(n&=63)<36?n.toString(36):n<62?(n-26).toString(36).toUpperCase():62<n?"-":"_","")}}};
//# sourceMappingURL=dynamicEngine.min.js.map
