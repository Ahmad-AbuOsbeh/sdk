const dynamicEngine={expressions:{_evaluationRequests:{},evaluate({id:e,expression:n,extendedContext:t},s){t={callback:s,expression:n,extendedContext:t,id:e||dynamicEngine.expressions._nanoid(),destroy:function(){dynamicEngine.expressions._destroyRequest(this.id)}};return e&&dynamicEngine.expressions._destroyRequest(e),dynamicEngine.expressions._evaluate(t),t},_evaluate:function(r){dynamicEngine.expressions._prepareContext({extendedContext:r.extendedContext},(e,o)=>{r.context=o,dynamicEngine.expressions._evaluationRequests[r.id]=r;try{let i="`"+r.expression+"`";dynamicEngine.expressions._getBaseContextProxy(null,(e,n)=>{for(var t in o)if(o.hasOwnProperty(t)){let e=t;Object.defineProperty(n,t,{get:function(){return n._used[e]=!0,o[e]}})}r.contextProxy=n;var s=Function(`"use strict"; const context = this;return (${i})`).bind(n)();r.callback(null,s)})}catch(e){r.callback(e)}})},_destroyRequest:function(e){delete dynamicEngine.expressions._evaluationRequests[e]},_getBaseContextProxy(e,n){n(null,{_used:{}})},_getBaseContext(e,n){n(null,{})},getContext(e,n){n(null,{})},_prepareContext({extendedContext:s},i){dynamicEngine.expressions._getBaseContext(null,(e,t)=>{dynamicEngine.expressions.getContext(null,(e,n)=>{Object.assign(t,n,s),i(null,t)})})},_isServer(){return!("undefined"!=typeof window&&window.document)},_nanoid(e=21){return crypto.getRandomValues(new Uint8Array(e)).reduce((e,n)=>e+=(n&=63)<36?n.toString(36):n<62?(n-26).toString(36).toUpperCase():62<n?"-":"_","")},triggerExpressionContextChange(e){for(var n in dynamicEngine.expressions._evaluationRequests){n=dynamicEngine.expressions._evaluationRequests[n];n.contextProxy&&n.contextProxy._used[e.contextProperty]&&dynamicEngine.expressions._evaluate(n)}}}};
//# sourceMappingURL=dynamicEngine.min.js.map
