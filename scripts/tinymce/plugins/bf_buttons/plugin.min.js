function showDialog(t,e){t.windowManager.openUrl({title:"Insert button or link",url:e+"/dialog.html",width:500,height:500,buttons:[{text:"Cancel",type:"cancel"},{text:"Select Action",name:"Select Action",type:"custom",primary:!0}],onAction:(t,e)=>{"Select Action"===e.name&&t.sendMessage({message:"getButtonData"})},onMessage:(e,n)=>{let o=n.data.content,i=n.mceAction;o&&"setButtonData"===i&&buildfire.actionItems.showDialog({},{allowNoAction:!0,showIcon:!1,showTitle:!1},(n,i)=>{if(n)return console.error(n);if(!i)return;let a=escape(JSON.stringify(i)),u=document.createElement("button"===o.type?"button":"a");u.className="button"===o.type?"bf-btn bf-btn-"+o.buttonStyle:"bf-text-"+o.buttonStyle,u.setAttribute("data-execute",a),u.setAttribute("onclick",'buildfire.actionItems.execute(JSON.parse(unescape(this.getAttribute("data-execute"))), ()=>{})'),u.innerText=i.title,t.insertContent(u.outerHTML+"&nbsp;"),e.close()})}})}tinymce.PluginManager.add("bf_buttons",function(t,e){return t.ui.registry.addButton("bf_buttons",{text:"Buttons",icon:!1,tooltip:"Insert button or link",onAction:function(){showDialog(t,e)},showDialog:function(){showDialog(t,e)}}),{getMetadata:function(){return{name:"Buttons Plugin"}}}});